<?php/** * @package     Joomla.Administrator * @subpackage  com_plugins * * @copyright   Copyright (C) 2005 - 2016 Open Source Matters, Inc. All rights reserved. * @license     GNU General Public License version 2 or later; see LICENSE.txt */defined('_JEXEC') or die;/** * Plugin controller class. * * @since  1.6 */class PluginsControllerPlugin extends JControllerForm{    public function ajax_edit_row(){        $input = JFactory::getApplication()->input;        $post = json_decode(file_get_contents('php://input'));        $extension_id = $post->extension_id;        $data=new stdClass();        require_once JPATH_ROOT.DS.'administrator/components/com_menus/helpers/html/menus.php';        $data->html_include_menu=MenusHtmlMenus::render_html_select_include_menu_by_extension($extension_id,' multiple="multiple" ');        $data->html_exclude_menu=MenusHtmlMenus::render_html_select_exclude_menu_by_extension($extension_id,' multiple="multiple" ');        echo new JResponseJson($data, null, false, $input->get('ignoreMessages', true, 'bool'));    }    public function ajax_save_row(){        $input = JFactory::getApplication()->input;        $post = json_decode(file_get_contents('php://input'));        $extension_id = $post->extension_id;        $include_menu = $post->include_menu;        $exclude_menu = $post->exclude_menu;        $plugin_model=$this->getModel('plugin');        $plugin_model->save((array)$post);        $view = &$this->getView('Plugins', 'html', 'PluginsView');        $data=new stdClass();        $data->list_menu_include=$view->get_render_html_menu_tag(json_encode($include_menu));        $data->list_menu_exclude=$view->get_render_html_menu_tag(json_encode($exclude_menu));        echo new JResponseJson($data, null, false, $input->get('ignoreMessages', true, 'bool'));    }    public function ajax_cancel_row(){        $input = JFactory::getApplication()->input;        $post = json_decode(file_get_contents('php://input'));        $extension_id = $post->extension_id;        $plugin_model=$this->getModel('plugin');        $item=$plugin_model->getItem($extension_id);        $view = &$this->getView('Plugins', 'html', 'PluginsView');        $data=new stdClass();        $data->list_menu_include=$view->get_render_html_menu_tag($item->include_menu);        $data->list_menu_exclude=$view->get_render_html_menu_tag($item->exclude_menu);        echo new JResponseJson($data, null, false, $input->get('ignoreMessages', true, 'bool'));    }}