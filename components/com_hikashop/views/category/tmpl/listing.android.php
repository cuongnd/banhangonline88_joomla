<?php$image_helper = hikashop_get('helper.image');$debug=JUtility::get_debug();$response=new stdClass();$response->categories=array();foreach($this->rows as $category) {    $item=new stdClass();    $item->category_id=$category->category_id;    $item->category_name=$category->category_name;    $item->medium_image = $image_helper->getThumbnail($category->category_medium_image_file_path, array(500, 500), array('default' => true), true);    $item->link=hikashop_contentLink('category&task=listing&cid='.$category->category_id.'&name='.$category->alias,$category->category_id);    $response->categories[]=$item;}$response->products=array();foreach($this->products as $product) {    $item=new stdClass();    $item->product_id=$product->product_id;    $item->product_name=$product->product_name;    $item->html_price=$product->html_price;    $item->images=array();    foreach($product->images as $image) {        $item->images[]= $image_helper->getThumbnail($image->file_path, array(500, 500), array('default' => true), true);    }    $link='product&task=show&cid=' . $product->product_id . '&name=' . $product->alias . $this->itemid . $this->category_pathway;    $item->link=hikashop_contentLink($link.'&partner_id='.$this->user->user_id, $this->row);    $response->products[]=$item;}echo json_encode($response);?>