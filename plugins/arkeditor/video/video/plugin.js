(function(){CKEDITOR.plugins.add("video",{requires:"widget",init:function(n){n.widgets.add("video",{templates:'<div class="htlvdo"><video><\/video><\/div>',upcast:function(n){return n.name=="div"&&n.hasClass("htlvdo")}});n.on("insertHtml",function(n){var i=n.data,t=i.dataValue;t=t.replace("<video",'<div class="htlvdo"><video').replace("/video>","/video><\/div>");i.dataValue=t})},afterInit:function(n){var t=n.dataProcessor,i=t&&t.dataFilter;i&&i.addRules({elements:{video:function(t){if(!t.parent||t.parent.name!="div"||t.parent.name=="div"&&!t.parent.hasClass("htlvdo")){var i="widget_"+CKEDITOR.tools.getNextId(),r=new CKEDITOR.htmlParser.element("div",{"class":"htlvdo",id:i});if(t.wrapWith(r),n.status!="ready")CKEDITOR.once("instanceReady",function(t){var r=n.document.getById(i);t.editor.widgets.initOn(r,"video")});else n.once("dataReady",function(){var t=n.document.getById(i);n.widgets.initOn(t,"video")})}return t}}})}})})()