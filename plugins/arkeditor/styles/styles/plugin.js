/**
 * @license Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */
(function(){"use strict";var n=CKEDITOR.ui.panel.block.prototype;CKEDITOR.ui.panel.block=function(n,t){this.element=n.append(n.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));t&&CKEDITOR.tools.extend(this,t);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"],"data-id":this.attributes["data-id"]||""});this.keys={};var i=this._||(this._={});i.markItem=function(n){if(n!=-1){var i=this.element.getElementsByTag("a"),t=i.getItem(this._.focusIndex=n);CKEDITOR.env.webkit&&t.getDocument().getWindow().focus();t.focus();this.onMark&&this.onMark(t)}};i.focusIndex=-1;this.element.disableContextMenu()};CKEDITOR.ui.panel.block.prototype=n;CKEDITOR.plugins.add("styles",{requires:"richcombo",init:function(n){var f=n.config,i=n.lang.stylescombo,t={},u=[],e=[],o=[],s=[],r,h=[],c;n.on("stylesSet",function(i){var a=i.data.styles,r,v,y,c,p,l;if(a){for(c=0,p=a.length;c<p;c++)if((l=a[c],!n.blockless||!(l.element in CKEDITOR.dtd.$block))&&(v=l.name,r=new CKEDITOR.style(l),!n.filter.customConfig||n.filter.check(r))){r._name=v;r._.enterMode=f.enterMode;r._.type=y=r.assignedTo||r.type;t[v]=r;switch(y){case CKEDITOR.STYLE_OBJECT:e.push(r);break;case CKEDITOR.STYLE_BLOCK:o.push(r);break;case CKEDITOR.STYLE_INLINE:s.push(r)}h.push(r)}return u=e.concat(o).concat(s),!1}});c={label:i.label,title:i.panelTitle,toolbar:"styles,10",allowedContent:h,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(f.contentsCss),multiSelect:!0,attributes:{"aria-label":i.panelTitle,"data-id":"styles"}},init:function(){for(var n,t,e,r,f=0,o=u.length;f<o;f++)n=u[f],t=n._name,r=n._.type,r!=e&&(this.startGroup(i["panelTitle"+String(r)]),e=r),this.add(t,n.type==CKEDITOR.STYLE_OBJECT?t:n.buildPreview(),t);this.commit()},onClick:function(i){n.focus();n.fire("saveSnapshot");var r=t[i],u=n.elementPath();n[r.checkActive(u,n)?"removeStyle":"applyStyle"](r);n.fire("saveSnapshot")},onRender:function(){n.on("selectionChange",function(i){for(var r,o=this.getValue(),s=i.data.path,f=s.elements,u=0,h=f.length,e;u<h;u++){e=f[u];for(r in t)if(t[r].checkElementRemovable(e,!0,n)){r!=o&&this.setValue(r);return}}this.setValue("")},this)},onOpen:function(){var e=n.getSelection(),o=e.getSelectedElement(),s=n.elementPath(o),r=[0,0,0,0],u,f,h;this.showAll();this.unmarkAll();for(u in t)f=t[u],h=f._.type,f.checkActive(s,n)&&this.mark(u);r[CKEDITOR.STYLE_BLOCK]||this.hideGroup(i["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);r[CKEDITOR.STYLE_INLINE]||this.hideGroup(i["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);r[CKEDITOR.STYLE_OBJECT]||this.hideGroup(i["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var i=n.elementPath(),r,u;if(i){for(r in t)if(u=t[r],u.checkApplicable(i,n,n.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){r&&(delete r._.panel,delete r._.list,r._.committed=0,r._.items={},r._.state=CKEDITOR.TRISTATE_OFF);t={};u=[]}};n.ui.addRichCombo("Styles",c)}})})()