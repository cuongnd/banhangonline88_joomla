(function(){function i(n,t){function r(i){var r,e;if(!i){alert("XML template file not parsed");return}if(r=i.selectSingleNode("/Templates"),!r){alert("The <Templates> node was not found");return}var c=r.getAttribute("imagesBasePath"),p=r.getAttribute("templateName")||"default",s={},l=i.selectNodes("Template",r),w=s.templates=[];for(c&&(s.imagesPath=CKEDITOR.basePath+"../../../../"+c),e=0;e<l.length;e++){var o=l[e],f={},a=o.getAttribute("title"),v=o.getAttribute("image"),y=i.getInnerXml("Description",o),h=i.selectSingleNode("Html",o);a&&(f.title=a);v&&(f.image=v);y&&(f.description=y);f.html=h.text?h.text:h.textContent;w.push(f)}CKEDITOR.addTemplates(p,s);++u==n.length&&setTimeout(t,0)}for(var u=0,i=0;i<n.length;i++)CKEDITOR.ajax.loadXml(n[i].substring(4),r)}CKEDITOR.plugins.add("xmltemplates",{requires:["dialog","ajax","xml"],init:function(n){n.config.removePlugins.indexOf("templates")==-1&&(CKEDITOR.config.templates_files=["xml:"+CKEDITOR.getUrl(n.config.baseHref+"index.php?option=com_ajax&plugin=arktemplates&format=xml")])}});var n={},t={};CKEDITOR.addTemplates=function(t,i){n[t]=i};CKEDITOR.getTemplates=function(t){return n[t]};CKEDITOR.loadTemplates=function(n,r){function c(){u=[];f.length==0&&setTimeout(r,0)}function l(){f=[];u.length==0&&setTimeout(r,0)}var u=[],f=[],s,o,h,e;for(typeof n=="string"&&(n=[n]),o=0,h=n.length;o<h;o++)e=n[o],t[e]||((e.substring(0,4)=="xml:"?f:u).push(e),t[e]=1);u.length&&(s=!0,CKEDITOR.scriptLoader.load(u,c));f.length&&(s=!0,i(f,l));s||setTimeout(r,0)};CKEDITOR.config.template="default"})()