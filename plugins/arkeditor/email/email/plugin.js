"use strict";
/**
 * @license Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */
(function(){CKEDITOR.plugins.add("email",{requires:"link",icons:"email",hidpi:!1,init:function(n){var t=/^(mailto:([^?]+)(?:\?(.+))?|javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)|javascript:([^(]+)\(([^)]+)\))$/;n.addCommand("email",new CKEDITOR.dialogCommand("email",{allowedContent:"a[!href]",requiredContent:"a[href]"}));n.ui.addButton&&n.ui.addButton("Email",{label:n.lang.link.toEmail,command:"email",toolbar:"links,40"});CKEDITOR.dialog.add("email",this.path+"dialogs/email.js");n.on("doubleclick",function(i){var r=CKEDITOR.plugins.link.getSelectedLink(n)||i.data.element;if(!r.isReadOnly()&&r.is("a")&&r.getAttribute("href")&&t.test(r.getAttribute("href")))return n.execCommand("email"),!1},null,null,0);n.on("doubleclick",function(t){t.data.link&&n.getSelection().selectElement(t.data.link)},null,null,20);n.addMenuItems&&n.addMenuItems({email:{label:n.lang.link.toEmail,command:"email",group:"link",order:6}});n.contextMenu&&n.contextMenu.addListener(function(i){var r,u;return!i||i.isReadOnly()?null:(r=CKEDITOR.plugins.link.getSelectedLink(n),!r)?null:(u={},r.getAttribute("href")&&t.test(r.getAttribute("href"))&&(u={email:CKEDITOR.TRISTATE_OFF}),u)})}})})()