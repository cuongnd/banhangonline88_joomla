if(typeof(akeeba)=="undefined"){var akeeba={}}if(typeof(akeeba.jQuery)=="undefined"){akeeba.jQuery=jQuery.noConflict()}var AKEEBA_ANALYZE_SUCCESS=1;var AKEEBA_ANALYZE_WARNING=0;var AKEEBA_ANALYZE_FAILURE=-1;akeeba.jQuery(document).ready(function(d){var e=d("#log");var c=d("#analyze-log");var b=d("#download-log");var a=d("#output-plain");e.attr("disabled",null);e.change(function(){var f=jQuery(this).val();c.hide();b.hide();if(f){c.show();b.show()}});b.click(function(h){h.preventDefault();var g=jQuery(this).data("url");var f=e.val();g.replace("[TAG]",f);window.location=g});c.click(function(g){g.preventDefault();if(jQuery(this).data("started")==true){return false}jQuery(this).addClass("btn-inverse").removeClass("btn-primary").data("started",true);e.attr("disabled",true);jQuery("#stepper-complete").empty();a.hide();var f=new AkeebaStepper({onBeforeStart:function(h){h.data.log=jQuery("#log").val()},onComplete:function(p){var j="";var l=jQuery(document.createElement("div")).addClass("well");var m=jQuery(document.createElement("div")).addClass("row-striped").appendTo(l);var k=JSON.parse(p.Results);var h=Joomla.JText._("COM_AKEEBA_ALICE_SUCCESSS");var i=Joomla.JText._("COM_AKEEBA_ALICE_WARNING");var n=Joomla.JText._("COM_AKEEBA_ALICE_ERROR");jQuery.each(k,function(q,t){var v=jQuery(document.createElement("div")).addClass("row-fluid").css("width","99%");var s="label-success";var u=h;if(t.result==AKEEBA_ANALYZE_WARNING){u=i;s="label-warning"}else{if(t.result==AKEEBA_ANALYZE_FAILURE){u=n;s="label-important"}}jQuery(document.createElement("div")).addClass("pull-left").html(t.check).appendTo(v);jQuery(document.createElement("div")).addClass("pull-right label "+s).html(u).appendTo(v);jQuery(document.createElement("div")).addClass("clearfix").appendTo(v);if(t.result!=AKEEBA_ANALYZE_SUCCESS){j+="[b]"+t.check+"[/b]\n"+t.error+"\n\n";var r=jQuery(document.createElement("div")).addClass("help-block").appendTo(v);jQuery(document.createElement("div")).html(t.error).appendTo(r);jQuery(document.createElement("div")).html(jQuery(document.createElement("em")).html(t.solution)).appendTo(r)}v.appendTo(m)});l.appendTo("#stepper-complete");jQuery("#stepper-progress-pane").hide("fast");jQuery("#stepper-complete").show();c.removeClass("btn-inverse").addClass("btn-primary").data("started",false);e.attr("disabled",null);if(j){var o="------ BEGIN OF ALICE RAW OUTPUT -----\n";o+=j.replace(/<br\/>/gi,"\n");o+="------ END OF ALICE RAW OUTPUT -----\n";a.find("textarea").val(o);a.show()}}});f.init();return false});a.find("textarea").focus(function(){var g=d(this);g.select();window.setTimeout(function(){g.select()},1);function f(){g.off("mouseup",f);return false}g.mouseup(f)});e.change()});