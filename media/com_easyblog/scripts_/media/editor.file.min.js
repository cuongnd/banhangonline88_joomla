EasyBlog.module("media/editor.file",function($){var module=this;EasyBlog.require().view("media/editor.file","media/editor.file.preview").done(function(){EasyBlog.Controller("Media.Editor.File",{defaultOptions:{view:{panel:"media/editor.file",preview:"media/editor.file.preview"},"{editorPreview}":".editorPreview","{editorPanel}":".editorPanel","{filePreviewCaption}":".filePreviewCaption","{insertItemButton}":".insertItemButton","{insertItemDetail}":".insertItemDetail","{insertCaption}":".insertCaption",
"{insertAs}":".insertAs"}},function(self){var $Media,$Library,$Browser;return{init:function(){$Media=self.media;$Library=$Media.library;$Browser=$Media.browser;var meta=self.meta();self.editorPanel().html(self.view.panel({meta:meta})).implement(EasyBlog.Controller.Media.Editor.Panel,{},function(){self.panel=this});self.editorPreview().implement(EasyBlog.Controller.Media.Editor.Preview,{},function(){self.preview=this;self.generatePreview()})},generatePreview:function(){var preview=self.preview.container().find("a"),
target=self.insertAs().val(),content=self.insertCaption().val();if(preview.length<1){var meta=self.meta();self.preview.container().html(self.view.preview({meta:meta,target:target,content:content}))}else preview.attr("target",target).text(content);self.preview.resetLayout()},setLayout:function(){},meta:function(){return $Library.getMeta(self.key)},place:function(){return $Library.getPlace(self.meta().place)},"{self} insertItem":function(){var meta=self.meta(),options={title:meta.title,target:self.insertAs().val(),
content:self.insertCaption().val()};$Media.insert(self.meta(),options)},"{insertCaption} keyup":function(el){self.generatePreview()},"{insertCaption} blur":function(el){if(el.val()==""){var meta=self.meta();el.val(meta.title);self.generatePreview()}},"{insertAs} change":function(el){self.generatePreview()}}});module.resolve()})});
