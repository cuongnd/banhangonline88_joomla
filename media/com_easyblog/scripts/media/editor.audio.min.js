EasyBlog.module("media/editor.audio",function(e){var t=this;EasyBlog.require().view("media/editor.audio","media/editor.audio.player").done(function(){EasyBlog.Controller("Media.Editor.Audio",{defaultOptions:{view:{panel:"media/editor.audio",player:"media/editor.audio.player"},player:{width:400,height:24,autostart:!1,controlbar:"bottom",backcolor:"#333333",frontcolor:"#ffffff",modes:[{type:"html5"},{type:"flash",src:e.rootPath+"components/com_easyblog/assets/vendors/jwplayer/player.swf"},{type:"download"}]},"{editorPreview}":".editorPreview","{editorPanel}":".editorPanel","{playerContainer}":".playerContainer","{autoplay}":".autoplay"}},function(t){var n,r,i;return{init:function(){n=t.media,r=n.library,i=n.browser;var e=t.meta(),s=t.place();t.editorPanel().html(t.view.panel({meta:e})).implement(EasyBlog.Controller.Media.Editor.Panel,{},function(){t.panel=this}),t.editorPreview().implement(EasyBlog.Controller.Media.Editor.Preview,{},function(){t.preview=this,t.initPlayer()})},initPlayer:function(){EasyBlog.require().script(e.rootPath+"/components/com_easyblog/assets/vendors/jwplayer/jwplayer.js").done(function(e){var n=t.meta(),r=t.place(),i="player-"+e.uid(),s=e.extend(t.options.player,{id:i,file:t.meta().url}),o=t.view.player({id:i,meta:n,options:s});t.preview.container().append(o),t.player=jwplayer(i).setup(s),t.preview.resetLayout()})},meta:function(){return r.getMeta(t.key)},place:function(){return r.getPlace(t.meta().place)},setLayout:function(){},stop:function(){t.player&&t.player.getState()=="PLAYING"&&t.player.pause()},deactivate:function(){t.stop()},"{self} cancelItem":function(){t.stop()},"{self} insertItem":function(){var e={autostart:t.autoplay().val()=="1"?!0:!1};n.insert(t.meta(),e)}}}),t.resolve()})});