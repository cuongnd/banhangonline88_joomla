EasyBlog.module("media/editor.file",function(e){var t=this;EasyBlog.require().view("media/editor.file","media/editor.file.preview").done(function(){EasyBlog.Controller("Media.Editor.File",{defaultOptions:{view:{panel:"media/editor.file",preview:"media/editor.file.preview"},"{editorPreview}":".editorPreview","{editorPanel}":".editorPanel","{filePreviewCaption}":".filePreviewCaption","{insertItemButton}":".insertItemButton","{insertItemDetail}":".insertItemDetail","{insertCaption}":".insertCaption","{insertAs}":".insertAs"}},function(e){var t,n,r;return{init:function(){t=e.media,n=t.library,r=t.browser;var i=e.meta();e.editorPanel().html(e.view.panel({meta:i})).implement(EasyBlog.Controller.Media.Editor.Panel,{},function(){e.panel=this}),e.editorPreview().implement(EasyBlog.Controller.Media.Editor.Preview,{},function(){e.preview=this,e.generatePreview()})},generatePreview:function(){var t=e.preview.container().find("a"),n=e.insertAs().val(),r=e.insertCaption().val();if(t.length<1){var i=e.meta();e.preview.container().html(e.view.preview({meta:i,target:n,content:r}))}else t.attr("target",n).text(r);e.preview.resetLayout()},setLayout:function(){},meta:function(){return n.getMeta(e.key)},place:function(){return n.getPlace(e.meta().place)},"{self} insertItem":function(){var n=e.meta(),r={title:n.title,target:e.insertAs().val(),content:e.insertCaption().val()};t.insert(e.meta(),r)},"{insertCaption} keyup":function(t){e.generatePreview()},"{insertCaption} blur":function(t){if(t.val()==""){var n=e.meta();t.val(n.title),e.generatePreview()}},"{insertAs} change":function(t){e.generatePreview()}}}),t.resolve()})});