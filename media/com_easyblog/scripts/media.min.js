EasyBlog.module("media",function(e){var t=this,n=function(t){return e("<div>").text(t).html().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},r,i,s,o,u;EasyBlog.Controller("Media",{defaultOptions:{debug:{logging:EasyBlog.debug,itemVisibility:!1,delayConfiguration:0,delayCommon:0,delayBrowser:0,delayUploader:0,delayEditor:0},ui:"#EasyBlogMediaManagerUI",overlay:{background:"black",opacity:0},modal:{size:.9},recentActivities:{hideAfter:3e3},"{modalGroup}":".mediaModalGroup","{modal}":".mediaModal","{loaderModal}":".loaderModal","{uploaderModal}":".uploaderModal","{browserModal}":".browserModal","{editorModal}":".editorModal","{modalContent}":".modalContent","{overlay}":".media-overlay","{modalDashboardButton}":".dashboardButton","{assetItem}":".assetItem"}},function(n){return{console:function(e,t){if(!n.options.debug.logging)return;var r=window.console;if(!r)return;var e=r[e];if(!e)return;e.apply?e.apply(r,t):e(t.join(" "))},assets:{},getAsset:function(t){if(n.assets[t]===undefined){var r=n.assets[t]=e.Deferred();r.done(function(){n.assetItem(".asset-type-"+t).removeClass("loading done failed").addClass("done")}).fail(function(){n.assetItem(".asset-type-"+t).removeClass("loading done failed").addClass("fail")})}return n.assets[t]},createAsset:function(e,t,r){var i=n.getAsset(e);return i.factory=t,setTimeout(function(){i.factory&&i.factory(i)},r),i},init:function(){r=n,n.IE=function(){var e,t=3,n=document.createElement("div"),r=n.getElementsByTagName("i");while(n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",r[0]);return t>4?t:e}();if(typeof tinyMCE!="undefined"&&tinyMCE&&tinyMCE.isIE&&n.IE==9)var t=setInterval(function(){var r=tinyMCE.editors.write_content;if(!r)return;var i="keydown.mediaManager mousedown.mediaManager focus.mediaManager";e(r.contentWindow).off(i).on(i,function(){n.bookmark={element:r.selection.getEnd(),range:r.selection.getBookmark(1).rng}}),clearInterval(t)},500);n.originalBodyOverflow=e("body").css("overflow"),n.createAsset("configuration",function(e){EasyBlog.module("media/configuration").done(function(){var t=this;n.initialize(this),e.resolve()}).fail(function(){e.reject()})},n.options.debug.delayConfiguration),n.createAsset("common",function(e){EasyBlog.require().script("media/navigation").view("media/recent.item","media/browser","media/browser.item-group","media/browser.item","media/browser.tree-item-group","media/browser.tree-item","media/browser.pagination-page","media/browser.uploader","media/browser.uploader.item","media/editor","media/editor.viewport","media/navigation.item","media/navigation.itemgroup").language("COM_EASYBLOG_MM_UNABLE_TO_FIND_EXPORTER","COM_EASYBLOG_MM_GETTING_IMAGE_SIZES","COM_EASYBLOG_MM_UNABLE_TO_RETRIEVE_VARIATIONS","COM_EASYBLOG_MM_ITEM_INSERTED","COM_EASYBLOG_MM_UPLOADING","COM_EASYBLOG_MM_UPLOADING_STATE","COM_EASYBLOG_MM_UPLOADING_PENDING","COM_EASYBLOG_MM_UPLOAD_COMPLETE","COM_EASYBLOG_MM_UPLOAD_PREPARING","COM_EASYBLOG_MM_UPLOAD_UNABLE_PARSE_RESPONSE","COM_EASYBLOG_MM_UPLOADING_LEFT","COM_EASYBLOG_MM_CONFIRM_DELETE_ITEM","COM_EASYBLOG_MM_CANCEL_BUTTON","COM_EASYBLOG_MM_YES_BUTTON","COM_EASYBLOG_MM_ITEM_DELETE_CONFIRMATION").stylesheet("media/style").done(function(){e.resolve()}).fail(function(){e.reject()})},n.options.debug.delayCommon),n.createAsset("uploader",function(t){e.when(n.getAsset("configuration"),n.getAsset("common"),EasyBlog.require().script("media/uploader").done()).done(function(){var e=n.createModal("uploader");o=e.controller=new EasyBlog.Controller.Media.Uploader(e.element,n.options.uploader),t.resolve()}).fail(function(){t.reject()})},n.options.debug.delayUploader),n.createAsset("browser",function(t){e.when(n.getAsset("configuration"),n.getAsset("common"),EasyBlog.require().script("media/browser").done()).done(function(){var e=n.createModal("browser");s=e.controller=new EasyBlog.Controller.Media.Browser(e.element,n.options.browser),t.resolve()}).fail(function(){t.reject()})},n.options.debug.delayBrowser),n.createAsset("editor",function(t){e.when(n.getAsset("browser"),EasyBlog.require().script("media/editor").done()).done(function(){var e=n.createModal("editor");e.controller=new EasyBlog.Controller.Media.Editor(e.element,n.options.editor),t.resolve()}).fail(function(){t.reject()})},n.options.debug.delayEditor),EasyBlog.require().library("throttle-debounce").done(function(){n.setLayout=e.debounce(200,n._setLayout)})},initialize:function(r){var i={controller:{media:n}},r=e.extend(!0,r,{browser:i,uploader:i,library:i,editor:i,exporter:i});n.update(r),u=r.directorySeparator;var s=e(n.options.ui);n.element.append(s.html()),s.remove(),n.overlay().css(n.options.overlay),n.loader=new EasyBlog.Controller.Media.Loader(n.createModal("loader"),{controller:{media:n}}),n.element.implement(EasyBlog.Controller.Media.Library,n.options.library,function(){}),n.element.implement(EasyBlog.Controller.Media.Exporter,n.options.exporter),t.resolve()},setLayout:function(){n._setLayout()},_setLayout:function(){return n.layout=n.element.hasClass("active")?e.uid():null,n.layout&&n.setModalLayout(),n.layout},modals:{},createModal:function(t){var r=n.modal("."+t+"Modal");return r.length<1&&(r=e('<div class="mediaModal"></div>').addClass(t+"Modal").appendTo(n.modalGroup())),n.modals[t]={name:t,element:r}},activateModal:function(e,t){if(n.modals[e]===undefined){n.loader.when(n.assets[e]).done(function(){setTimeout(function(){n.activateModal(e,t)},1e3)});return}if(n.currentModal===e)return!0;var r=n.modals[e];if(!r)return!1;n.deactivateModal(n.currentModal),n.currentModal=e,n.show();var i=r.controller;return i&&i.trigger("modalActivate",t),!0},deactivateModal:function(e,t){var r=n.modals[e];if(!r)return!1;var i=r.controller;if(i)try{i.trigger("modalDeactivate",t)}catch(s){console.error(s)}return r.element.removeClass("active"),n.currentModal=undefined,!0},setModalLayout:function(){clearTimeout(n.setModalLayout.task);var t=n.modals[n.currentModal];if(!t)return;if(!n.layout)return n._setLayout();t.element.addClass("active");var r=t.controller;if(r&&e.isFunction(r.setLayout)){var i=function(){var e=r.element.offset();e.top===0||e.left===0?n.setModalLayout.task=setTimeout(i,50):r.setLayout()};i()}},show:function(){n.element.addClass("active"),n._setLayout(),n.trigger("showModal")},hide:function(){n.element.removeClass("active"),n.deactivateModal(n.currentModal),n.trigger("hideModal")},"{overlay} click":function(){n.hide()},"{window} resize":function(){n.setLayout()},"{modalDashboardButton} click":function(e,t){if(t.shiftKey)return n.console("dir",[n]);n.hide()},upload:function(){n.activateModal("uploader",arguments)},browse:function(){n.activateModal("browser",arguments)},edit:function(){n.activateModal("editor",arguments)}}}),EasyBlog.Controller("Media.Loader",{defaultOptions:{}},function(t){return{init:function(){},when:function(){t.media.activateModal("loader");var n=e.when.apply(null,arguments),r=n.done;return n.id=e.uid(),n.done=function(e){r(function(){t.currentQueueId==n.id&&e&&e()})},t.currentQueueId=n.id,n},"{self} hide":function(){t.currentQueueId=null}}}),EasyBlog.Controller("Media.Prompt",{defaultOptions:{"{dialog}":".modalPromptDialog","{cancelButton}":".promptCancelButton"}},function(e){return{init:function(){},get:function(t){var n=e.dialog("."+t);return e.instantiate(n)},instantiate:function(t){var n={element:t,show:function(){return t.addClass("active"),e.element.addClass("active"),n},hide:function(){return t.removeClass("active"),e.element.removeClass("active"),n},state:function(e){var r=t.data("lastPromptState");if(e===undefined)return r;var i=function(e){return t.find(".promptState.state-"+e)},s=i(e),r=i(r);if(s.length<1)return;return r.removeClass("active"),s.addClass("active"),t.data("lastPromptState",e),n}};return n},hideAll:function(){e.dialog().removeClass("active"),e.element.removeClass("active")},"{cancelButton} click":function(){e.hideAll()}}}),EasyBlog.Controller("Media.Library",{defaultOptions:{places:[],place:{files:{},acl:{canCreateFolder:!1,canUploadItem:!1,canRenameItem:!1,canRemoveItem:!1,canCreateVariation:!1,canDeleteVariation:!1},populateImmediately:!1}}},function(t){return{init:function(){t.media.library=t,e.each(t.options.places,function(e,n){t.addPlace(n)})},places:{},getPlace:function(e){if(!e)return;if(e.acl)return e;if(typeof e=="string")return t.places[e.split("|")[0]]},addPlace:function(n){var n=t.places[n.id]=e.extend({tasks:e.Threads({threadLimit:1}),ready:e.Deferred(),baseFolder:function(){return t.getMeta(n.id+"|"+t.media.options.directorySeparator)}},t.options.place,n);n.done=n.ready.done,n.fail=n.ready.fail,n.always=n.ready.always;var r=function(t){if(e.isEmptyObject(t))return;if(typeof t=="string")try{t=e.evalJSON(t)}catch(n){}return typeof t=="object"?t:undefined};return n.files=r(n.files),n.files&&n.tasks.add(function(){t.importMeta(n.files),n.ready.resolve(n)}),n.populate=function(){return n.populate.task!==undefined?n.populate.task:(n.populate.task=e.Deferred(),n.populate[/jomsocial|flickr/.test(n.id)||n.files?"getFileTree":"getFolderTree"](),n.populate.task)},n.populate.getFolderTree=function(){return t.getRemoteMeta({place:n.id,foldersOnly:1}).done(function(e){n.tasks.add(function(){t.importMeta(e),n.ready.resolve(n)}),n.populate.getFileTree()}).fail(function(){n.populate.task.reject(n),delete n.populate.task,n.ready.reject(n)})},n.populate.getFileTree=function(){return t.getRemoteMeta({place:n.id}).done(function(e){n.tasks.add(function(){t.importMeta(e),n.ready.resolve(n),n.populate.task.resolve(n)})}).fail(function(){n.populate.task.reject(n),delete n.populate.task})},n.populateImmediately&&n.populate(),n},meta:{},metadata:{},isMeta:function(t){return t!==undefined&&!!e.isPlainObject(t)&&!e.isEmptyObject(t)},get:function(n){if(!t.meta.hasOwnProperty(n))return;var r=e.extend({},t.meta[n]);return r.data=t.metadata[n],r},getKey:function(e){return e?e.place+"|"+e.path:null},getParentKey:function(e){if(!e)return;var n=typeof e=="string"?e:e.key||t.getKey(e),r=n.indexOf(u),i=n.lastIndexOf(u);return i===n.length-1?undefined:n.substring(0,i+(r===i?1:0))},getMeta:function(e){if(!e)return;if(t.isMeta(e))return t.get(t.getKey(e))||e;if(typeof e=="string")return t.get(e)},getRemoteMeta:function(n){var r=e.Deferred();r.retry=0;var i={path:t.media.options.directorySeparator,retry:3,retryAfter:1e3,variation:0,foldersOnly:0},n=e.extend(i,n);if(n.place===undefined)return r.rejectWith(r,"Error: Place not given!");var s=function(){return r.loader=EasyBlog.ajax("site.views.media.getMeta",n,{success:function(e){r.resolveWith(r,arguments)},fail:function(){r.rejectWith(r,arguments)},error:function(){r.retry++,r.retry<n.retry?s():r.rejectWith(r,arguments)}}),arguments.callee}();return r},getMetaVariations:function(e){var e=t.getMeta(e);if(e===undefined)return;return t.getRemoteMeta({place:e.place,path:e.path,variation:1}).done(function(e){t.addMeta(e)})},removeMetaVariation:function(e,n){var e=t.getMeta(e);if(e===undefined)return;if(e.variations===undefined)return;var r;for(var i=0;i<e.variations.length;i++)if(e.variations[i].name===n){r=e.variations[i],e.variations.splice(i,1);break}return r},addMeta:function(n){var r=t.getKey(n),i=t.getMeta(r);if(i&&n.hash===i.hash)return i;n.key=r,n.hash=e.uid(),n.group=n.type=="folder"?"folders":"files",n.parentKey=t.getParentKey(n);var s=t.getPlace(n.place);n.friendlyPath=n.path===u?s.title:s.title+n.path.substring(n.path.indexOf(u),n.path.length),t.meta[r]=n;var o=n.data=t.metadata[r]||(t.metadata[r]=e.eventable({}));n.type=="folder"&&(o.files=o.files||{},o.folders=o.folders||{},o.views=o.views||t.createMetaView(n));if(!i){var a=t.getMeta(n.parentKey);a&&a.data.views.addMeta(n)}else setTimeout(function(){n.data.fire("updated",n)},0);return n},removeMeta:function(e){var e=t.getMeta(e);if(e===undefined)return;if(e.type==="folder"){var n=e.data.folders,r=e.data.files;for(key in n)t.removeMeta(key);for(key in r)t.removeMeta(key)}if(e.parentKey){var i=t.getMeta(e.parentKey);i&&i.data.views.removeMeta(e),delete t.meta[e.key],setTimeout(function(){e.data.fire("removed",e)},0)}return e},removeRemoteMeta:function(n){var r=e.Deferred(),n=t.getMeta(n);return n===undefined?r.rejectWith(r,"The file does not exist in the media library."):(r.loader=EasyBlog.ajax("site.views.media.delete",{place:n.place,path:n.path},{success:function(){t.removeMeta(n),r.resolveWith(r,[n])},fail:function(){r.rejectWith(r,arguments)},error:function(e,t){r.rejectWith(r,[t])}}),r)},createFolder:function(n,r){var i=e.Deferred(),n=t.getMeta(n),s=n.place;return n===undefined||n.type!=="folder"?i.rejectWith(i,"Parent folder was not found."):(i.loader=EasyBlog.ajax("site.views.media.createFolder",{place:s,path:n.path+u+r},{success:function(e){e.place=s;var e=t.addMeta(e);i.resolveWith(i,[e])},fail:function(){i.rejectWith(i,arguments)},error:function(e,t){i.rejectWith(i,[t])}}),i)},importMeta:function(e,n){if(e===undefined)return;if(e.type!=="folder")return;n===undefined&&(n=!0);var r=e.contents,i=r.length;delete e.contents,r.reverse();var s=t.addMeta(e),o=s.data,u={files:{},folders:{}},a=0;while(a<i){var e=t.addMeta(r[a]),f=e.key,l=e.group;u[l][f]=delete o[l][f],a++}for(f in o.files)t.removeMeta(f);for(f in o.folders)t.removeMeta(f);o.folders=u.folders,o.files=u.files;if(n)for(f in o.folders)t.importMeta(t.getMeta(f),n);return s},createMetaView:function(n){var r={meta:n,addMeta:function(e){for(mode in r.modes){var t=r.modes[mode][e.group];t&&t.add(e)}},removeMeta:function(e){for(mode in r.modes){var t=r.modes[mode][e.group];t&&t.remove(e)}},create:function(t){var n={from:0,to:1024,mode:"dateModified",group:"files"},i=e.Callbacks("unique memory");return e.extend(i,n,t,{uid:e.uid(),select:function(t){return e.extend(i,t),i.map&&delete i.map.monitors[i.uid],i.map=r.modes[i.mode][i.group],i.map.monitors[i.uid]=i,i.refresh()},updated:i.add,refresh:function(){return i.fire(i.map.slice(i.from,i.to))},destroy:function(){return i.disable(),i.map&&delete i.map.monitors[i.uid],i}}),i.select()}};return t.createViewModes(r),r},createViewModes:function(e){return e.modes={dateModified:{folders:t.createViewMap(e,!0),files:t.createViewMap(e)}},e},createViewMap:function(t,n){var r=e.extend([],{task:e.Threads({threadLimit:1}),affectedIndex:[],add:function(e){r.task.add(function(){r.unshift(e.key),r.affectedIndex.push(0),n&&r.sort().reverse(),r.refreshMonitor()})},remove:function(e){r.task.add(function(){var t=e.key,n=r.length,i;while(n--)if(r[n]===t){i=n;break}if(i===undefined)return;r.splice(n,1),r.affectedIndex.push(n),r.refreshMonitor()})},monitors:{},refreshMonitor:function(){clearTimeout(r.refreshMonitor.timer),r.refreshMonitor.timer=setTimeout(function(){var e=r.affectedIndex;r.affectedIndex=[],r.task.add(function(){var t=e.length,n=0;for(id in r.monitors){var i=r.monitors[id],s=i.from,o=i.to,n;for(n=0;n<t;n++){var u=e[n];if(u>=s||u<=o){i.refresh();break}}}})},250)}});return r},search:function(n){if(e.trim(n)==="")return[];var n=n.toLowerCase(),r=t.createMetaView({type:"search"});for(key in t.meta){var i=key.split("|"),s=i[0],o=i[1],u=t.meta[key];/jomsocial|flickr/.test(s)&&(o=u.title||""),o.toLowerCase().match(n)&&r.addMeta(u)}return r}}}),EasyBlog.Controller("Media.Exporter",{defaultOptions:{view:{recentItem:"media/recent.item"},"{recentActivities}":".recentActivities","{recentActivitiesDialog}":".recentActivities .modalPromptDialog","{hideRecentActivitiesButton}":".recentActivities .promptHideButton","{dashboardButton}":".recentActivities .dashboardButton","{recentItemGroup}":".recentItemGroup","{recentItem}":".recentItem"}},function(t){return{init:function(){r.exporter=t,r.insert=t.insert},handler:{},showDialog:function(){t.recentActivitiesDialog().addClass("active"),t.recentActivities().css({top:0,opacity:1}).addClass("active")},hideDialog:function(){t.recentActivities().animate({top:"-=50px",opacity:0},{duration:250,complete:function(){t.recentActivities().removeClass("active"),t.recentActivitiesDialog().removeClass("active")}})},"{dashboardButton} click":function(){t.hideDialog()},"{hideRecentActivitiesButton} click":function(){t.hideDialog()},insert:function(n,i){var s=r.library.getMeta(n);if(s===undefined)return;var o=t.create(s.type,s.key,i);return t.showDialog(),o.recentItem=t.view.recentItem({meta:s}).addClass("loading").css({opacity:0}).prependTo(t.recentItemGroup()).animate({opacity:1},{duration:500,complete:function(){o.done(function(n){n===""&&o.recentItem.removeClass("loading done").addClass("error").find(".itemProgress").html(e.language("COM_EASYBLOG_MM_UNABLE_TO_EXPORT_ITEM"));if(typeof tinyMCE!="undefined")if(tinyMCE&&tinyMCE.isIE&&r.IE==9){var i=r.bookmark;if(i){var s=tinyMCE.editors.write_content;s.selection.moveToBookmark({rng:i.range}),s.execCommand("mceInsertContent",!1,n)}else EasyBlog.dashboard.editor.insert(n)}else EasyBlog.dashboard.editor.insert(n);else EasyBlog.dashboard.editor.insert(n);o.recentItem.removeClass("loading failed").addClass("done").find(".itemProgress").html(e.language("COM_EASYBLOG_MM_ITEM_INSERTED")),r.options.recentActivities.hideAfter>0&&setTimeout(function(){t.hideDialog()},r.options.recentActivities.hideAfter)}).progress(function(e){if(o.recentItem.hasClass("done"))return;o.recentItem.find(".itemProgress").html(e)}).fail(function(e){o.recentItem.removeClass("loading done").addClass("error").find(".itemProgress").html(e)})}}),o},create:function(n,r,i){var s=t.handler[n],o=e.Deferred();if(s===undefined){var u=EasyBlog.Controller.Media.Exporter[e.String.capitalize(n)];if(u===undefined)return o.reject(e.language("COM_EASYBLOG_MM_UNABLE_TO_FIND_EXPORTER")),o;s=t.handler[n]=new u(t.element,e.extend({},{settings:t.options[n],controller:{media:t.media}}))}return s.create(o,r,i),o}}}),EasyBlog.Controller("Media.Exporter.File",{defaultOptions:{settings:{title:"",target:"_self",content:""}}},function(t){return{init:function(){},create:function(n,r,i){var s=e.extend({},t.options.settings,i),o=t.media.library.getMeta(r),u=e(document.createElement("A")).attr({title:s.title,target:s.target,href:o.url}).html(s.content?s.content:o.title);return n.resolve(u.toHTML()),n}}}),EasyBlog.Controller("Media.Exporter.Folder",{defaultOptions:{settings:{}}},function(t){return{init:function(){},create:function(n,r,i){var s=e.extend({},t.options.settings,i),o=t.media.library.getMeta(r),u=o.place=="jomsocial"?"album":"gallery";s.file=o.path,s.place=o.place;var a="[embed="+u+"]"+e.toJSON(s)+"[/embed]";return n.resolve(a),n}}}),EasyBlog.Controller("Media.Exporter.Image",{defaultOptions:{settings:{zoom:null,caption:null,enforceDimension:!1,enforceWidth:null,enforceHeight:null,variation:null,defaultVariation:"thumbnail",defaultZoom:"original"}}},function(t){return{init:function(){},create:function(r,i,s){var o=e.extend({},t.options.settings,s),u=t.media.library.getMeta(i),a=e(new Image),f=n(u.title);a.attr({src:u.thumbnail.url,alt:f,title:f});var l=function(){r.resolve(a.toHTML())},c=function(){var t={};e.each(u.variations,function(e,n){t[n.name]=n});var r=t[o.variation]||t[o.defaultVariation]||u.variations[0],i=n(r.title);a.attr({src:r.url,alt:i,title:i});if(o.enforceDimension&&o.enforceWidth!==null&&o.enforceHeight!==null){var s=e.Image.resizeWithin(r.width,r.height,o.enforceWidth,o.enforceHeight);s.width=Math.floor(s.width),s.height=Math.floor(s.height),a.attr(s)}if(o.caption!==null){var f=n(o.caption);a.addClass("easyblog-image-caption").attr("title",f)}if(o.zoom!==null){var c=t[o.zoom]||t[o.defaultZoom]||{url:u.thumbnail.url,title:u.title},i=n(o.caption||c.title||"");a=e("<a>").addClass("easyblog-thumb-preview").attr({href:c.url,title:i}).html(a)}l()};return o.variation||o.zoom||o.enforceWidth||o.enforceHeight?u.variations===undefined?(r.notify(e.language("COM_EASYBLOG_MM_GETTING_IMAGE_SIZES")),t.media.library.getMetaVariations(i).done(function(e){u=e,c()}).fail(function(){r.reject(e.language("COM_EASYBLOG_MM_UNABLE_TO_RETRIEVE_VARIATIONS"))})):c():l(),r}}}),EasyBlog.Controller("Media.Exporter.Audio",{defaultOptions:{width:400,height:24,autostart:!1,controlbar:"bottom",backcolor:"#333333",frontcolor:"#ffffff"}},function(t){return{init:function(){},create:function(n,r,i){var s=e.extend({},t.options.settings,i),o=t.media.library.getMeta(r);s.file=o.path,s.place=o.place;var u="[embed=audio]"+e.toJSON(s)+"[/embed]";return n.resolve(u),n}}}),EasyBlog.Controller("Media.Exporter.Video",{defaultOptions:{settings:{width:400,height:225,autostart:!1,controlbar:"bottom",backcolor:"#333333",frontcolor:"#ffffff"}}},function(t){return{init:function(){},create:function(n,r,i){var s=e.extend({},t.options.settings,i),o=t.media.library.getMeta(r);s.file=o.path,s.place=o.place;var u="[embed=video]"+e.toJSON(s)+"[/embed]";return n.resolve(u),n}}}),EasyBlog.Controller("MediaLauncher",{defaultOptions:{"{uploadImageButton}":".uploadImageButton","{chooseImageButton}":".chooseImageButton"}},function(t){return{init:function(){e("#media_manager_button").click(function(){EasyBlog.mediaManager.browse()})},"{uploadImageButton} click":function(){EasyBlog.mediaManager.upload()},"{chooseImageButton} click":function(){EasyBlog.mediaManager.browse()}}});var a=e(document.createElement("div")).attr("id","EasyBlogMediaManager").appendTo("body");EasyBlog.mediaManager=new EasyBlog.Controller.Media(a)});