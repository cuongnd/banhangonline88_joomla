var SB=SB||{};SB.Request=new Class({Extends:Request.JSON,initialize:function(a){var b={url:"index.php?option=com_socialbacklinks&format=raw",method:"post",object:null,block:null,parent:null,ajax_loader:".ajax-loader",ajax_overlay:".ajax-overlay",error_block:".error-block",ajax_error_msg:null,callback:null,onRequest:function(){if(this.options.success_block){this.options.success_block.get("tween").stop();this.options.success_block.setStyle("opacity",0)}this.options.block.getElement(this.options.ajax_loader).setStyle("display","block");this.options.block.getElement(this.options.ajax_overlay).setStyle("display","block")},onSuccess:function(d,c){this.options.block.getElement(this.options.ajax_loader).setStyle("display","none");this.options.block.getElement(this.options.ajax_overlay).setStyle("display","none");if(d.error){this.options.object.addClass("error");this.options.parent.getElement(this.options.error_block).set("html",d.msg).setStyle("display","block")}else{this.options.object.removeClass("error");this.options.parent.getElement(this.options.error_block).set("html","").setStyle("display","none");if(this.options.show_success_msg&&this.options.success_block&&this.options.ajax_success_msg){this.options.show_success_msg(this.options.success_block,this.options.ajax_success_msg)}if(this.options.callback!=null){this.options.callback(this.options.object,d,this.options.data)}}},onFailure:function(c){this.options.parent.getElement(this.options.error_block).set("html",this.options.ajax_error_msg).setStyle("display","block");this.options.block.getElement(this.options.ajax_loader).setStyle("display","none");this.options.block.getElement(this.options.ajax_overlay).setStyle("display","none")}};if(a.onRequest){b.onRequest=a.onRequest}if(a.onSuccess){b.onSuccess=a.onSuccess}if(a.onFailure){b.onFailure=a.onFailure}this.setOptions(b);this.parent(a)}});SB.Base=new Class({Implements:[Options],closeLightbox:function(){parent.SqueezeBox.close()},changeOnOff:function(a,b){if(a.hasClass("on-button")){a.get("tween").addEvent("complete",function(){a.removeClass("on-button");a.addClass("off-button")});a.tween("left",-30)}else{a.get("tween").addEvent("complete",function(){a.removeClass("off-button");a.addClass("on-button")});a.tween("left",0)}},showSuccessMsg:function(a,b){a.set("text",b);a.tween("opacity",1);setTimeout(function(){a.tween("opacity",0)},2000)}});SB.Dashboard=new Class({Implements:[SB.Base],options:{wrapper:null,header:null,toggle_button:".toggle-button",content_block:".content-block",single_block:null,social_wrapper:"social-wrapper",social_block:".social-block",social_connect:null,config_on_off:".config-on-off",social_on_off:".social-on-off",icon_wrapper:".icon-wrapper",social_logout:".logout",social_config:".config",social_info:".information",error_block:".error-block",success_block:".success-block",ajax_error_msg:null,ajax_success_msg:null,ajax_loader:".ajax-loader",ajax_overlay:".ajax-overlay"},initialize:function(a){this.setOptions(a);this.initBlockToggle();this.deleteLastBorder();this.initSyncUpdateCheck();this.initConfigOnOff();this.initSocialOnOff();this.initSocialConnect();this.initSocialConfig()},initBlockToggle:function(){var a=this;$$(this.options.header).addEvent("click",function(){var b=document.id(this).getParent(a.options.wrapper).getElement(a.options.toggle_button);b.toggleClass("close");var c=document.id(this).getParent(a.options.wrapper).getElement(a.options.content_block).slide("toggle");var d=Cookie.write("sb_"+c.get("id"),parseInt(c.getStyle("margin")),{duration:30})});$$(this.options.header).each(function(d,b){var c=d.getParent(a.options.wrapper).getElement(a.options.content_block);var e=Cookie.read("sb_"+c.get("id"));if((e==0)){d.getParent(a.options.wrapper).getElement(a.options.toggle_button).addClass("close");c.slide("toggle")}})},deleteLastBorder:function(){var b=this;$$(this.options.content_block).each(function(e,c){var d=document.id(e).getElements(b.options.single_block);d.getLast().addClass("last-block")});var a=$$(this.options.social_block);a.getLast().addClass("last-block")},initSyncUpdateCheck:function(){var b=this;var a=setInterval(function(){b.checkHistoryUpdate()},5000)},checkHistoryUpdate:function(){var a=Cookie.read("sb_history");var b=new SB.Request({data:{view:"histories",task:"checkhistoryupdate",last_id:a},onRequest:function(){},onFailure:function(){},onSuccess:function(f){var c=document.id("statistics").getElement(".ajax-loader");var d=document.id("statistics").getElement(".update-time");var h=document.id("statistics").getElement(".text-wrapper");if(f.update_sync_date){d.get("tween").addEvent("complete",function(){d.getElement(".day").set("text",f.last_sync.day);d.getElement(".date").set("text",f.last_sync.date);d.getElement(".time").set("text",f.last_sync.time);d.fade("in")});d.tween("opacity",0)}if(f.updated){var g=Cookie.write("sb_history",f.last_id);var e=new Fx.Tween(h);e.addEvents({start:function(){c.setStyle("display","block")},complete:function(){h.set("html",f.html);h.fade("in");c.setStyle("display","none")}});e.start("opacity",1,0)}}}).send()},initConfigOnOff:function(){var a=this;$$(this.options.config_on_off).addEvent("click",function(){var d=this.getElement("*").get("text");var c=this.hasClass("off-button")+0;var b=JSON.decode("{ value: "+c+", "+d+" }");var f={object:this,block:this.getParent(a.options.single_block),parent:this.getParent(a.options.wrapper),success_block:this.getParent(a.options.single_block).getElement(a.options.success_block),ajax_error_msg:a.options.ajax_error_msg,ajax_success_msg:a.options.ajax_success_msg,show_success_msg:a.showSuccessMsg,callback:a.changeOnOff};var e=new SB.Request({data:b}).setOptions(f).send()})},initSocialOnOff:function(){var _this=this;$$(this.options.social_on_off).addEvent("click",function(){var social=this.get("id");if(this.hasClass("off-button")&&(document.id(social+"-disconnect").getStyle("display")=="none")){document.id(social+"-connect").getElement("a").fireEvent("click")}else{var param_str="{ "+this.getElement("*").get("text")+", 'value': '"+(this.hasClass("off-button")+0)+"' }";var ajax_param=eval("("+param_str+")");var request_option={object:this,block:this.getParent(_this.options.social_block),parent:this.getParent(_this.options.wrapper),success_block:this.getParent(_this.options.social_block).getElement(_this.options.success_block),ajax_error_msg:_this.options.ajax_error_msg,ajax_success_msg:_this.options.ajax_success_msg,show_success_msg:_this.showSuccessMsg,callback:_this.changeSocialOnOff};var sbRequest=new SB.Request({data:ajax_param}).setOptions(request_option).send()}})},changeSocialOnOff:function(a,b){a.set("tween",{duration:500});if(a.hasClass("on-button")){if(a.get("id")){document.id(a.get("id")+"-icon").addClass("off")}a.get("tween").addEvent("complete",function(){a.removeClass("on-button");a.addClass("off-button")});a.tween("left",-30)}else{if(a.get("id")){document.id(a.get("id")+"-icon").removeClass("off")}a.get("tween").addEvent("complete",function(){a.removeClass("off-button");a.addClass("on-button")});a.tween("left",0)}},initSocialConnect:function(){var a=this;document.id(this.options.social_wrapper).getElements(this.options.social_connect).addEvent("click",function(){var b=600;var e=600;var c=this.get("href");var d=this.getParent().get("id");if(d=="facebook-connect"){b=450;e=400}else{if(d=="twitter-connect"){b=630;e=600}else{if(d=="linkedin-connect"){b=240;e=450}}}window.open(c,"popup","height="+b+",width="+e+",location=0,menubar=0,scrollbars=0,status=0,titlebar=0,toolbar=0")})},initSocialConfig:function(){var a=this;document.id(this.options.social_wrapper).getElements(this.options.social_block).addEvents({mouseenter:function(){this.getElement(a.options.social_logout).fade("in");this.getElement(a.options.social_config).fade("in");this.getElement(a.options.social_info).fade("in")},mouseleave:function(){this.getElement(a.options.social_logout).fade("out");this.getElement(a.options.social_config).fade("out");this.getElement(a.options.social_info).fade("out")}})}});SB.Content=new Class({Implements:[SB.Base],options:{wrapper:null,single_block:null,overlay_text:".overlay-text",content_body:"content-body",categories_body:"categories-body",save_button:".save-button",selected_content:".selected_content",row_id:".row-id",delete_row_button:".delete-row-button",delete_msg:null,ajax_error_msg:null,ajax_success_msg:null,success_block:".success-block",error_block:".error-block",ajax_loader:".ajax-loader",ajax_overlay:".ajax-overlay",block_fx:null},initialize:function(a){this.setOptions(a);this.initSelectItems();this.initSaveButton();this.initSelectArticlesButton();this.initDeleteRowButton();this.initCheckSelectedCategories();this.initRowChecked()},initSelectItems:function(){this.checkSelectItems();var a=this;document.getElements(this.options.selected_content).addEvent("click",function(){a.checkSelectItems()})},checkSelectItems:function(){if($$("input[name=selected_content]:checked").length==0){return true}if(this.options.block_fx){this.options.block_fx.stop()}if($$("input[name=selected_content]:checked")[0].getProperty("value")==0){var b=this;this.options.block_fx=new Fx.Tween(document.id(this.options.content_body),{property:"opacity",duration:200});this.options.block_fx.start(0).chain(function(){this.element.setStyle("display","none");var c=document.id(b.options.content_body).getParent().getElement(b.options.overlay_text);c.setStyle("display","block");b.options.block_fx=new Fx.Tween(c,{property:"opacity",duration:200});b.options.block_fx.start(1)})}else{var b=this;var a=document.id(b.options.content_body).getParent().getElement(b.options.overlay_text);this.options.block_fx=new Fx.Tween(a,{property:"opacity",duration:200});this.options.block_fx.start(0).chain(function(){this.element.setStyle("display","none");document.id(b.options.content_body).setStyle("display","block");b.options.block_fx=new Fx.Tween(document.id(b.options.content_body),{property:"opacity",duration:200});b.options.block_fx.start(1)})}},initSaveButton:function(){var a=this;document.getElement(this.options.save_button).addEvent("click",function(){a.submitForm()})},initSelectArticlesButton:function(){var a=this;document.id("articles-body").getElement(".select-button").addEvent("click",function(){setTimeout(function(){if(document.getElements("iframe")&&document.getElement("iframe").contentWindow.document.getElement(".contentpane")){var c=window.document.getElement("iframe").contentWindow.document;var b=c.createElement("div");document.id(b).set("text",a.options.articles_lightbox_title);document.id(b).set("class","header-text");document.id(b).setStyles({color:"#363636","font-size":"1.8em","font-weight":"bolder",margin:"0 0 5px",opacity:0});document.id(b).inject(document.id(c).getElement(".contentpane"),"top");document.id(b).set("tween",{duration:"long"});document.id(b).tween("opacity",1)}},2000)})},initDeleteRowButton:function(){var a=this;$$(this.options.delete_row_button).addEvent("click",function(){var b=this.getParent("tr").getElement(a.options.row_id).get("text").toInt();a.deleteRow(b)})},deleteRow:function(d){var c=this;if(window.confirm(this.options.delete_msg)){var b=document.id("row-"+d);var a=new Fx.Tween(b);a.addEvent("complete",function(){if(b.getParent("tbody").getElements("tr").length==1){var f=new Element("td",{colspan:7,align:"center",text:c.options.empty_table_msg});var e=new Element("tr",{styles:{opacity:"0"}});e.grab(f);e.inject(b,"after").fade("in")}b.dispose()});a.start("opacity",1,0)}},initCheckSelectedCategories:function(){this.checkElements();var a=this;$$("input[type=checkbox]").addEvent("click",function(){this.removeClass("not-all");if(this.checked){var d=/level-(\d+)/;var f=d.exec(this.get("class"));if((f!=null)&&f[1]){var e=this.get("id");$$("input[type=checkbox]").filter(".parent-"+e).filter(".level-"+(f[1].toInt()+1)).set("checked","checked")}}else{var d=/level-(\d+)/;var b=/parent-(\d+)/;var f=d.exec(this.get("class"));if((f!=null)&&f[1]){var e=this.get("id");$$("input[type=checkbox]").filter(".parent-"+e).filter(".level-"+(f[1].toInt()+1)).set("checked","");var c=b.exec(this.get("class"));if((c!=null)&&c[1]){$$("input[type=checkbox]").filter(".parent-"+e).filter(".level-"+(f[1].toInt()-1)).addClass("not-all")}}}a.checkElements()})},checkElements:function(){var a=$$("input[type=checkbox]");a.each(function(f,c){var g=/level-(\d+)/;var j=f.get("id");var h=g.exec(f.get("class"));if(h[1]==undefined){return true}var b=$$("input[type=checkbox").filter(function(k,i){return(k.hasClass("parent-"+j)&&k.hasClass("level-"+(h[1].toInt()+1)))});if(b.length==0){return true}var e=0;var d=0;b.each(function(k,i){if(k.checked){e++}else{d++}});if(d==b.length){f.set("checked","").removeClass("not-all")}else{if(e==b.length){f.set("checked","checked").removeClass("not-all")}else{f.set("checked","checked").addClass("not-all")}}})},initRowChecked:function(){document.id(this.options.categories_body).getElement("tbody").getElements("tr").addEvent("click",function(a){if(a.target.tagName.toLowerCase()=="input"){return true}var b=document.id(this).getElement("input[type=checkbox]");if(b){if(b.checked){b.setProperty("checked","")}else{b.setProperty("checked","checked")}b.fireEvent("click")}})},addArticle:function(a,c){var b=document.id(a).getParent(this.options.wrapper);var e={object:a,block:b,parent:b,base:this,ajax_error_msg:this.options.ajax_error_msg,callback:this.addRow};var d=new SB.Request({data:c,onSuccess:function(f){if(f.error){this.options.parent.getElement(this.options.error_block).set("text",f.msg).setStyle("display","block")}else{this.options.callback(f.article,this.options.base);this.options.parent.getElement(this.options.error_block).set("text","").setStyle("display","none")}this.options.parent.getElement(this.options.ajax_loader).setStyle("display","none");this.options.parent.getElement(this.options.ajax_overlay).setStyle("display","none")}}).setOptions(e).send()},addRow:function(i,d){var l=d;var k=document.id("articles-body").getElement(".adminlist").getElement("tbody");var h=new Element("td",{text:i.title});var g=new Element("td",{text:i.section_name});var f=new Element("td",{text:i.cctitle});var e=new Element("td",{text:i.author});var c=new Element("td",{text:i.created});var b=new Element("td",{"class":l.options.row_id.substr(1),text:i.id});var a=new Element("td",{align:"center"});var m=new Element("div",{"class":l.options.delete_row_button.substr(1),events:{click:function(){l.deleteRow(i.id)}}});a.grab(m);if(k.getElements("tr").getLast().hasClass("row0")){var j="row1"}else{var j="row0"}var n=new Element("tr",{id:"row-"+i.id,"class":j});n.grab(h).grab(g).grab(f).grab(e).grab(c).grab(b).grab(a);if((k.getChildren().length==1)&&(k.getElement("td").getProperty("colspan")>1)){k.set("html","");k.grab(n)}else{k.grab(n)}},submitForm:function(){if($$("input[name=selected_content]:checked").length==0){var d=0}else{var d=$$("input[name=selected_content]:checked")[0].getProperty("value")}var f=Array();document.id("articles-body").getElements("td.row-id").each(function(h,g){var i=parseInt(h.get("text"));if(i!=0){f.include(i)}});if(f.length==0){f.include(-1)}var b=Array();var a=$$("input[name=categories]:checked");for(var c=0;c<a.length;c++){b[c]=a[c].value}if(b.length==0){b.include(-1)}var e={selected_content:d,category:b,article:f};this.saveContent(e)},saveContent:function(c){var a=document.id("selected_content0");var b={view:"config",task:"edit",section:"content",name:"selected_content",value:c.selected_content,status_msg:this.options.status_msg};var e={object:a,block:a.getParent(this.options.single_block),parent:a.getParent(this.options.wrapper),ajax_error_msg:this.options.ajax_error_msg,callback:this.updateStatusText};var d=new SB.Request({data:b}).setOptions(e).send();delete c.selected_content;b={view:"item",task:"edit",value:c};e.callback=this.closeLightbox;e.success_block=parent.document.id("joomla-config").getElement(this.options.success_block);e.ajax_success_msg=this.options.ajax_success_msg;e.show_success_msg=window.parent.showSuccessMsg;d=new SB.Request({data:b}).setOptions(e).send()},updateStatusText:function(b,d,a){var e=parent.document.id("joomla-config").getElement(".block").getElement(".text-block");if(e){var c=new Fx.Tween(e,{property:"opacity"});c.start(0).chain(function(){if(a.status_msg[a.value]){e.set("text",a.status_msg[a.value])}else{e.set("text","")}e.fade("in")})}}});SB.Config=new Class({Implements:[SB.Base],options:{parent_block:null,hidden_block:".hidden-block",single_block:null,save_button:".save-button",config_on_off:".config-on-off",ajax_error_msg:null,ajax_success_msg:null,error_block:".error-block",success_block:".success-block",ajax_loader:".ajax-loader",ajax_overlay:".ajax-overlay"},initialize:function(a){this.setOptions(a);this.initSaveButton();this.initSyncOnOff();this.initChangeEmailType();this.initShortURLOnOff();this.initChangeCleanHistoryStatus()},initSaveButton:function(){var a=this;document.id("configuration").getElement(this.options.save_button).addEvent("click",function(){a.submitForm()})},initSyncOnOff:function(){var a=this;document.id("socialbacklinkssynchronizer").addEvent("click",function(){var c=this;if(this.hasClass("on-button")){var b=this.getParent(a.options.parent_block).getElement(a.options.hidden_block);b.get("tween").removeEvents("complete").addEvent("complete",function(){b.setStyle("display","none");document.id("configuration").getElement("input[name="+c.get("id")+"]").set("value",0);a.changeOnOff(c)});b.tween("opacity",0)}else{var b=this.getParent(a.options.parent_block).getElement(a.options.hidden_block);b.get("tween").removeEvents("complete").addEvent("complete",function(){document.id("configuration").getElement("input[name="+c.get("id")+"]").set("value",1);a.changeOnOff(c)});b.setStyle("display","block").tween("opacity",1)}})},initChangeEmailType:function(){var a=this;document.id("configuration").getElements(".errors_recipient_type").addEvent("click",function(){var c=this.getElement("input");if(!c||(c.get("type")!="radio")){return true}if(c.get("value")==1){var b=c.getParent(a.options.single_block).getNext(a.options.hidden_block);b.get("tween").removeEvents("complete");b.setStyle("display","block").tween("opacity",1)}else{var b=c.getParent(a.options.single_block).getNext(a.options.hidden_block);b.get("tween").removeEvents("complete").addEvent("complete",function(){b.setStyle("display","none")});b.tween("opacity",0)}})},initShortURLOnOff:function(){var a=this;document.id("socialbacklinksshorturl").addEvent("click",function(){if(this.hasClass("on-button")){document.id("configuration").getElement("input[name="+this.get("id")+"]").set("value",0);a.changeOnOff(this)}else{document.id("configuration").getElement("input[name="+this.get("id")+"]").set("value",1);a.changeOnOff(this)}})},initChangeCleanHistoryStatus:function(){var a=this;document.id("configuration").getElements(".clean_history").addEvent("click",function(){var c=this.getElement("input");if(!c||(c.get("type")!="radio")){return true}if(c.get("value")==1){var b=c.getParent(a.options.single_block).getNext(a.options.hidden_block);b.get("tween").removeEvents("complete");b.setStyle("display","block").tween("opacity",1)}else{var b=c.getParent(a.options.single_block).getNext(a.options.hidden_block);b.get("tween").removeEvents("complete").addEvent("complete",function(){b.setStyle("display","none")});b.tween("opacity",0)}})},submitForm:function(){var d={};var a,c;if($$("input").length>0){$$("input").each(function(f){if(Array("checkbox","radio").indexOf(f.get("type"))==-1){a=f.get("name");c=f.get("value");d[a]=c}})}if($$("input:checked").length>0){$$("input:checked").each(function(f){a=f.get("name");c=f.get("value");d[a]=c})}var e={};var b;for(b in d){if(Array("option","task","view").indexOf(b)==-1){e[b]=d[b];delete d[b]}}d.cid=e;this.saveConfig(d)},saveConfig:function(b){var a=document.id("configuration");var d={object:a.getElement("table"),block:a,parent:a,success_block:parent.document.id("settings").getElement(this.options.success_block),ajax_error_msg:this.options.ajax_error_msg,ajax_success_msg:this.options.ajax_success_msg,show_success_msg:window.parent.showSuccessMsg,callback:this.updateStatusText};var c=new SB.Request({data:b}).setOptions(d).send()},updateStatusText:function(a,c){var d=parent.document.id("settings").getElement(".block").getElement(".text-block");if(d){var b=new Fx.Tween(d,{property:"opacity"});b.start(0).chain(function(){if(c.msg){d.set("html",c.msg)}else{d.set("text","")}d.fade("in")})}parent.SqueezeBox.close()}});SB.Synchronization=new Class({Implements:[SB.Base],options:{wrapper:null,content_block:".content-block",single_block:null,error_block:".error-block",ajax_error_msg:null,ajax_loader:".ajax-loader",ajax_overlay:".ajax-overlay"},initialize:function(a){this.setOptions(a)},startSynchronization:function(a,b,e){var d={object:a,block:a.getParent(this.options.single_block),parent:a.getParent(this.options.wrapper),ajax_error_msg:this.options.ajax_error_msg,callback:e};var c=new SB.Request({data:b}).setOptions(d).send()},checkProgress:function(a,b,e){var d={object:a,callback:e};var c=new SB.Request({data:b,onRequest:function(){},onFailure:function(){},onSuccess:function(f){if(this.options.callback!=null){this.options.callback(this.options.object,f)}}}).setOptions(d).send()},updateProgressBar:function(a,d){if(d&&d.sync_status){var c=a.getParent().getStyle("width");c=parseInt(c);a.getParent().getElement(".progress-text").set("text",parseInt(d.sync_status*100)+"%");var b=c*d.sync_status;a.tween("width",b+"px")}},showSyncResult:function(b,c){clearTimeout(parent.sync_check_interval);var a=b.getParent("body");a.setStyle("opacity","0");a.set("html",c.html);a.fade("in")}});SB.Errors=new Class({Implements:[SB.Base],options:{wrapper:null,sync_all_button:".sync-all-button",delete_button:".delete-button",disabled_button:".disabled",no_item_error_msg:null,empty_table_msg:null,error_block:".error-block",ajax_error_msg:null,ajax_loader:".ajax-loader",ajax_overlay:".ajax-overlay"},initialize:function(a){this.setOptions(a);this.initSyncAllButton();this.initDeleteButton();this.initRowChecked()},initSyncAllButton:function(){$$(this.options.sync_all_button).addEvent("click",function(){var a=window.parent.document.getElementById("synchronization");var b=window.parent.document.id(a).getElement(".modal");b.fireEvent("click",b)})},initDeleteButton:function(){var a=this;$$(this.options.delete_button).addEvent("click",function(){if(this.hasClass(a.options.disabled_button.substring(1))){return true}if($$("input[name=boxchecked]")[0].getProperty("value")==0){alert(a.options.no_item_error_msg);return true}var b=Array();var c=$$("input[type=checkbox]:checked");c.each(function(e,d){b.include(e.value)});a.deleteErrors(this,b)})},initRowChecked:function(){document.getElement("tbody").getElements("tr").addEvent("click",function(a){if(a.target.tagName.toLowerCase()=="input"){return true}var b=this.getElement("input[type=checkbox]");if(b!=null){if(b.checked){b.setProperty("checked","")}else{b.setProperty("checked","checked")}Joomla.isChecked(b.checked)}})},deleteErrors:function(a,c){var b={view:"errors",task:"remove",errors_id:c,empty_table_msg:this.options.empty_table_msg,buttons:{sync_all_button:this.options.sync_all_button,delete_button:this.options.delete_button,disabled_button:this.options.disabled_button}};var e={object:a,block:a.getParent(this.options.wrapper),parent:a.getParent(this.options.wrapper),ajax_error_msg:this.options.ajax_error_msg,callback:this.removeRows};var d=new SB.Request({data:b}).setOptions(e).send()},removeRows:function(c,e,b){var d=b.errors_id;if(!d.length){return true}var a=document.id("errors").getElement("tbody");if(a){var f=this;d.each(function(h){var g=a.getElement("#row-"+h);g.get("tween").addEvent("complete",function(){if(g.getParent("tbody").getElements("tr").length==1){var j=new Element("td",{colspan:6,align:"center",text:b.empty_table_msg});var i=new Element("tr",{styles:{opacity:"0"}});i.grab(j);i.inject(g,"after").fade("in");if(b.buttons){if(b.buttons.sync_all_button){document.id("errors").getElement(b.buttons.sync_all_button).fade("out")}if(b.buttons.delete_button&&b.buttons.disabled_button){document.id("errors").getElement(b.buttons.delete_button).removeEvents("click").addClass(b.buttons.disabled_button.substring(1))}}}g.dispose()});g.tween("opacity",0)})}}});SB.Network=new Class({Implements:[SB.Base],options:{type:null,task:null,error:null},initialize:function(b){this.setOptions(b);var d=this;if((this.options.task=="connect")&&(this.options.error==0)){document.id(window.opener.document.getElementById(this.options.type+"-disconnect")).removeClass("disabled");var a=window.opener.document.getElementById(this.options.type);if((a!=null)&&a.hasClass("off-button")){a.fireEvent("click")}var c=setTimeout("window.close()",2000)}else{if((this.options.task=="disconnect")&&(this.options.error==0)){document.id(window.parent.document.getElementById(this.options.type+"-disconnect")).addClass("disabled");var a=window.parent.document.getElementById(this.options.type);if((a!=null)&&a.hasClass("on-button")){a.fireEvent("click")}var c=setTimeout(function(){d.closeLightbox()},2000)}}}});SB.SocialConfig=new Class({Implements:[SB.Base],options:{wrapper:null,save_button:".save-button",fields:null,section:null,no_value_error_msg:null,ajax_error_msg:null,ajax_success_msg:null,error_block:".error-block",success_block:".success-block",ajax_loader:".ajax-loader",ajax_overlay:".ajax-overlay"},initialize:function(a){this.setOptions(a);this.initSaveButton()},initSaveButton:function(){var a=this;document.getElement(this.options.save_button).addEvent("click",function(){a.submitForm()})},submitForm:function(){$$(this.options.error_block).set("text","").setStyle("display","none");$$("input").removeClass("error");var b=true;var g=this;this.options.fields.each(function(j,i){var h=$$("input[name="+j+"]");if((h.length>0)&&(h[0].getProperty("value")=="")){h.addClass("error");$$(g.options.error_block).set("text",g.options.no_value_error_msg).setStyle("display","block");b=false}});if(!b){return true}var f={};this.options.fields.each(function(j,i){var h=$$("input[name="+j+"]");if(h.length>0){if((h[0].get("type")=="radio")||(h[0].get("type")=="checkbox")){h=$$("input[name="+j+"]:checked")}f[j]=h[0].get("value")}});var c={view:"config",task:"save",section:this.options.section,cid:f};var a=document.getElement(".account-settings-wrapper").getElement("input");var e={object:a,block:a.getParent(g.options.single_block),parent:a.getParent(g.options.wrapper),success_block:parent.document.id("social-wrapper").getElement("."+this.options.section).getElement(this.options.success_block),ajax_error_msg:this.options.ajax_error_msg,ajax_success_msg:this.options.ajax_success_msg,show_success_msg:window.parent.showSuccessMsg,callback:this.closeLightbox};var d=new SB.Request({data:c}).setOptions(e).send()}});