EasyDiscuss.module("post",function(a){var b=this;EasyDiscuss.require().language("COM_EASYDISCUSS_FAVOURITES","COM_EASYDISCUSS_UNFAVOURITE").done(function(){EasyDiscuss.Controller("DiscussPost",{defaultOptions:{postId:null,likeId:null,themeName:null,"{likeButton}":".likeBtn","{likeButtonResp}":".likeBtnResp","{unlikeButton}":".unlikeBtn","{unlikeButtonResp}":".unlikeBtnResp","{favouriteButton}":".favouriteBtn","{favouriteButtonResp}":".favBtnResp"}},function(b){return{init:function(){},"{likeButton} click":function(){b.options.themeName="default";var a=b.options.postId,c="1",d="0";b.likes(a,c,d)},"{likeButtonResp} click":function(){b.options.themeName="responsive";var a=b.options.postId,c="1",d="0";b.likes(a,c,d)},"{unlikeButton} click":function(){b.options.themeName="default";var a=b.options.postId,c="0",d=b.options.likeId;b.likes(a,c,d)},"{unlikeButtonResp} click":function(){b.options.themeName="responsive";var a=b.options.postId,c="0",d=b.options.likeId;b.likes(a,c,d)},"{favouriteButton} click":function(){b.options.themeName="default",b.isFav()},"{favouriteButtonResp} click":function(){b.options.themeName="responsive",b.isFav()},likes:function(c,d,e){EasyDiscuss.ajax("site.views.post.ajaxLikes",{args:[c,d,e]},{success:function(d){var e="#likes-container-"+c;d.status=="1"?(b.options.likeId=d.id,b.options.themeName=="default"&&(a("#likeBtn").hide(),a("#unlikeBtn").show(),a("#likeText").show()),b.options.themeName=="responsive"&&(a("#likeBtnResp").hide(),a("#unlikeBtnResp").show(),a("#likeTextResp").show())):(b.options.themeName=="default"&&(a("#unlikeBtn").hide(),a("#likeBtn").show(),a("#likeText").hide()),b.options.themeName=="responsive"&&(a("#unlikeBtnResp").hide(),a("#likeBtnResp").show(),a("#likeTextResp").hide()),a(e).hide())}})},isFav:function(){EasyDiscuss.ajax("site.views.post.ajaxIsFav",{args:[b.options.postId]},{success:function(a){a==0?b.setFavourite():b.removeFavourite()}})},setFavourite:function(){EasyDiscuss.ajax("site.views.post.ajaxSetFavouritePost",{args:[b.options.postId]},{success:function(){b.options.themeName=="default"&&b.favouriteButton().text(a.language("COM_EASYDISCUSS_UNFAVOURITE")),b.options.themeName=="responsive"&&(a("#favBtnResp").hide(),a("#unfavBtnResp").show())}})},removeFavourite:function(){EasyDiscuss.ajax("site.views.post.ajaxRemoveFavouritePost",{args:[b.options.postId]},{success:function(){b.options.themeName=="default"&&b.favouriteButton().text(a.language("COM_EASYDISCUSS_FAVOURITES")),b.options.themeName=="responsive"&&(a("#unfavBtnResp").hide(),a("#favBtnResp").show())}})}}}),b.resolve()})});