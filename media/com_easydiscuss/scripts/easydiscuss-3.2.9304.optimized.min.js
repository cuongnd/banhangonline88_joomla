FD31.installer("EasyDiscuss","definitions",function(a){a.module(["easydiscuss/attachments","easydiscuss/avatar","easydiscuss/bbcode","easydiscuss/captcha","easydiscuss/categories","easydiscuss/comments","easydiscuss/composer","easydiscuss/conversation","easydiscuss/customfields","easydiscuss/easydiscuss","easydiscuss/layout/responsive","easydiscuss/layout/lightbox","easydiscuss/legacy","easydiscuss/favourites","easydiscuss/filterbar","easydiscuss/likes","easydiscuss/location","easydiscuss/newpost","easydiscuss/polls","easydiscuss/posts","easydiscuss/prism","easydiscuss/profile","easydiscuss/ranks","easydiscuss/replies","easydiscuss/votes","easydiscuss/stylesheet","easydiscuss/tag","easydiscuss/toolbar"]),a.require.template.loader(["easydiscuss/field.form.attachments.item","easydiscuss/field.form.attachments.fileinput","easydiscuss/conversation.read.item","easydiscuss/field.form.polls.answer","easydiscuss/comment.form","easydiscuss/post.notification"]),a.require.language.loader(["COM_EASYDISCUSS_EXCEED_ATTACHMENT_LIMIT","COM_EASYDISCUSS_TERMS_PLEASE_ACCEPT","COM_EASYDISCUSS_COMMENT_SUCESSFULLY_ADDED","COM_EASYDISCUSS_COMMENT_LOAD_MORE","COM_EASYDISCUSS_COMMENT_LOADING_MORE_COMMENTS","COM_EASYDISCUSS_COMMENT_LOAD_ERROR","COM_EASYDISCUSS_CONVERSATION_EMPTY_CONTENT","COM_EASYDISCUSS_CUSTOMFIELDS_DISPLAY_ERROR","COM_EASYDISCUSS_BBCODE_BOLD","COM_EASYDISCUSS_BBCODE_ITALIC","COM_EASYDISCUSS_BBCODE_UNDERLINE","COM_EASYDISCUSS_BBCODE_URL","COM_EASYDISCUSS_BBCODE_TITLE","COM_EASYDISCUSS_BBCODE_PICTURE","COM_EASYDISCUSS_BBCODE_VIDEO","COM_EASYDISCUSS_BBCODE_BULLETED_LIST","COM_EASYDISCUSS_BBCODE_NUMERIC_LIST","COM_EASYDISCUSS_BBCODE_LIST_ITEM","COM_EASYDISCUSS_BBCODE_QUOTES","COM_EASYDISCUSS_BBCODE_CODE","COM_EASYDISCUSS_BBCODE_HAPPY","COM_EASYDISCUSS_BBCODE_SMILE","COM_EASYDISCUSS_BBCODE_SURPRISED","COM_EASYDISCUSS_BBCODE_TONGUE","COM_EASYDISCUSS_BBCODE_UNHAPPY","COM_EASYDISCUSS_BBCODE_WINK","COM_EASYDISCUSS_FAVOURITE_BUTTON_UNFAVOURITE","COM_EASYDISCUSS_FAVOURITE_BUTTON_FAVOURITE","COM_EASYDISCUSS_UNLIKE_THIS_POST","COM_EASYDISCUSS_LIKE_THIS_POST","COM_EASYDISCUSS_UNLIKE","COM_EASYDISCUSS_LIKES","COM_EASYDISCUSS_NOTIFICATION_NEW_REPLIES","COM_EASYDISCUSS_NOTIFICATION_NEW_COMMENTS","COM_EASYDISCUSS_PLEASE_SELECT_CATEGORY_DESC","COM_EASYDISCUSS_POST_TITLE_CANNOT_EMPTY","COM_EASYDISCUSS_POST_CONTENT_IS_EMPTY","COM_EASYDISCUSS_SUCCESS","COM_EASYDISCUSS_FAIL","COM_EASYDISCUSS_REPLY_LOADING_MORE_COMMENTS","COM_EASYDISCUSS_REPLY_LOAD_ERROR"]),function(){var b=["easydiscuss/fancybox/default"],c=a.stylesheet({content:""})?"resolve":"reject";a.each(b,function(b,d){a.require.stylesheet.loader(d)[c]()})}()}),FD31.installer("EasyDiscuss","scripts",function($){EasyDiscuss.module("attachments",function(){var b=this;EasyDiscuss.require().view("field.form.attachments.item").done(function(a){EasyDiscuss.Controller("Attachments",{defaultOptions:{view:{item:"field.form.attachments.item"},hasAttachmentLimit:!1,attachmentLimit:0,editable:!1,"{itemGroup}":"[data-attachment-itemgroup]","{item}":"[data-attachment-item]"}},function(a){return{init:function(){var b=a.options,c=a.element.attr("data-attachment-limit");void 0!==c&&(b.hasAttachmentLimit=!0,b.attachmentLimit=parseInt(c)||0),0===b.attachmentLimit&&(b.hasAttachmentLimit=!1),b.editable=a.element.hasClass("editable"),a.item().addController("EasyDiscuss.Controller.Attachments.Item")},setLayout:function(){var b=a.options,c=a.item(":not(.new)").length,d=b.hasAttachmentLimit&&c>=b.attachmentLimit;a.element.toggleClass("limit-exceeded",d).toggleClass("no-attachment",1>c),b.editable&&(a.item(".new").remove(),d||a.view.item().appendTo(a.itemGroup()).addController("EasyDiscuss.Controller.Attachments.Item"))},"{item} itemAdded":function(){a.setLayout()},"{item} itemRemoved":function(){setTimeout(function(){a.setLayout()},1)}}}),EasyDiscuss.Controller("Attachments.Item",{defaultOptions:{"{removeButton}":"[data-attachment-remove-button]","{file}":"[data-attachment-file]","{title}":"[data-attachment-title]"}},function(a){return{init:function(){a.file().prop("disabled",!1)},add:function(){var b=a.file().val();type=a.getType(b),item=a.element,b.match(/fakepath/)&&(b=b.replace(/C:\\fakepath\\/i,"")),item.removeClass("new").addClass("attachment-type-"+type),a.title().html(b),a.trigger("itemAdded")},remove:function(){var b=a.element.attr("id");if(b){var b=b.replace("attachment-","");disjax.loadingDialog(),disjax.load("attachments","confirmDelete",b.toString())}else a.trigger("itemRemoved"),a.element.remove()},getType:function(a){var b=a.substr(a.lastIndexOf(".")+1),c="default";switch(b){case"jpg":case"png":case"gif":c="image";break;case"zip":case"rar":c="archive";break;case"pdf":c="pdf"}return c},"{file} change":function(){a.add()},"{removeButton} click":function(){a.remove()}}}),a(document).on("click.ed.attachment.remove","[data-attachment-remove-button]",function(){var b=a(this),c=b.parents(".discuss-attachments"),d="EasyDiscuss.Controller.Attachments";c.hasController(d)||(c.addController(d),b.click())}),b.resolve()})}),EasyDiscuss.module("avatar",function(){var b=this;EasyDiscuss.require().library("imgareaselect").done(function(a){EasyDiscuss.Controller("Avatar",{defaultOptions:{"{avatarContainer}":".avatarContainer","{avatar}":".avatarContainer img","{avatarPreviewContainer}":".avatarPreviewContainer","{avatarPreviewPlaceholder}":".avatarPreviewPlaceholder","{avatarPreview}":".avatarPreview","{startCropButton}":".startCropButton","{saveCropButton}":".saveCropButton","{stopCropButton}":".stopCropButton","{alertMessage}":".alertMessage",selection:{disable:!1,handles:!0,show:!0,minWidth:160,minHeight:160,x1:0,y1:0,x2:160,y2:160,previewWidth:160,previewHeight:160,aspectRatio:"1:1"}}},function(b){return{init:function(){b.avatarPreviewContainer().css({width:b.options.selection.previewWidth,height:b.options.selection.previewHeight,position:"relative",overflow:"hidden"}),b.avatarPreview().css({maxWidth:"none"})},start:function(){b.alertMessage().hide(),b.element.addClass("cropping");var h,j,c=b.options.selection,d=b.avatar(),e=b.avatarPreview(),f=d.width(),g=d.height();b.selector=d.imgAreaSelect(a.extend({},c,{parent:b.avatarContainer(),instance:!0,x1:h=f/2-c.minWidth/2,y1:j=g/2-c.minHeight/2,x2:h+c.minWidth,y2:j+c.minHeight,onSelectChange:function(a,b){var d=c.previewWidth/(b.width||1),h=c.previewHeight/(b.height||1);e.css({width:Math.round(d*f)+"px",height:Math.round(h*g)+"px",marginLeft:"-"+Math.round(d*b.x1)+"px",marginTop:"-"+Math.round(h*b.y1)+"px"})}})),b.avatarPreviewPlaceholder().hide(),b.avatarPreview().show()},stop:function(){b.alertMessage().remove(),b.element.removeClass("cropping"),b.avatarPreview().hide(),b.avatarPreviewPlaceholder().show(),b.avatar().imgAreaSelect({hide:!0,disable:!0}),delete b.selector},save:function(){if(void 0==b.selector)return b.stop(),void 0;var c=b.selector.getSelection();b.saveCropButton().addClass("btn-loading"),EasyDiscuss.ajax("site.views.profile.cropphoto",c).done(function(c,d){b.stop(),b.avatarPreviewPlaceholder().attr("src",c+"?"+a.uid()),b.alert(d||"Avatar successfully cropped!","success")}).fail(function(a){b.alert(a||"Unable to crop avatar.","error")}).always(function(){b.saveCropButton().removeClass("btn-loading")})},alert:function(c,d){void 0===d&&(d="info"),b.alertMessage().remove(),a('<div class="alert alertMessage"></div>').addClass("alert-"+d).html(c).prependTo(b.element)},"{startCropButton} click":function(){b.start()},"{saveCropButton} click":function(){b.save()},"{stopCropButton} click":function(){b.stop()}}}),b.resolve()})}),EasyDiscuss.module("bbcode",function(a){var b=this;window.insertVideoCode=function(b,c,d){if(0==b.length)return!1;var e=a("textarea[name="+d+"]"),f="[video]"+b+"[/video]";if(0==c)return a(e).val(f),disjax.closedlg(),!0;var g=a(e).val();a(e).val(g.substring(0,c)+f+g.substring(c,g.length)),disjax.closedlg()},a.getEasyDiscussBBCodeSettings={onTab:{keepDefault:!1,replaceWith:"    "},previewParserVar:"data",markupSet:[{name:a.language("COM_EASYDISCUSS_BBCODE_BOLD"),key:"B",openWith:"[b]",closeWith:"[/b]",className:"markitup-bold"},{name:a.language("COM_EASYDISCUSS_BBCODE_ITALIC"),key:"I",openWith:"[i]",closeWith:"[/i]",className:"markitup-italic"},{name:a.language("COM_EASYDISCUSS_BBCODE_UNDERLINE"),key:"U",openWith:"[u]",closeWith:"[/u]",className:"markitup-underline"},{separator:"---------------"},{name:a.language("COM_EASYDISCUSS_BBCODE_URL"),key:"L",openWith:"[url=[![Link:]!]]",closeWith:"[/url]",placeHolder:a.language("COM_EASYDISCUSS_BBCODE_TITLE"),beforeInsert:function(){},className:"markitup-url"},{name:a.language("COM_EASYDISCUSS_BBCODE_PICTURE"),key:"P",replaceWith:"[img][![Url]!][/img]",className:"markitup-picture"},{name:a.language("COM_EASYDISCUSS_BBCODE_VIDEO"),replaceWith:function(b){disjax.loadingDialog(),disjax.load("post","showVideoDialog",a(b.textarea).attr("name"),b.caretPosition.toString())},beforeInsert:function(){},afterInsert:function(){},className:"markitup-video"},{separator:"---------------"},{name:a.language("COM_EASYDISCUSS_BBCODE_BULLETED_LIST"),openWith:"[list]\n",closeWith:"\n[/list]",className:"markitup-bullet"},{name:a.language("COM_EASYDISCUSS_BBCODE_NUMERIC_LIST"),openWith:"[list=[![Starting number]!]]\n",closeWith:"\n[/list]",className:"markitup-numeric"},{name:a.language("COM_EASYDISCUSS_BBCODE_LIST_ITEM"),openWith:"[*] ",className:"markitup-list"},{separator:"---------------"},{name:a.language("COM_EASYDISCUSS_BBCODE_QUOTES"),openWith:"[quote]",closeWith:"[/quote]",className:"markitup-quote"},{name:a.language("COM_EASYDISCUSS_BBCODE_CODE"),openWith:'[code type="markup"]',closeWith:"[/code]",className:"markitup-code"},{separator:"---------------"},{name:a.language("COM_EASYDISCUSS_BBCODE_HAPPY"),openWith:":D ",className:"markitup-happy"},{name:a.language("COM_EASYDISCUSS_BBCODE_SMILE"),openWith:":) ",className:"markitup-smile"},{name:a.language("COM_EASYDISCUSS_BBCODE_SURPRISED"),openWith:":o ",className:"markitup-surprised"},{name:a.language("COM_EASYDISCUSS_BBCODE_TONGUE"),openWith:":p ",className:"markitup-tongue"},{name:a.language("COM_EASYDISCUSS_BBCODE_UNHAPPY"),openWith:":( ",className:"markitup-unhappy"},{name:a.language("COM_EASYDISCUSS_BBCODE_WINK"),openWith:";) ",className:"markitup-wink"}]},a.getEasyDiscussDialogBBCodeSettings={onShiftEnter:{keepDefault:!1,replaceWith:"<br />\n"},onCtrlEnter:{keepDefault:!1,openWith:"\n<p>",closeWith:"</p>"},onTab:{keepDefault:!1,replaceWith:"    "},previewParserVar:"data",markupSet:[{name:a.language("COM_EASYDISCUSS_BBCODE_BOLD"),key:"B",openWith:"[b]",closeWith:"[/b]",className:"markitup-bold"},{name:a.language("COM_EASYDISCUSS_BBCODE_ITALIC"),key:"I",openWith:"[i]",closeWith:"[/i]",className:"markitup-italic"},{name:a.language("COM_EASYDISCUSS_BBCODE_UNDERLINE"),key:"U",openWith:"[u]",closeWith:"[/u]",className:"markitup-underline"},{separator:"---------------"},{name:a.language("COM_EASYDISCUSS_BBCODE_URL"),key:"L",openWith:"[url=[![Link:!:http://]!]]",closeWith:"[/url]",placeHolder:a.language("COM_EASYDISCUSS_BBCODE_TITLE"),className:"markitup-url"},{name:a.language("COM_EASYDISCUSS_BBCODE_PICTURE"),key:"P",replaceWith:"[img][![Url]!][/img]",className:"markitup-picture"},{separator:"---------------"},{name:a.language("COM_EASYDISCUSS_BBCODE_BULLETED_LIST"),openWith:"[list]\n",closeWith:"\n[/list]",className:"markitup-bullet"},{name:a.language("COM_EASYDISCUSS_BBCODE_NUMERIC_LIST"),openWith:"[list=[![Starting number]!]]\n",closeWith:"\n[/list]",className:"markitup-numeric"},{name:a.language("COM_EASYDISCUSS_BBCODE_LIST_ITEM"),openWith:"[*] ",className:"markitup-list"},{separator:"---------------"},{name:a.language("COM_EASYDISCUSS_BBCODE_QUOTES"),openWith:"[quote]",closeWith:"[/quote]",className:"markitup-quote"},{name:a.language("COM_EASYDISCUSS_BBCODE_CODE"),openWith:'[code type="xml"]',closeWith:"[/code]",className:"markitup-code"},{separator:"---------------"},{name:a.language("COM_EASYDISCUSS_BBCODE_HAPPY"),openWith:":D ",className:"markitup-happy"},{name:a.language("COM_EASYDISCUSS_BBCODE_SMILE"),openWith:":) ",className:"markitup-smile"},{name:a.language("COM_EASYDISCUSS_BBCODE_SURPRISED"),openWith:":o ",className:"markitup-surprised"},{name:a.language("COM_EASYDISCUSS_BBCODE_TONGUE"),openWith:":p ",className:"markitup-tongue"},{name:a.language("COM_EASYDISCUSS_BBCODE_UNHAPPY"),openWith:":( ",className:"markitup-unhappy"},{name:a.language("COM_EASYDISCUSS_BBCODE_WINK"),openWith:";) ",className:"markitup-wink"}]},b.resolve()}),EasyDiscuss.module("captcha",function(){var b=this;EasyDiscuss.require().done(function(){EasyDiscuss.Controller("Post.Captcha",{defaultOptions:{"{reloadImage}":".reloadImage","{captchaResponse}":"#captcha-response","{captchaId}":"#captcha-id","{captchaImage}":"#captcha-image"}},function(a){return{init:function(){console.log("Captcha init")},"{reloadImage} click":function(){EasyDiscuss.ajax("site.views.ask.reloadCaptcha",{captchaId:a.captchaId().val()},{beforeSend:function(){}}).done(function(b,c){a.captchaImage().attr("src",c),a.captchaId().val(b),a.captchaResponse().val("")}).fail(function(){}).always(function(){})}}}),b.resolve()})}),EasyDiscuss.module("categories",function(){var b=this;EasyDiscuss.require().done(function(a){EasyDiscuss.Controller("Toggle.Categories",{defaultOptions:{postId:null,"{showChild}":".showChild","{hideChild}":".hideChild","{item}":"[data-item]"}},function(b){return{init:function(){},"{showChild} click":function(a){var c=a.data("id");b.openChild(c),a.addClass("icon-sort-up hideChild"),a.removeClass("icon-sort-down"),a.removeClass("showChild")},openChild:function(c){var d=b.item('[data-parent-id="'+c+'"]');d.show(),a.each(d,function(b,c){a(c).data("id")})},"{hideChild} click":function(a){var c=a.data("id");b.closeChild(c),a.addClass("icon-sort-down showChild"),a.removeClass("icon-sort-up"),a.removeClass("hideChild")},closeChild:function(c){var d=b.item('[data-parent-id="'+c+'"]');d.hide(),a.each(d,function(c,d){var e=a(d).data("id");b.closeChild(e)})}}}),EasyDiscuss.Controller("Toggle.Module.Categories",{defaultOptions:{postId:null,"{showChild}":".showChild","{hideChild}":".hideChild","{item}":"[data-item]"}},function(b){return{init:function(){},"{showChild} click":function(a){var c=a.data("id");b.openChild(c),a.addClass("icon-sort-up hideChild"),a.removeClass("icon-sort-down"),a.removeClass("showChild")},openChild:function(c){var d=b.item('[data-parent-id="'+c+'"]');d.show(),a.each(d,function(b,c){a(c).data("id")})},"{hideChild} click":function(a){var c=a.data("id");b.closeChild(c),a.addClass("icon-sort-down showChild"),a.removeClass("icon-sort-up"),a.removeClass("hideChild")},closeChild:function(c){var d=b.item('[data-parent-id="'+c+'"]');d.hide(),a.each(d,function(c,d){var e=a(d).data("id");b.closeChild(e)})}}}),b.resolve()})}),EasyDiscuss.module("comments",function(a){var b=this;EasyDiscuss.require().language("COM_EASYDISCUSS_TERMS_PLEASE_ACCEPT","COM_EASYDISCUSS_COMMENT_SUCESSFULLY_ADDED","COM_EASYDISCUSS_COMMENT_LOAD_MORE","COM_EASYDISCUSS_COMMENT_LOADING_MORE_COMMENTS","COM_EASYDISCUSS_COMMENT_LOAD_ERROR").done(function(){EasyDiscuss.Controller("Comment.List",{defaultOptions:{"{commentItems}":".commentItem"}},function(a){return{init:function(){a.commentItems().implement(EasyDiscuss.Controller.Comment.List.Item)}}}),EasyDiscuss.Controller("Comment.List.Item",{defaultOptions:{id:null,postId:null,"{deleteCommentLink}":".deleteComment","{convertCommentLink}":"[data-comment-convert-link]"}},function(a){return{init:function(){a.options.id=a.element.data("id"),a.options.postId=a.element.data("post-id")},"{deleteCommentLink} click":function(){disjax.loadingDialog(),disjax.load("comment","confirmDelete",a.options.id+"")},"{convertCommentLink} click":function(){disjax.loadingDialog(),disjax.load("comment","confirmConvert",a.options.id+"",a.options.postId+"")}}}),EasyDiscuss.Controller("Comment.LoadMore",{defaultOptions:{id:null,currentCount:0}},function(b){return{init:function(){b.options.id=b.element.data("postid"),b.doneLoading=!1},"{self} click":function(c){c.enabled()&&(c.disabled(!0),b.element.addClass("btn-loading").html(a.language("COM_EASYDISCUSS_COMMENT_LOADING_MORE_COMMENTS")),EasyDiscuss.ajax("site.views.post.getComments",{id:b.options.id,start:b.list.commentItems().length}).done(function(d,e){var f=a(d).filter("li");f.implement(EasyDiscuss.Controller.Comment.List.Item),b.list.element.append(f),e?b.element.html(a.language("COM_EASYDISCUSS_COMMENT_LOAD_MORE")):(b.doneLoading=!0,b.element.hide()),c.enabled(!0)}).fail(function(){b.element.addClass("btn-danger").html(a.language("COM_EASYDISCUSS_COMMENT_LOAD_ERROR"))}).always(function(){b.element.removeClass("btn-loading")}))}}}),EasyDiscuss.Controller("Comment.Form",{defaultOptions:{container:null,notification:null,commentsList:null,loadMore:null,termsCondition:null,"{commentMessage}":".commentMessage","{postId}":".postId","{commentTnc}":".commentTnc","{saveButton}":".saveButton","{cancelButton}":".cancelButton","{termsLink}":".termsLink","{commentLoader}":".commentLoader"}},function(b){return{init:function(){},resetForm:function(){b.commentMessage().val(""),b.commentTnc().prop("checked",!1)},"{termsLink} click":function(){disjax.load("comment","tnc")},"{cancelButton} click":function(){b.options.container.toggle()},"{saveButton} click":function(){return!b.commentTnc().is(":checked")&&b.options.termsCondition?(b.options.notification.html(a.language("COM_EASYDISCUSS_TERMS_PLEASE_ACCEPT")).addClass("alert alert-error"),!1):(EasyDiscuss.ajax("site.views.comment.save",{comment:b.commentMessage().val(),id:b.postId().val(),tnc:"1"},{beforeSend:function(){b.commentLoader().show()}}).done(function(c){b.options.notification.html(a.language("COM_EASYDISCUSS_COMMENT_SUCESSFULLY_ADDED")).removeClass("alert alert-error").addClass("alert alert-success"),b.resetForm(),b.options.container.hide(),b.commentLoader().hide(),EasyDiscuss.commentsCount=void 0===EasyDiscuss.commentsCount?1:EasyDiscuss.commentsCount+1,(b.options.loadMore.length<1||b.options.loadMore.controller().doneLoading)&&a(c).appendTo(b.options.commentsList).addController("EasyDiscuss.Controller.Comment.List.Item")}).fail(function(a){b.options.notification.html(a).addClass("alert alert-error"),b.commentLoader().hide()}),void 0)}}}),b.resolve()})}),EasyDiscuss.module("composer",function(){var b=this;EasyDiscuss.Controller("Composer",{defaultOptions:{editorType:null,operation:null,"{editor}":"[name=dc_reply_content]","{tabs}":".formTabs [data-foundry-toggle=tab]","{form}":"form[name=dc_submit]","{attachments}":"input.fileInput","{submitButton}":".submit-reply","{cancelButton}":".cancel-reply","{notification}":".replyNotification","{loadingIndicator}":".reply-loading"}},function(a){return{init:function(){a.id=a.element.data("id"),a.options.operation=a.element.data("operation"),a.options.editorType=a.element.data("editortype"),"bbcode"==a.options.editorType&&EasyDiscuss.require().library("markitup","expanding").script("bbcode").done(function(b){a.editor().markItUp(b.getEasyDiscussBBCodeSettings).expandingTextarea()}),a.tabs(":first").tab("show"),EasyDiscuss.module(a.id,function(){this.resolve(a)})},"{submitButton} click":function(){a.submit()},"{cancelButton} click":function(){a.trigger("cancel")},notify:function(b,c){a.notification().addClass("alert-"+b).html(c).show()},submit:function(){var b=a.form().serializeObject();b.content=b.dc_reply_content,b.files=a.attachments(),EasyDiscuss.ajax("site.views.post.saveReply",b,{type:"iframe",beforeSend:function(){a.submitButton().prop("disabled",!0),a.loadingIndicator().show()},notify:a.notify,reloadCaptcha:function(){Recaptcha.reload()},complete:function(){a._destroyed||(a.submitButton().removeAttr("disabled"),a.loadingIndicator().hide())}}).done(function(b){a.trigger("save",b)}).fail(a.notify)}}}),b.resolve()}),EasyDiscuss.module("conversation",function(){var b=this;EasyDiscuss.require().language("COM_EASYDISCUSS_CONVERSATION_EMPTY_CONTENT").library("markitup").script("bbcode").view("conversation.read.item").done(function(a){EasyDiscuss.Controller("Conversation.Form",{defaultOptions:{"{textEditor}":".replyMessage"}},function(a){return{init:function(){a.initBBCode()},initBBCode:function(){a.textEditor().markItUp({set:"bbcode_easydiscuss"})}}}),EasyDiscuss.Controller("Conversation.Read",{defaultOptions:{"{replyList}":".replyList","{deleteMessage}":".deleteMessage","{unreadMessage}":".unreadMessage","{replyForm}":".replyForm","{replyButton}":".replyButton","{replyMessage}":".replyMessage",messageId:null,view:{reply:"conversation.read.item"}}},function(b){return{init:function(){b.replyForm().implement(EasyDiscuss.Controller.Conversation.Form,{"{textEditor}":".replyMessage"}),b.options.messageId=b.element.data("id")},"{deleteMessage} click":function(){disjax.loadingDialog(),disjax.load("conversation","confirmDelete",b.options.messageId+"")},"{replyButton} click":function(){b.replyButton().addClass("disabled"),EasyDiscuss.ajax("site.views.conversation.reply",{id:b.options.messageId,message:b.replyMessage().val()}).done(function(c){b.replyButton().removeClass("disabled");var d=b.view.reply({post:c});a(d).find(".discuss-message-content").html(c.message),b.replyMessage().val(""),b.replyList().append(d)}).fail(function(){a(".conversationError").addClass(" alert alert-error").html(a.language("COM_EASYDISCUSS_CONVERSATION_EMPTY_CONTENT"))})}}}),b.resolve()})}),EasyDiscuss.module("customfields",function(){var b=this;EasyDiscuss.require().language("COM_EASYDISCUSS_CUSTOMFIELDS_DISPLAY_ERROR").done(function(a){EasyDiscuss.Controller("Administrator.CustomFields",{defaultOptions:{customId:null,defaultType:null,optionCount:".optionCount","{optionType}":"#type","{advanceOptions}":".customFieldAdvanceOption","{addButton}":'button[name="Add"]',"{removeButton}":'button[name="Remove"]',"{fieldLoader}":".fieldLoader","{addContainer}":".addContainer"}},function(b){return{init:function(){},"{optionType} change":function(a){b.getAdvanceOption(a.val())},"{addButton} click":function(a){b.addFieldOption(a.data("fieldtype"))},"{removeButton} click":function(a){b.removeFieldOption(a,a.attr("id"),a.data("removetype"))},getAdvanceOption:function(c){EasyDiscuss.ajax("admin.views.customfields.getAdvanceOption",{activeType:c,customId:b.options.customId},{beforeSend:function(){a(".fieldLoader").show()}}).done(function(c,d,e){b.advanceOptions().html(d),a(".addContainer").html(c),a(".optionCount").attr("totalcount",e),a(".fieldLoader").hide()}).fail(function(){b.advanceOptions().append(a.language("COM_EASYDISCUSS_CUSTOMFIELDS_DISPLAY_ERROR"))}).always(function(){a(".fieldLoader").hide()})},addFieldOption:function(c){var d=a(".optionCount").attr("totalcount");EasyDiscuss.ajax("admin.views.customfields.addFieldOption",{activeType:c,customId:b.options.customId,fieldCount:d},{beforeSend:function(){a(".fieldLoader").show()}}).done(function(c,d){b.advanceOptions().append(c),a(".optionCount").attr("totalcount",d),a(".fieldLoader").hide()}).fail(function(){b.advanceOptions().append(a.language("COM_EASYDISCUSS_CUSTOMFIELDS_DISPLAY_ERROR"))}).always(function(){a(".fieldLoader").hide()})},removeFieldOption:function(b,c,d){a("#"+d+"_"+c).remove(),a(".remove"+d+"_"+c).remove(),b.remove()}}}),b.resolve()})}),EasyDiscuss.require().library("markitup","expanding","placeholder","scrollTo").script("layout/responsive","layout/lightbox","legacy").language("COM_EASYDISCUSS_BBCODE_BOLD","COM_EASYDISCUSS_BBCODE_ITALIC","COM_EASYDISCUSS_BBCODE_UNDERLINE","COM_EASYDISCUSS_BBCODE_URL","COM_EASYDISCUSS_BBCODE_TITLE","COM_EASYDISCUSS_BBCODE_PICTURE","COM_EASYDISCUSS_BBCODE_VIDEO","COM_EASYDISCUSS_BBCODE_BULLETED_LIST","COM_EASYDISCUSS_BBCODE_NUMERIC_LIST","COM_EASYDISCUSS_BBCODE_LIST_ITEM","COM_EASYDISCUSS_BBCODE_QUOTES","COM_EASYDISCUSS_BBCODE_CODE","COM_EASYDISCUSS_BBCODE_HAPPY","COM_EASYDISCUSS_BBCODE_SMILE","COM_EASYDISCUSS_BBCODE_SURPRISED","COM_EASYDISCUSS_BBCODE_TONGUE","COM_EASYDISCUSS_BBCODE_UNHAPPY","COM_EASYDISCUSS_BBCODE_WINK").done(function(){EasyDiscuss.require().script("bbcode").done()}),EasyDiscuss.module("layout/responsive",function(a){var b=this;a(function(){a("#discuss-wrapper").responsive([{at:818,switchTo:"w768"},{at:600,switchTo:"w768 w600"},{at:500,switchTo:"w768 w600 w320"}]),a(".discuss-searchbar").responsive({at:600,switchTo:"narrow"})}),b.resolve()}),EasyDiscuss.module("layout/lightbox",function(){var b=this;EasyDiscuss.require().library("fancybox").stylesheet("fancybox/default").script("legacy").done(function(){discuss.attachments.initGallery({type:"image",helpers:{overlay:null}}),b.resolve()})}),EasyDiscuss.module("legacy",function($){var module=this;window.isSave=!1;var discuss=window.discuss={location:{remove:function(a){disjax.loadingDialog(),disjax.load("location","removeLocation",a.toString())},removeHTML:function(a){$("#location-"+a).remove()}},reply:{clear:function(){if($("textarea[name=dc_reply_content]").val(""),window.CKEDITOR)try{window.CKEDITOR.instances.dc_reply_content.setData("")}catch(b){}discuss.attachments.clear(),discuss.references.clear(form),$(form).find(".showCoords").removeClass("showCoords"),$(form).find(".locationMap").remove(),$(form).find("[name=latitude]").val(""),$(form).find("[name=longitude]").val("");var c=$(form).find(".polls-tab").controller();c&&$(form).find(".polls-tab").controller().resetPollForm()},submit:function(id){var token=$(".easydiscuss-token").val();action_url=discuss_site+"&view=post&layout=ajaxSubmitReply&format=ajax&tmpl=component&"+token+"=1",form=$("."+id).find("[name=dc_submit]")[0];var replyNotification=$("."+id).find(".replyNotification"),iframe=document.createElement("iframe");iframe.setAttribute("id","upload_iframe"),iframe.setAttribute("name","upload_iframe"),iframe.setAttribute("width","0"),iframe.setAttribute("height","0"),iframe.setAttribute("border","0"),iframe.setAttribute("style","width: 0; height: 0; border: none;"),form.parentNode.appendChild(iframe),window.frames.upload_iframe.name="upload_iframe";var iframeId=document.getElementById("upload_iframe");$(".submit-reply").prop("disabled",!0);var eventHandler=function(){var content;iframeId.detachEvent?iframeId.detachEvent("onload",eventHandler):iframeId.removeEventListener("load",eventHandler,!1),iframeId.contentDocument?content=iframeId.contentDocument:iframeId.contentWindow?content=iframeId.contentWindow.document:iframeId.document&&(content=iframeId.document),content=$(content).find("script#ajaxResponse").html();var result=$.parseJSON(content);switch(result.type){case"success.captcha":Recaptcha.reload();case"success":discuss.spinner.hide("reply_loading"),replyNotification.html(result.message).removeClass("alert-error").addClass("alert-success"),$(".discussionReplies .empty").hide();var count=$(".replyCount").html();count=parseInt(count)+1,$(".replyCount").html(count);var controller=$(".discussionReplies").controller();controller.addItem(result.html,!0),discuss.attachments.initGallery({type:"image",helpers:{overlay:null}}),EasyDiscuss.main_syntax_highlighter&&Prism.highlightAll(),"undefined"!=result.script&&eval(result.script),form.reset(),discuss.reply.clear(form);break;case"error":discuss.spinner.hide("reply_loading"),$(".submit-reply").removeAttr("disabled"),replyNotification.html(result.message).removeClass("alert-success").addClass("alert-error");break;case"error.captcha":Recaptcha.reload(),discuss.spinner.hide("reply_loading"),$(".submit-reply").removeAttr("disabled"),replyNotification.html(result.message).removeClass("alert-success").addClass("alert-error")}replyNotification.show(),$(".submit-reply").removeAttr("disabled"),setTimeout(function(){$(iframeId).remove()},250)};$(iframeId).load(eventHandler),form.setAttribute("target","upload_iframe"),form.setAttribute("action",action_url),form.setAttribute("method","post"),form.setAttribute("enctype","multipart/form-data"),form.setAttribute("encoding","multipart/form-data"),form.submit(),EasyDiscuss.repliesCount=void 0===EasyDiscuss.repliesCount?1:EasyDiscuss.repliesCount+1},verify:function(){$("#dc_notification .msg_in").html(""),$("#dc_notification .msg_in").removeClass("dc_error dc_success dc_alert"),disjax.loadingDialog(),disjax.load("post","checklogin")},post:function(){$(".submit-reply").prop("disabled",!0),$("#dc_notification .msg_in").html(""),$("#dc_notification .msg_in").removeClass("dc_error dc_success dc_alert"),discuss.spinner.show("reply_loading"),discuss.post.validate(!0,"reply")?disjax.load("post","ajaxSubmitReply",disjax.getFormVal("#dc_submit")):(discuss.spinner.hide("reply_loading"),$(".submit-reply").removeAttr("disabled"))},minimize:function(a){$("#dc_reply_"+a).hide(),$("#reply_minimize_msg_"+a).show()},maximize:function(a){$("#dc_reply_"+a).removeClass("is-minimized"),$("#reply_minimize_msg_"+a).hide()},addURL:function(a){var b=$(a).siblings("ul.attach-list").children(":first").clone(),c=$(".remove-url").clone();c.css("display","block"),$(b).find("input").val(""),$(b).find("a").show(),$(a).siblings("ul.attach-list").append(b)},removeURL:function(a){var b=$("ul.attach-list").children();return 1==b.length?!1:($(a).parents("li").remove(),void 0)},accept:function(a){disjax.loadingDialog(),disjax.load("post","confirmAccept",a)},reject:function(a){disjax.loadingDialog(),disjax.load("post","confirmReject",a)}},composer:{init:function(a,b){EasyDiscuss.require().script("composer").done(function(){$(a).implement(EasyDiscuss.Controller.Composer,b)})}},filter:function(a,b){EasyDiscuss.ajax("site.views.index.filter",{args:[a,b]},{beforeSend:function(){discuss.spinner.show("index-loading"),$("#dc_list").hide(),$("#dc_pagination").hide(),$("#filter-links").children().removeClass("active")},success:function(a,b,c,d,e,f){a&&$("#dc_featured_list").show(),$("#dc_list").html(b),$("#sort-wrapper").html(),$("#pagination-filter").val(d),$("#pagination-start").val(e),$("#dc_pagination").html(f)},complete:function(){discuss.spinner.hide("index-loading"),$("#dc_list").show(),$("#dc_pagination").show(),$("#filter-links").find("."+a).addClass("active")}})},sort:function(a,b,c){discuss.spinner.show("index-loading"),"2"==discuss_featured_style&&"allposts"!=b&&$("#dc_featured_list").hide(),$("#dc_list").hide(),$("#dc_pagination").hide(),$("#sort-links").children().removeClass("active"),$("#sort-links").find("."+a).addClass("active"),disjax.load("index","sort",a,b,c)},references:{clear:function(a){var b=$(a).find(".field-references ul.attach-list"),c=b.children(":first").clone();b.empty().append(c)}},attachments:{initGallery:function(a){$(".attachment-image-link").fancybox(a)},clear:function(){$(".uploadQueue").empty()}},map:{render:function(a,b,c,d){{var e=new google.maps.LatLng(b,c),f=new google.maps.Map(document.getElementById(d),{zoom:12,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP});new google.maps.Marker({position:e,center:e,title:a,map:f})}}},widget:{init:function(){$(".widget-toggle").click(function(){$(this).parents(".discuss-widget").find(".widget-body").toggle(),$(this).parents(".discuss-widget").toggleClass("is-hidden")})}},post:{move:function(a){disjax.loadingDialog(),disjax.load("post","movePost",a)},branch:function(a){disjax.loadingDialog(),disjax.load("post","branchForm",a)},mergeForm:function(a){disjax.loadingDialog(),disjax.load("post","mergeForm",a)},feature:function(a){disjax.loadingDialog(),disjax.load("post","confirmFeature",a)},unfeature:function(a){disjax.loadingDialog(),disjax.load("post","confirmUnfeature",a)},submit:function(){return"0"==$("#dc_submit #category_id").val()?(disjax.loadingDialog(),disjax.load("index","getTemplate","ajax.selectcategory.php"),!1):($("#createpost").prop("disabled",!0),document.dc_submit.submit(),void 0)},qqSubmit:function(){return"0"==$("#category_id").val()?(disjax.loadingDialog(),disjax.load("index","getTemplate","ajax.selectcategory.php"),!1):($("#createpost").prop("disabled",!0),document.mod_edqq.submit(),void 0)},postTopicSubmit:function(){return"0"==$("#mod_post_topic_category_id").val()?(disjax.loadingDialog(),disjax.load("index","getTemplate","ajax.selectcategory.php"),!1):($("#createpost").prop("disabled",!0),document.mod_post_topic.submit(),void 0)
},reply:function(){return discuss.post.validate(!0,"reply")&&(finalData=disjax.getFormVal("#dc_submit"),disjax.load("Post","ajaxSubmitReply",finalData)),!1},validate:function(a,b){return a||""!=$("#ez-title").val()&&$("#ez-title").val()!=langPostTitle?!0:("reply"==b?($("#dc_notification .msg_in").html(langEmptyTitle),$("#dc_notification .msg_in").addClass("dc_error")):($("#dc_post_notification .msg_in").html(langEmptyTitle),$("#dc_post_notification .msg_in").addClass("dc_error")),!1)},del:function(a,b,c){disjax.loadingDialog(),disjax.load("post","deletePostForm",a,b,c)},vote:{add:function(a,b){disjax.load("Post","ajaxAddVote",a,b)},check:function(a){disjax.load("Post","ajaxSumVote",a)},view:function(a){disjax.load("Post","ajaxViewVote",a,"")}},lock:function(a){disjax.load("Post","ajaxLockPost",a)},unlock:function(a){disjax.load("Post","ajaxUnlockPost",a)},resolve:function(a){disjax.load("Post","resolve",a)},unresolve:function(a){disjax.load("Post","unresolve",a)},likes:function(a,b,c){disjax.load("Post","ajaxLikes",a,b,c)},replyLikes:function(a,b,c){disjax.load("Post","ajaxReplyLikes",a,b,c)},onhold:function(a){disjax.load("Post","ajaxOnHoldPost",a)},accepted:function(a){disjax.load("Post","ajaxAcceptedPost",a)},workingon:function(a){disjax.load("Post","ajaxWorkingOnPost",a)},reject:function(a){disjax.load("Post","ajaxRejectPost",a)},nostatus:function(a){disjax.load("Post","ajaxNoStatusPost",a)},featured:function(a,b){disjax.load("Post","ajaxFeatured",a,b)},toggleTools:function(a,b,c){a?($(".post_delete_link").show(),$(".likes").show(),$(".comments").show(),$(".vote_up").show(),$(".vote_down").show(),$("#dc_main_reply_form").show()):(discuss.comment.cancel(),"1"==c?$(".post_delete_link").show():$(".post_delete_link").hide(),$(".likes").hide(),$(".comments").hide(),$(".vote_up").hide(),$(".vote_down").hide(),$("#dc_main_reply_form").hide())},attachment:{remove:function(a){$("#button-delete-att-"+a).prop("disabled",!0),disjax.load("post","deleteAttachment",a)}}},login:{verify:function(){return discuss.post.validate(!1,"reply")?($("#submit").prop("disabled",!0),disjax.loadingDialog(),disjax.load("post","checklogin"),void 0):!1},token:"",showpane:function(a){switch($("#usertype_pane_right").children().hide(),$("#usertype_pane_left").children(),$("#usertype_member").removeClass("active"),$("#usertype_guest").removeClass("active"),$("#discuss_register").removeClass("active"),$("#usertype_twitter").removeClass("active"),$("#usertype_status .msg_in").html(""),$("#usertype_status .msg_in").removeClass("dc_error"),a){case"guest":$("#usertype_guest").addClass("active"),$("#usertype_guest_pane_wrapper").show();break;case"register":$("#discuss_register").addClass("active"),$("#discuss_register_pane_wrapper").show();break;case"twitter":$("#usertype_twitter").addClass("active"),$("#usertype_twitter_pane_wrapper").show();break;case"member":default:$("#usertype_member").addClass("active"),$("#usertype_member_pane_wrapper").show()}},submit:{reply:function(a){switch(a){case"guest":$("#edialog-guest-reply").prop("disabled",!0);var b=$("#discuss_usertype_guest_email").val(),c=$("#discuss_usertype_guest_name").val();disjax.load("post","ajaxGuestReply",b,c);break;case"member":$("#edialog-member-reply").prop("disabled",!0);var d=$("#discuss_usertype_member_username").val(),e=$("#discuss_usertype_member_password").val(),f=discuss.login.token;disjax.load("post","ajaxMemberReply",d,e,f);break;case"twitter":$("#edialog-twitter-reply").prop("disabled",!0),disjax.load("post","ajaxTwitterReply")}}},getGuestDefaultName:function(){var a=$("#discuss_usertype_guest_email").val();$("#discuss_usertype_guest_name").val(a.split("@",1))},twitter:{signin:function(a){a?disjax.load("post","ajaxRefreshTwitter"):alert("failed")},signout:function(){disjax.load("post","ajaxSignOutTwitter")}}},files:{add:function(){jQuery("#file_contents div").before('<input type="file" name="filedata[]" id="filedata" size="50" />')}},pagination:{more:function(a){"questions"==a?disjax.load("index","ajaxReadmore",$("#pagination-start").val(),$("#pagination-sorting").val(),a,$("#discuss_parent").val(),$("#pagination-filter").val(),$("#pagination-category").val(),$("#pagination-query").val()):disjax.load("index","ajaxReadmore",$("#pagination-start").val(),$("#pagination-sorting").val(),a,$("#discuss_parent").val(),$("#pagination-filter").val(),$("#pagination-category").val())},addButton:function(a,b){html='<a href="javascript:void(0);" onclick="discuss.pagination.more( \''+a+"' );\"><span>"+b+"</span></a>",$("#dc_pagination a").length<1&&$("#dc_pagination").prepend(html)}},comment:{save:function(a){discuss.spinner.show("discussSubmitWait"),finalData=disjax.getFormVal("#frmComment"+a),disjax.load("Post","ajaxSubmitComment",finalData)},add:function(a,b){$(b).toggleClass("active"),$("#comment-action-container-"+a).toggle(),$("#err-msg .msg_in").html(""),$("#comment-notification-"+a+" .msg_in").html(""),$("#comment-notification-"+a+" .msg_in").removeClass("alert alert-error success")},clearForm:function(a){$("#comment-err-msg .msg_in").html(""),$("#comment-err-msg .msg_in").removeClass("alert alert-error success"),$("#comment").val(""),$("#comment-action-container-"+a).hide()},cancel:function(a){$("#comment-err-msg .msg_in").html(""),$("#comment-err-msg .msg_in").removeClass("dc_alert dc_error dc_success"),$("#comment-notification-"+a+" .msg_in").html(""),$("#comment-notification-"+a+" .msg_in").removeClass("alert alert-error success"),$("#comment").val(""),$("#comment-action-container-"+a).hide(),$("#comments-button-"+a).show()},remove:function(a){var b="Are you sure?";return window.confirm(b)?(disjax.load("Post","ajaxCommentDelete",a),EasyDiscuss.commentsCount=void 0===EasyDiscuss.commentsCount?0:EasyDiscuss.commentsCount-1,void 0):!1},removeEntry:function(a){$("#comment-"+a).remove()}},reports:{add:function(a){disjax.loadingDialog(),disjax.load("post","reportForm",a)},cancel:function(){disjax.closedlg()},submit:function(){disjax.load("post","ajaxSubmitReport",disjax.getFormVal("#frmReport"))},revertForm:function(a){effect.highlight("#post_content_layout_"+a),setTimeout(function(){discuss.reports.cancel()},4e3)}},element:{focus:function(a){ele="#"+a,$(ele).focus()}},spinner:{show:function(a){var b=new Image;b.src=spinnerPath,b.name="discuss-loading",b.id="discuss-loading",$("#"+a).html(b),$("#"+a).show()},hide:function(a){$("#"+a).hide()}},system:{redirect:function(a){window.location=a},refresh:function(){window.location.reload()}},subscribe:{post:function(a){var b="post",c=$("#subscribe_email").val(),d=$("#subscribe_name").val(),e="instant";discuss.spinner.show("dialog_loading"),disjax.load("post","ajaxAddSubscription",b,c,d,e,a+"")},site:function(){var a="site",b=$("#subscribe_email").val(),c=$("#subscribe_name").val(),d=$("input:radio[name=subscription_interval]:checked").val(),e="0";discuss.spinner.show("dialog_loading"),disjax.load("index","ajaxAddSubscription",a,b,c,d,e+"")},tag:function(a){var b="tag",c=$("#subscribe_email").val(),d=$("#subscribe_name").val(),e=$("input:radio[name=subscription_interval]:checked").val();discuss.spinner.show("dialog_loading"),disjax.load("index","ajaxAddSubscription",b,c,d,e,a+"")},category:function(a){var b="category",c=$("#subscribe_email").val(),d=$("#subscribe_name").val(),e=$("input:radio[name=subscription_interval]:checked").val();discuss.spinner.show("dialog_loading"),disjax.load("index","ajaxAddSubscription",b,c,d,e,a+"")},user:function(a){var b="user",c=$("#subscribe_email").val(),d=$("#subscribe_name").val(),e=$("input:radio[name=subscription_interval]:checked").val();discuss.spinner.show("dialog_loading"),disjax.load("index","ajaxAddSubscription",b,c,d,e,a+"")}},user:{tabs:{show:function(a,b,c){discuss.spinner.show("profile-loading"),$(".user-tabs ul li").removeClass("active"),$(a).parent().addClass("active"),$("#dc_profile .tab-item").hide(),$("#dc_pagination").hide();var d=$("#profile-id").val();c?disjax.load("profile","filter",b,d):$("#dc_profile ."+b).show()}},checkAlias:function(){var a=$("#profile-alias").val();""!=a&&disjax.load("profile","ajaxCheckAlias",a)}},tooltips:{init:function(){},execute:function(){}},notifications:{interval:3e3,monitor:null,count:null,startMonitor:function(){var a=discuss.notifications;a.monitor=setTimeout(a.update,a.interval)},stopMonitor:function(){clearTimeout(discuss.notifications.monitor)},update:function(){var a=discuss.notifications;a.stopMonitor();var b={};b[$(".easydiscuss-token").val()]=1,EasyDiscuss.ajax("site.views.notifications.count",b,{type:"jsonp",success:function(b){0==b&&($("#notification-count").hide(),$("#mod-notification-count").hide()),0!=b&&b&&(a.count!=b&&($("#notification-count").html(b),$("#mod-notification-count").html(b)),b>0&&($("#notification-count").show(),$("#mod-notification-count").show()),a.count=b)},complete:function(){a.startMonitor()}})}},conversation:{interval:3e3,monitor:null,count:null,startMonitor:function(){var a=discuss.conversation;a.monitor=setTimeout(a.update,a.interval)},stopMonitor:function(){clearTimeout(discuss.conversation.monitor)},update:function(){var a=discuss.conversation;a.stopMonitor();var b={};b[$(".easydiscuss-token").val()]=1,EasyDiscuss.ajax("site.views.conversation.count",b,{type:"jsonp",success:function(b){0==b&&$("#conversation-count").hide(),0!=b&&b&&(a.count!=b&&$("#conversation-count").html(b),b>0&&$("#conversation-count").show(),a.count=b)},complete:function(){a.startMonitor()}})},reply:function(a){EasyDiscuss.ajax("site.views.conversation.reply",{id:a}).done(function(){})},write:function(a){disjax.load("conversation","write",a)},send:function(){var a=$("#conversationMessage").val(),b=$("#recipientId").val();return a?(EasyDiscuss.ajax("site.views.conversation.save",{contents:a,recipient:b}).done(function(a){disjax.dialog(a)}),void 0):($("#conversationEmptyMessage").show(),!1)}},polls:{show:function(){$("#discuss-polls").toggle(),$("#discuss-multiple-polls").toggle(),$("#discuss-multiple-polls-title").toggle()},vote:function(a){var b=$(a).val();disjax.load("polls","vote",b)},unvote:function(a){disjax.load("polls","unvote",a)},showVoters:function(a){disjax.load("polls","getvoters",a)},lock:function(a){EasyDiscuss.ajax("site.views.polls.lockPolls",{postId:a}).done(function(a,b,c,d){b?$(".discussQuestion").addClass("is-poll-lock"):$("#dc_reply_"+c).addClass("is-poll-lock");for(var e=d.length,f=null,g=0;e>g;g++)f=d[g],$("#poll-count-"+f).attr("disabled","disabled"),$("#poll-count-"+f).prop("disabled","disabled");$("#poll_notice_"+c).html(a),$("#poll_notice_"+c).show(),$("#poll_notice_"+c).parent().addClass("alert")})},unlock:function(a){EasyDiscuss.ajax("site.views.polls.unlockPolls",{postId:a}).done(function(a,b,c){a?$(".discussQuestion").removeClass("is-poll-lock"):$("#dc_reply_"+b).removeClass("is-poll-lock");for(var d=c.length,e=null,f=0;d>f;f++)e=c[f],$("#poll-count-"+e).removeAttr("disabled","disabled"),$("#poll-count-"+e).removeProp("disabled","disabled");$("#poll_notice_"+b).html(""),$("#poll_notice_"+b).parent().removeClass("alert")})}},tabs:{show:function(a,b){$(".form-tab-item").hide(),$(a).parent().siblings().removeClass("active"),$(a).parent().addClass("active"),$(".tab-"+b).show()}},toolbar:{login:function(){$("#dc_toolbar .to_login div.toolbar-note").toggle()}}};window.effect=effect={highlight:function(a){setTimeout(function(){$(a).animate({backgroundColor:"#ffff66"},300).animate({backgroundColor:"transparent"},1500)},500)}},disjax=window.disjax=disjax={http:!1,format:"text",callback:function(){},error:!1,btnArray:new Array,getHTTPObject:function(){var a=!1;if("undefined"!=typeof ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){a=!1}}else if(XMLHttpRequest)try{a=new XMLHttpRequest}catch(b){a=!1}this.http=a},load:function(view,method){var callback={};"object"==typeof view&&(callback=view.callback,view=view.view),url=discuss_site,url+="&tmpl=component",url+="&no_html=1",url+="&format=ajax",url+="&uid="+(new Date).getTime();var parameters="";if(parameters="&view="+view+"&layout="+method,arguments.length>2)for(var i=2;i<arguments.length;i++){var myArgument=arguments[i];if($.isArray(myArgument))for(var j=0;j<myArgument.length;j++){var argument=myArgument[j];if("string"==typeof argument){var expr=/^\w+\(*\)$/,match=expr.exec(argument),arg=argument;match||(arg=escape(arg)),parameters+="&value"+(i-2)+"[]="+encodeURIComponent(arg)}}else{var argument=myArgument;if("string"==typeof argument){var expr=/^\w+\(*\)$/,match=expr.exec(argument),arg=argument;match||(arg=escape(arg)),parameters+="&value"+(i-2)+"="+encodeURIComponent(arg)}}}var token=$(".easydiscuss-token").val();if(parameters+="&"+token+"=1",this.getHTTPObject(),this.http&&view&&method){var ths=this;this.http.open("POST",url,!0),this.http.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.http.setRequestHeader("Content-length",parameters.length),this.http.setRequestHeader("Connection","close"),this.http.onreadystatechange=function(){if(ths){var http=ths.http;if(4==http.readyState)if(200==http.status){var result="";http.responseText&&(result=http.responseText),result=result.replace(/[\n\r]/g,""),result=eval(result),ths.process(result,callback)}else ths.error&&ths.error(http.status)}},this.http.send(parameters)}},getFormVal:function(a){var b=[],c=null;return $(":input",$(a)).each(function(){c=this.value.replace(/"/g,"&quot;"),c=encodeURIComponent(c),$(this).is(":checkbox")||$(this).is(":radio")?$(this).prop("checked")&&b.push(this.name+"="+escape(c)):b.push(this.name+"="+escape(c))}),b},process:function(result,callback){if("function"==typeof callback)return callback.apply(this,result);for(var i=0;i<result.length;i++){var action=result[i][0];switch(action){case"script":var data=result[i][1];eval(data);break;case"after":var id=result[i][1],value=result[i][2];$("#"+id).after(value);break;case"append":var id=result[i][1],value=result[i][2];$("#"+id).append(value);break;case"assign":var id=result[i][1],value=result[i][2];$("#"+id).html(value);break;case"value":var id=result[i][1],value=result[i][2];$("#"+id).val(value);break;case"prepend":var id=result[i][1],value=result[i][2];$("#"+id).prepend(value);break;case"destroy":var id=result[i][1];$("#"+id).remove();break;case"dialog":disjax.dialog(result[i][1]);break;case"alert":disjax.alert(result[i][1],result[i][2],result[i][3]);break;case"create":}}delete result},loadingDialog:function(){disjax.dialog({title:$.language("COM_EASYDISCUSS_LOADING"),loading:!0})},dialog:function(a){disjax._showPopup(a)},closedlg:function(){var a=$("#discuss-dialog"),b=$("#discuss-overlay");b.hide(),a.unbind(".dialog").hide(),$(document).off("click.ed.closedlg"),$(document).unbind("keyup",disjax._attachPopupShortcuts)},_showPopup:function(a){var b={width:"500",height:"auto",type:"dialog",loading:!1},a=$.extend({},b,a),c=$("#discuss-dialog");c.length<1&&(dialogTemplate='<div id="discuss-dialog" class="modal"><div class="modal-header"><a href="javascript:void(0);" aria-hidden="true" onclick="disjax.closedlg();" class="close">x</a><h3 class="modal-title"></h3></div><div class="modal-body"></div><div class="modal-footer"></div>',c=$(dialogTemplate).appendTo("body")),c.fadeOut(0),a.loading?c.addClass("modal-loading"):c.removeClass("modal-loading");var d=c.children(".modal-body");"string"==typeof a.title?c.find("h3.modal-title").html(a.title):c.find("h3.modal-title").html("&nbsp;");var e=c.find(".modal-footer");$.isArray(a.buttons)?(e.html("").show(),$.each(a.buttons,function(a,b){var c=b.className,d=b.title,f=b.action,g=b.form,h=$(document.createElement("a")).attr("href","javascript: void(0);").addClass("btn "+c).html(d);f&&h.attr("onclick",f),g&&h.bind("click",function(){$(g).submit()}),e.append(h)})):e.hide(),d.html(a.content),c.css({width:"auto"==a.width?"auto":parseInt(a.width),height:"auto"==a.height?"auto":parseInt(a.height),margin:0,zIndex:99999}).show(0,function(){var b,a=function(){c.css({top:($(window).height()-c.height())/2,left:($(window).width()-c.width())/2})};$(window).bind("resize.dialog scroll.dialog",function(){clearTimeout(b),b=setTimeout(a,50)}),a()}),$(document).on("click.ed.closedlg","#edialog-cancel, #edialog-submit",function(){disjax.closedlg()}),$(document).bind("keyup",disjax._attachPopupShortcuts)},_attachPopupShortcuts:function(a){27==a.keyCode&&disjax.closedlg()}},$(function(){$("[rel=ed-tooltip]").tooltip({animation:!1,container:"body",template:'<div class="tooltip tooltip-ed"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'})}),$(document).on("mouseover","[rel=ed-popover]",function(){$(this).popover({container:"body",delay:{show:100,hide:100},animation:!1,trigger:"hover"})}),module.resolve()}),EasyDiscuss.module("favourites",function(){var b=this;EasyDiscuss.require().language("COM_EASYDISCUSS_FAVOURITE_BUTTON_UNFAVOURITE","COM_EASYDISCUSS_FAVOURITE_BUTTON_FAVOURITE").done(function(a){EasyDiscuss.Controller("Post.Favourites",{defaultOptions:{postId:null,"{favButton}":".btnFav","{removeButton}":".btnRemove","{favLoader}":".favLoader","{favCount}":".favCount"}},function(b){return{init:function(){b.options.postId=b.element.data("postid")},"{favButton} click":function(c){EasyDiscuss.ajax("site.views.favourites.favourite",{postid:b.options.postId},{beforeSend:function(){a(".favLoader").show(),a(".favCount").empty()}}).done(function(b,d){b?(c.addClass("isfav"),a(c).html(a.language("COM_EASYDISCUSS_FAVOURITE_BUTTON_UNFAVOURITE")),a(".favCount").html(d)):(c.removeClass("isfav btn-primary"),a(c).html(a.language("COM_EASYDISCUSS_FAVOURITE_BUTTON_FAVOURITE")),a(".favCount").html(d))}).fail(function(){}).always(function(){a(".favLoader").hide()})},"{removeButton} click":function(c){EasyDiscuss.ajax("site.views.favourites.remove",{postid:b.options.postId}).done(function(){c.removeClass("isfav"),a(".discussItem"+b.options.postId).remove()}).fail(function(){})}}}),b.resolve()})}),EasyDiscuss.module("filterbar",function(a){var b=this;EasyDiscuss.Controller("DiscussFilterBar",{defaultOptions:{catId:null,"{allpostsButton}":".allpostsBtn","{featuredButton}":".featuredBtn","{newButton}":".newBtn","{unansweredButton}":".unansweredBtn"}},function(b){return{init:function(){},"{allpostsButton} click":function(){b.filter("allposts")},"{featuredButton} click":function(){b.filter("featured")},"{newButton} click":function(){b.filter("new")},"{unansweredButton} click":function(){b.filter("unanswered")},filter:function(c){var d=0==b.options.catId?null:b.options.catId;EasyDiscuss.ajax("site.views.index.filter",{args:[c,d]},{beforeSend:function(){discuss.spinner.show("index-loading"),a("#dc_list").hide(),a("#dc_pagination").hide(),a("#filter-links").children().removeClass("active")},success:function(b,c,d,e,f,g){b&&a("#dc_featured_list").show(),a("#dc_list").html(c),a("#sort-wrapper").html(),a("#pagination-filter").val(e),a("#pagination-start").val(f),a("#dc_pagination").html(g)},complete:function(){discuss.spinner.hide("index-loading"),a("#dc_list").show(),a("#dc_pagination").show(),a("#filter-links").find("."+c).addClass("active")}})}}}),b.resolve()}),EasyDiscuss.module("likes",function(a){var b=this;EasyDiscuss.require().language("COM_EASYDISCUSS_UNLIKE_THIS_POST","COM_EASYDISCUSS_LIKE_THIS_POST","COM_EASYDISCUSS_UNLIKE","COM_EASYDISCUSS_LIKES").done(function(a){EasyDiscuss.Controller("Likes",{defaultOptions:{postId:null,registeredUser:null,"{likeButton}":".btnLike","{unlikeButton}":".btnUnlike","{likeText}":".likeText","{likeCount}":".likeCount","{likeStatus}":".likeStatus"}},function(b){return{init:function(){b.options.postId=b.element.data("postid"),b.element.data("like",!0)},getLikesData:function(){EasyDiscuss.ajax("site.views.likes.getData",{id:b.options.postId}).done(function(a){b.likeText().html(a)})},likeItem:function(){return b.options.registeredUser?(EasyDiscuss.ajax("site.views.likes.like",{postid:b.options.postId}).done(function(a,c){b.likeText().html(a),b.likeCount().html(c)}),void 0):!1},"{likeButton} click":function(c){var d=b.likeButton();d.addClass("btnUnlike"),d.attr("data-original-title",a.language("COM_EASYDISCUSS_UNLIKE_THIS_POST")),d.find("i").removeClass("icon-ed-love").addClass("icon-ed-remove"),b.likeStatus().html(a.language("COM_EASYDISCUSS_UNLIKE")),d.removeClass("btnLike"),b.likeItem(c)},"{unlikeButton} click":function(){var d=b.unlikeButton();d.addClass("btnLike"),d.attr("data-original-title",a.language("COM_EASYDISCUSS_LIKE_THIS_POST")),d.find("i").removeClass("icon-ed-remove").addClass("icon-ed-love"),b.likeStatus().html(a.language("COM_EASYDISCUSS_LIKES")),d.removeClass("btnUnlike"),b.likeItem()},"{unlikeButton} mouseover":function(){},"{unlikeButton} mouseout":function(){}}})}),a(document).on("mouseover.discussLikes",".discussLikes",function(){var b=a(this);if(void 0==b.data("like")){var c="true"===b.attr("data-registered-user");b.implement(EasyDiscuss.Controller.Likes,{registeredUser:c})}}),b.resolve()}),EasyDiscuss.module("location",function(a){var b=this;EasyDiscuss.require().library("ui/autocomplete").done(function(){EasyDiscuss.Controller("Location.Form",{defaultOptions:{language:"en",initialLocation:null,mapType:"ROADMAP",height:"250px",width:"100%","{locationInput}":".locationInput","{locationLatitude}":".locationLatitude","{locationLongitude}":".locationLongitude","{latitudeDisplay}":".latitudeDisplay","{longitudeDisplay}":".longitudeDisplay","{locationMap}":".locationMap","{autoDetectButton}":".autoDetectButton","{locationCoords}":".locationCoords","{removeLocationButton}":".removeLocationButton"}},function(b){return{init:function(){var c=a.uid("ext");window[c]=function(){a.___GoogleMaps.resolve()},a.___GoogleMaps||(a.___GoogleMaps=a.Deferred(),EasyDiscuss.require().script({prefetch:!1},"https://maps.googleapis.com/maps/api/js?sensor=true&language="+b.options.language+"&callback="+c)),a.___GoogleMaps.done(function(){b._init()})},_init:function(){b.geocoder=new google.maps.Geocoder,b.hasGeolocation=void 0!==navigator.geolocation,b.hasGeolocation?b.autoDetectButton().show():b.autoDetectButton().remove(),b.locationInput().autocomplete({delay:300,minLength:0,source:b.retrieveSuggestions,select:function(a,c){b.locationInput().autocomplete("close"),b.setLocation(c.item.location)}}).prop("disabled",!1),b.autocomplete=b.locationInput().autocomplete("widget"),b.autocomplete.addClass("location-suggestion");var e=a.trim(b.options.initialLocation);e&&b.getLocationByAddress(e,function(a){b.setLocation(a[0])}),b.busy(!1)},busy:function(a){b.locationInput().toggleClass("loading",a)},getUserLocations:function(a){b.getLocationAutomatically(function(c){b.userLocations=b.buildDataset(c),a&&a(c)})},getLocationByAddress:function(a,c){b.geocoder.geocode({address:a},c)},getLocationByCoords:function(a,c,d){b.geocoder.geocode({location:new google.maps.LatLng(a,c)},d)},getLocationAutomatically:function(a,c){return navigator.geolocation?(navigator.geolocation.getCurrentPosition(function(c){b.getLocationByCoords(c.coords.latitude,c.coords.longitude,a)},c),void 0):c("ERRCODE","Browser does not support geolocation or do not have permission to retrieve location data.")},renderMap:function(a,c){b.busy(!0),b.locationMap().css("width",b.options.width).css("height",b.options.height).show();var d=new google.maps.Map(b.locationMap()[0],{zoom:15,center:a.geometry.location,mapTypeId:google.maps.MapTypeId[b.options.mapType],disableDefaultUI:!0}),e=new google.maps.Marker({draggable:!0,position:a.geometry.location,center:a.geometry.location,title:a.formatted_address,map:d}),f=new google.maps.InfoWindow({content:c});google.maps.event.addListener(d,"tilesloaded",function(){f.open(d,e),b.busy(!1)}),google.maps.event.addListener(e,"dragend",function(){b.getLocationByCoords(this.getPosition().lat(),this.getPosition().lng(),function(a){var c=a[0].formatted_address;b.locationInput().val(c)}),b.locationLatitude().val(this.getPosition().lat()),b.locationLongitude().val(this.getPosition().lng()),b.latitudeDisplay().html(this.getPosition().lat()),b.longitudeDisplay().html(this.getPosition().lng()),b.locationCoords().addClass("showCoords")})},setLocation:function(a){a&&(b.locationResolved=!0,b.lastResolvedLocation=a,b.locationInput().val(a.formatted_address),b.locationLatitude().val(a.geometry.location.lat()),b.latitudeDisplay().html(a.geometry.location.lat()),b.longitudeDisplay().html(a.geometry.location.lng()),b.locationCoords().addClass("showCoords"),b.locationLongitude().val(a.geometry.location.lng()),b.renderMap(a,a.formatted_address))},removeLocation:function(){b.locationResolved=!1,b.locationInput().val(""),b.locationLatitude().val(""),b.latitudeDisplay().html(""),b.longitudeDisplay().html(""),b.locationCoords().removeClass("showCoords"),b.locationLongitude().val(""),b.locationMap().hide()},buildDataset:function(b){var c=a.map(b,function(a){return{label:a.formatted_address,value:a.formatted_address,location:a}});return c},retrieveSuggestions:function(a,c){b.busy(!0);var d=a.term,e=function(a){c(a),b.busy(!1)};""==d?e(b.userLocations||[]):b.getLocationByAddress(d,function(a){e(b.buildDataset(a))})},suggestUserLocations:function(){b.hasGeolocation&&b.userLocations&&(b.removeLocation(),b.locationInput().autocomplete("search","")),b.busy(!1)},"{locationInput} blur":function(){setTimeout(function(){var c=a.trim(b.locationInput().val());""==c?b.removeLocation():b.locationResolved?c!=b.lastResolvedLocation.formatted_address&&b.setLocation(b.lastResolvedLocation):b.removeLocation()},250)},"{autoDetectButton} click":function(){b.busy(!0),b.hasGeolocation&&!b.userLocations?b.getUserLocations(b.suggestUserLocations):b.suggestUserLocations()},"{removeLocationButton} click":function(){b.removeLocation()}}}),EasyDiscuss.Controller("Location.Map",{defaultOptions:{animation:"drop",language:"en",useStaticMap:!1,disableMapsUI:!0,zoom:5,fitBounds:null,minZoom:null,maxZoom:null,center:null,locations:[],mapType:"ROADMAP",width:500,height:400,"{locationMap}":".locationMap","{removeLocation}":".removeLocation"}},function(b){return{init:function(){if(b.mapLoaded=!1,!a.___GoogleMaps){a.___GoogleMaps=a.Deferred();var c=a.uid("ext");window[c]=function(){a.___GoogleMaps.resolve()},EasyDiscuss.require().script({prefetch:!1},"https://maps.googleapis.com/maps/api/js?sensor=true&language="+b.options.language+"&callback="+c)}a.___GoogleMaps.done(function(){b._init()})},_init:function(){if(1==b.options.useStaticMap){var c="&language="+String(b.options.language),d="&size="+String(b.options.width)+"x"+String(b.options.height),e="&zoom="+String(b.options.zoom),f="&center="+String(parseFloat(b.options.locations[0].latitude).toFixed(6))+","+String(parseFloat(b.options.locations[0].longitude).toFixed(6)),g="&maptype="+google.maps.MapTypeId[b.options.mapType],h="&markers=",i="https://maps.googleapis.com/maps/api/staticmap?sensor=false"+c+d;if(1==b.options.locations.length)h+=String(parseFloat(b.options.locations[0].latitude).toFixed(6))+","+String(parseFloat(b.options.locations[0].longitude).toFixed(6)),i+=e+f+g+h;else{var j=new Array;a.each(b.options.locations,function(a,b){j.push(String(parseFloat(b.latitude).toFixed(6))+","+String(parseFloat(b.longitude).toFixed(6)))}),h+=j.join("|"),i+=h+g}b.locationMap().show().html('<img src="'+i+'" />'),b.busy(!1)}else null===b.options.fitBounds&&(b.options.fitBounds=1==b.options.locations.length?!1:!0),b.options.disableMapsUI=Boolean(b.options.disableMapsUI),b.locations=new Array,a.each(b.options.locations,function(a,c){"null"!=c.latitude&&"null"!=c.longitude&&b.locations.push(new google.maps.LatLng(c.latitude,c.longitude))}),b.locations.length>0&&b.renderMap(),b.busy(!1)},busy:function(a){b.locationMap().toggleClass("loading",a)},renderMap:function(){b.busy(!0),b.locationMap().show();var a;a=b.options.center?new google.maps.LatLng(center.latitude,center.longitude):b.locations[0],b.map=new google.maps.Map(b.locationMap()[0],{zoom:parseInt(b.options.zoom),minZoom:parseInt(b.options.minZoom),maxZoom:parseInt(b.options.maxZoom),center:a,mapTypeId:google.maps.MapTypeId[b.options.mapType],disableDefaultUI:b.options.disableMapsUI}),google.maps.event.addListener(b.map,"tilesloaded",function(){0==b.mapLoaded&&(b.mapLoaded=!0,b.loadLocations())})},loadLocations:function(){b.bounds=new google.maps.LatLngBounds,b.infoWindow=new Array;var c=function(){a.each(b.locations,function(a,c){b.bounds.extend(c);var d=function(){b.addMarker(c,b.options.locations[a])};setTimeout(d,100*(a+1))}),b.options.fitBounds&&b.map.fitBounds(b.bounds)};setTimeout(c,500)},addMarker:function(a,c){if(a){var d=new google.maps.Marker({position:a,map:b.map});d.setAnimation(google.maps.Animation.DROP),b.addInfoWindow(d,c)}},addInfoWindow:function(c,d){var e=d.content;e||(e=d.address);var f=new google.maps.InfoWindow;f.setContent(e),b.infoWindow.push(f),b.options.locations.length>1?google.maps.event.addListener(c,"click",function(){a.each(b.infoWindow,function(a,b){b.close()}),f.open(b.map,c)}):(google.maps.event.addListener(c,"click",function(){f.open(b.map,c)}),f.open(b.map,c)),d.ratingid&&google.maps.event.addListener(f,"domready",function(){a.each(d.ratingid,function(b,c){eblog.ratings.setup("ebpostmap_"+c+"-ratings",!0,"entry"),a("#ebpostmap_"+c+"-ratings").removeClass("ui-state-disabled"),a("#ebpostmap_"+c+"-ratings-form").find(".blog-rating-text").hide(),a("#ebpostmap_"+c+"-ratings .ratings-value").hide()})})},"{removeLocation} click":function(){disjax.loadingDialog(),disjax.load("location","confirmRemoveLocation",b.element.data("id").toString())}}}),b.resolve()})}),EasyDiscuss.module("newpost",function(a){var b=this;EasyDiscuss.Controller("DiscussNewPost",{defaultOptions:{"{pollsCheckbox}":".pollsChkbox","{radioButton}":".radioBtn","{chkboxButton}":".chkboxBtn"}},function(b){return{init:function(){},"{pollsCheckbox} click":function(){b.show()},"{chkboxButton} click":function(a){var c=a.attr("id");b.vote(c)},show:function(){a("#discuss-polls").toggle(),a("#discuss-multiple-polls").toggle(),a("#discuss-multiple-polls-title").toggle()},vote:function(a){EasyDiscuss.ajax("site.views.polls.vote",{args:[a]},{success:function(){}})}}}),b.resolve()}),EasyDiscuss.module("polls",function(){var b=this;EasyDiscuss.require().view("field.form.polls.answer").done(function(a){EasyDiscuss.Controller("Polls.Answers",{defaultOptions:{pollId:null,"{voteCount}":".voteCount","{votersAvatar}":".votersAvatar","{votePoll}":".votePoll","{unvotePoll}":".unvotePoll","{pollGraph}":".pollGraph"}},function(b){return{init:function(){b.options.pollId=b.element.data("id")},"{voteCount} click":function(){disjax.load("polls","getvoters",b.options.pollId.toString())},"{votePoll} change":function(){EasyDiscuss.ajax("site.views.polls.vote",{id:b.options.pollId}).done(function(b){a(b).each(function(b,c){a(".pollAnswerItem-"+c.id).find(".pollPercentage").html(c.percentage),a(".pollAnswerItem-"+c.id).find(".pollGraph").css("width",c.percentage+"%"),a(".pollAnswerItem-"+c.id).find(".voteCount").html(c.votes),a(".pollAnswerItem-"+c.id).find(".votersList").html(c.voters)})})}}}),EasyDiscuss.Controller("Polls.Form",{defaultOptions:{"{pollAnswers}":".pollAnswers","{pollAnswersList}":".pollAnswersList","{insertPollAnswer}":".insertPollAnswer","{pollCheckbox}":".pollCheckbox","{pollForm}":".pollForm","{deletedPolls}":"#pollsremove",view:{answerItem:"field.form.polls.answer"}}},function(a){return{init:function(){a.pollAnswers().implement(EasyDiscuss.Controller.Polls.Form.Answer,{pollController:a}),0==a.pollAnswers().length&&a.insertNewPollAnswer()},resetPollForm:function(){a.pollAnswers(":not(:first)").remove(),a.pollForm().hide(),a.pollCheckbox().prop("checked",!1)},insertNewPollAnswer:function(b){a.view.answerItem({showRemove:a.pollAnswers().length>0}).implement(EasyDiscuss.Controller.Polls.Form.Answer,{pollController:a,shiftFocus:b}).appendTo(a.pollAnswersList())},updateDeletedPoll:function(b){var c=a.deletedPolls().val();""!=c&&(c+=","),a.deletedPolls().val(c+b)},showPollForm:function(){a.pollForm().show()},"{insertPollAnswer} click":function(){a.insertNewPollAnswer(!0)},"{pollCheckbox} change":function(){a.pollForm().toggle()
}}}),EasyDiscuss.Controller("Polls.Form.Answer",{defaultOptions:{"{answerText}":".answerText","{removeItem}":".removeItem",pollController:null,shiftFocus:!1}},function(b){return{init:function(){b.options.shiftFocus&&b.answerText().focus()},"{removeItem} click":function(c){var d=a(c).data("pollid");null!=d&&b.options.pollController.updateDeletedPoll(d),b.element.remove()},"{answerText} keyup":function(c,d){d.keyCode==a.ui.keyCode.ENTER&&b.options.pollController.insertNewPollAnswer(!0)}}}),b.resolve()})}),EasyDiscuss.module("posts",function(a){var b=this;EasyDiscuss.require().view("comment.form","post.notification").script("comments","location").language("COM_EASYDISCUSS_NOTIFICATION_NEW_REPLIES","COM_EASYDISCUSS_NOTIFICATION_NEW_COMMENTS","COM_EASYDISCUSS_PLEASE_SELECT_CATEGORY_DESC","COM_EASYDISCUSS_POST_TITLE_CANNOT_EMPTY","COM_EASYDISCUSS_POST_CONTENT_IS_EMPTY").done(function(){EasyDiscuss.Controller("Post.Ask",{defaultOptions:{"{submitDiscussion}":".submitDiscussion"}},function(){return{init:function(){},"{submitDiscussion} click":function(){if(!a(this).attr("disabled")){var b="",c=!1,d=a(".discuss-form *[name=category_id]").val();if(0==d||0==d.length){var e=a.language("COM_EASYDISCUSS_PLEASE_SELECT_CATEGORY_DESC");b+="<li>"+e+"</li>",c=!0}if(""==a("#ez-title").val()&&""==a("#post-topic-title").val()){var e=a.language("COM_EASYDISCUSS_POST_TITLE_CANNOT_EMPTY");b+="<li>"+e+"</li>",c=!0}var f=discuss.getContent();if(""==f){var e=a.language("COM_EASYDISCUSS_POST_CONTENT_IS_EMPTY");b+="<li>"+e+"</li>",c=!0}return c?(b='<div class="alert alert-error"><ul class="unstyled">'+b+"</ul></div>",a(".ask-notification").html(""),a(".ask-notification").append(b),a(document).scrollTop(a(".ask-notification").offset().top),!1):(a(this).prop("disabled",!0),a("#dc_submit").submit(),!1)}}}}),EasyDiscuss.Controller("Post.Moderator",{defaultOptions:{"{moderatorBtn}":".moderatorBtn","{postModeratorList}":".post-moderator-list","{moderatorList}":".moderatorList"}},function(b){return{init:function(){b.moderatorBtn().parent(".dropdown_").hasClass("open")&&b.loadModeratorList()},loadModeratorList:function(){if(length=b.postModeratorList().size(),!(length>0)){b.moderatorList().empty();var a='<li style="height:10px;"><div class="discuss-loader" style="margin-left:15px;"></div></li>';b.moderatorList().append(a),EasyDiscuss.ajax("site.views.post.getModerators",{id:b.element.data("id"),category_id:b.element.data("category")},{success:function(a){b.moderatorList().empty(),b.moderatorList().append(a)},fail:function(){}})}},"{moderatorBtn} click":function(){b.loadModeratorList()},"{postModeratorList} click":function(b){var c=a(b).data("userid"),d=a(b).data("postid");EasyDiscuss.ajax("site.views.post.ajaxModeratorAssign",{userId:c,postId:d},{success:function(b){a(".discuss-post-assign").html(b)},fail:function(b){a(".discuss-post-assign").html(b)}})}}}),EasyDiscuss.Controller("Post.Question",{defaultOptions:{id:null,view:{commentForm:"comment.form"},"{addCommentButton}":".addComment","{commentFormContainer}":".commentFormContainer","{commentNotification}":".commentNotification","{commentsList}":".commentsList","{commentLoadMore}":".commentLoadMore","{postLocation}":".postLocation","{locationData}":".locationData"}},function(b){return{init:function(){if(b.commentsList().implement(EasyDiscuss.Controller.Comment.List),b.commentLoadMore().length>0&&b.commentLoadMore().implement(EasyDiscuss.Controller.Comment.LoadMore,{controller:{list:b.commentsList().controller()}}),b.options.id=b.element.data("id"),b.locationData().length>0){var c=a.parseJSON(b.locationData().val());b.postLocation().implement("EasyDiscuss.Controller.Location.Map",c)}},"{addCommentButton} click":function(){var c=b.view.commentForm({id:b.options.id});a(c).implement(EasyDiscuss.Controller.Comment.Form,{container:b.commentFormContainer(),notification:b.commentNotification(),commentsList:b.commentsList(),loadMore:b.commentLoadMore(),termsCondition:b.options.termsCondition}),b.commentFormContainer().html(c).toggle()}}}),EasyDiscuss.Controller("PostItems",{defaultOptions:{activefiltertype:null,"{allPostsFilter}":".allPostsFilter","{newPostsFilter}":".newPostsFilter","{unResolvedFilter}":".unResolvedFilter","{resolvedFilter}":".resolvedFilter","{unAnsweredFilter}":".unAnsweredFilter","{sortLatest}":".sortLatest","{sortPopular}":".sortPopular","{ulList}":"ul.normal","{loader}":".loader","{pagination}":".dc-pagination","{filterTab}":"[data-filter-tab]","{sortTab}":"[data-sort-tab]"}},function(a){return{init:function(){},doSort:function(b){a.sortTab().removeClass("active").filterBy("sortType",b).addClass("active"),filterType=a.options.activefiltertype,console.log(filterType),a.doFilter(filterType,b)},doFilter:function(b,c){a.filterTab().removeClass("active").filterBy("filterType",b).addClass("active"),a.options.activefiltertype=b,void 0===c&&(c="latest"),a.loader().show(),a.ulList().children("li").remove(),EasyDiscuss.ajax("site.views.index.filter",{filter:b,sort:c,id:a.element.data("id"),view:a.element.data("view")}).done(function(b,c){a.loader().hide(),a.ulList().append(b),a.pagination().html(c)}).fail(function(){a.loader().hide()}).always(function(){})},"{filterTab} click":function(b){var c=b.data("filterType");a.doFilter(c)},"{sortTab} click":function(b){var c=b.data("sortType");a.doSort(c)}}}),EasyDiscuss.Controller("Post.CheckNewReplyComment",{defaultOptions:{id:null,interval:10,wrapper:{discuss:"#discuss-wrapper",notificationContainer:".notificationContainer",notification:".discussNotification",replyContainer:".replyContainer",commentContainer:".commentContainer",replyCount:".replyCount",commentCount:".commentCount",replyText:".replyText",commentText:".commentText"},discusswrapper:"#discuss-wrapper",notificationwrapper:".discussNotification",view:{postNotification:"post.notification"}}},function(b){return{init:function(){b.options.id=b.element.data("id"),b.getCount().done(function(a,c){EasyDiscuss.repliesCount=a,EasyDiscuss.commentsCount=c,b.autoCheck()}),a(b.options.wrapper.discuss).append('<div class="notifications top-left notificationContainer"></div>')},autoCheck:function(){b.check=setTimeout(function(){b.checkCount().done(function(){b.autoCheck()})},1e3*b.options.interval)},stopCheck:function(){clearTimeout(b.check)},getCount:function(){return EasyDiscuss.ajax("site.views.post.getUpdateCount",{id:b.options.id})},checkCount:function(){var c=a.Deferred(),d=!1,e=!1;return b.getCount().done(function(a,f){d=a-EasyDiscuss.repliesCount,e=f-EasyDiscuss.commentsCount,b.newRepliesCount=a,b.newCommentsCount=f,(d>0||e>0)&&b.notify(d,e),c.resolve()}),c},notify:function(c,d){var e=a(b.options.wrapper.notification);if(e.length<1){var f=b.view.postNotification({newReply:c,newComment:d});a(b.options.wrapper.notificationContainer).notify({message:{html:f.toHTML()},fadeOut:{enabled:!1},onClosed:function(){EasyDiscuss.repliesCount=b.newRepliesCount,EasyDiscuss.commentsCount=b.newCommentsCount}}).show()}else{var g=e.find(b.options.wrapper.replyContainer),h=e.find(b.options.wrapper.commentContainer),i=e.find(b.options.wrapper.replyCount),j=e.find(b.options.wrapper.commentCount),k=e.find(b.options.wrapper.replyText),l=e.find(b.options.wrapper.commentText);c>0&&g.length>0&&i.text(c)&&g.is(":hidden")&&g.show(),d>0&&h.length>0&&j.text(d)&&h.is(":hidden")&&h.show(),c>1&&k.text(a.language("COM_EASYDISCUSS_NOTIFICATION_NEW_REPLIES")),d>1&&l.text(a.language("COM_EASYDISCUSS_NOTIFICATION_NEW_COMMENTS"))}}}}),b.resolve()})}),EasyDiscuss.module("prism",function(){var b=this;!function(){var a=/\blang(?:uage)?-(?!\*)(\w+)\b/i,b=self.Prism={util:{type:function(a){return Object.prototype.toString.call(a).match(/\[object (\w+)\]/)[1]},clone:function(a){var c=b.util.type(a);switch(c){case"Object":var d={};for(var e in a)a.hasOwnProperty(e)&&(d[e]=b.util.clone(a[e]));return d;case"Array":return a.slice()}return a}},languages:{extend:function(a,c){var d=b.util.clone(b.languages[a]);for(var e in c)d[e]=c[e];return d},insertBefore:function(a,c,d,e){e=e||b.languages;var f=e[a],g={};for(var h in f)if(f.hasOwnProperty(h)){if(h==c)for(var i in d)d.hasOwnProperty(i)&&(g[i]=d[i]);g[h]=f[h]}return e[a]=g},DFS:function(a,c){for(var d in a)c.call(a,d,a[d]),"Object"===b.util.type(a)&&b.languages.DFS(a[d],c)}},highlightAll:function(a,c){for(var f,d=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),e=0;f=d[e++];)b.highlightElement(f,a===!0,c)},highlightElement:function(d,e,f){for(var g,h,i=d;i&&!a.test(i.className);)i=i.parentNode;if(i&&(g=(i.className.match(a)||[,""])[1],h=b.languages[g]),h){d.className=d.className.replace(a,"").replace(/\s+/g," ")+" language-"+g,i=d.parentNode,/pre/i.test(i.nodeName)&&(i.className=i.className.replace(a,"").replace(/\s+/g," ")+" language-"+g);var j=d.textContent;if(j){j=j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ");var k={element:d,language:g,grammar:h,code:j};if(b.hooks.run("before-highlight",k),e&&self.Worker){var l=new Worker(b.filename);l.onmessage=function(a){k.highlightedCode=c.stringify(JSON.parse(a.data),g),b.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(k.element),b.hooks.run("after-highlight",k)},l.postMessage(JSON.stringify({language:k.language,code:k.code}))}else k.highlightedCode=b.highlight(k.code,k.grammar,k.language),b.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f&&f.call(d),b.hooks.run("after-highlight",k)}}},highlight:function(a,d,e){return c.stringify(b.tokenize(a,d),e)},tokenize:function(a,c){var e=b.Token,f=[a],g=c.rest;if(g){for(var h in g)c[h]=g[h];delete c.rest}a:for(var h in c)if(c.hasOwnProperty(h)&&c[h]){var i=c[h],j=i.inside,k=!!i.lookbehind,l=0;i=i.pattern||i;for(var m=0;m<f.length;m++){var n=f[m];if(f.length>a.length)break a;if(!(n instanceof e)){i.lastIndex=0;var o=i.exec(n);if(o){k&&(l=o[1].length);var p=o.index-1+l,o=o[0].slice(l),q=o.length,r=p+q,s=n.slice(0,p+1),t=n.slice(r+1),u=[m,1];s&&u.push(s);var v=new e(h,j?b.tokenize(o,j):o);u.push(v),t&&u.push(t),Array.prototype.splice.apply(f,u)}}}}return f},hooks:{all:{},add:function(a,c){var d=b.hooks.all;d[a]=d[a]||[],d[a].push(c)},run:function(a,c){var d=b.hooks.all[a];if(d&&d.length)for(var f,e=0;f=d[e++];)f(c)}}},c=b.Token=function(a,b){this.type=a,this.content=b};if(c.stringify=function(a,d,e){if("string"==typeof a)return a;if("[object Array]"==Object.prototype.toString.call(a))return a.map(function(b){return c.stringify(b,d,a)}).join("");var f={type:a.type,content:c.stringify(a.content,d,e),tag:"span",classes:["token",a.type],attributes:{},language:d,parent:e};"comment"==f.type&&(f.attributes.spellcheck="true"),b.hooks.run("wrap",f);var g="";for(var h in f.attributes)g+=h+'="'+(f.attributes[h]||"")+'"';return"<"+f.tag+' class="'+f.classes.join(" ")+'" '+g+">"+f.content+"</"+f.tag+">"},!self.document)return self.addEventListener("message",function(a){var c=JSON.parse(a.data),d=c.language,e=c.code;self.postMessage(JSON.stringify(b.tokenize(e,b.languages[d]))),self.close()},!1),void 0;var d=document.getElementsByTagName("script");d=d[d.length-1],d&&(b.filename=d.src,document.addEventListener&&!d.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",b.highlightAll))}(),Prism.languages.markup={comment:/&lt;!--[\w\W]*?-->/g,prolog:/&lt;\?.+?\?>/,doctype:/&lt;!DOCTYPE.+?>/,cdata:/&lt;!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi},Prism.hooks.add("wrap",function(a){"entity"===a.type&&(a.attributes.title=a.content.replace(/&amp;/,"&"))}),Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*{))/gi,inside:{punctuation:/[;:]/g}},url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\};]*(?=\s*\{)/g,property:/(\b|\B)[\w-]+(?=\s*:)/gi,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g},Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}}),Prism.languages.css.selector={pattern:/[^\{\}\s][^\{\}]*(?=\s*\{)/g,inside:{"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/g,"pseudo-class":/:[-\w]+(?:\(.*\))?/g,"class":/\.[-:\.\w]+/g,id:/#[-:\.\w]+/g}},Prism.languages.insertBefore("css","ignore",{hexcode:/#[\da-f]{3,6}/gi,entity:/\\[\da-f]{1,8}/gi,number:/[\d%\.]+/g,"function":/(attr|calc|cross-fade|cycle|element|hsla?|image|lang|linear-gradient|matrix3d|matrix|perspective|radial-gradient|repeating-linear-gradient|repeating-radial-gradient|rgba?|rotatex|rotatey|rotatez|rotate3d|rotate|scalex|scaley|scalez|scale3d|scale|skewx|skewy|skew|steps|translatex|translatey|translatez|translate3d|translate|url|var)/gi}),Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,"class-name":{pattern:/((?:(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/gi,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,"function":{pattern:/[a-z0-9_]+\(/gi,inside:{punctuation:/\(/}},number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,operator:/[-+]{1,2}|!|&lt;=?|>=?|={1,3}|(&amp;){1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|throw|catch|finally|null|break|continue)\b/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}}),Prism.languages.java=Prism.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/g,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+[e]?[\d]*[df]\b|\W\d*\.?\d+\b/gi,operator:{pattern:/([^\.]|^)([-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\/|%|\^|(&lt;){2}|($gt;){2,3}|:|~)/g,lookbehind:!0}}),Prism.languages.php=Prism.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|extends|private|protected|parent|static|throw|null|echo|print|trait|namespace|use|final|yield|goto|instanceof|finally|try|catch)\b/gi,constant:/\b[A-Z0-9_]{2,}\b/g}),Prism.languages.insertBefore("php","keyword",{delimiter:/(\?>|&lt;\?php|&lt;\?)/gi,variable:/(\$\w+)\b/gi,"package":{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/g,lookbehind:!0,inside:{punctuation:/\\/}}}),Prism.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/g,lookbehind:!0}}),Prism.languages.markup&&(Prism.hooks.add("before-highlight",function(a){"php"===a.language&&(a.tokenStack=[],a.code=a.code.replace(/(?:&lt;\?php|&lt;\?|<\?php|<\?)[\w\W]*?(?:\?&gt;|\?>)/gi,function(b){return a.tokenStack.push(b),"{{{PHP"+a.tokenStack.length+"}}}"}))}),Prism.hooks.add("after-highlight",function(a){if("php"===a.language){for(var c,b=0;c=a.tokenStack[b];b++)a.highlightedCode=a.highlightedCode.replace("{{{PHP"+(b+1)+"}}}",Prism.highlight(c,a.grammar,"php"));a.element.innerHTML=a.highlightedCode}}),Prism.hooks.add("wrap",function(a){"php"===a.language&&"markup"===a.type&&(a.content=a.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),Prism.languages.insertBefore("php","comment",{markup:{pattern:/(&lt;|<)[^?]\/?(.*?)(>|&gt;)/g,inside:Prism.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/g})),Prism.languages.insertBefore("php","variable",{"this":/\$this/g,global:/\$_?(GLOBALS|SERVER|GET|POST|FILES|REQUEST|SESSION|ENV|COOKIE|HTTP_RAW_POST_DATA|argc|argv|php_errormsg|http_response_header)/g,scope:{pattern:/\b[\w\\]+::/g,inside:{keyword:/(static|self|parent)/,punctuation:/(::|\\)/}}}),Prism.languages.coffeescript=Prism.languages.extend("javascript",{"block-comment":/([#]{3}\s*\r?\n(.*\s*\r*\n*)\s*?\r?\n[#]{3})/g,comment:/(\s|^)([#]{1}[^#^\r^\n]{2,}?(\r?\n|$))/g,keyword:/\b(this|window|delete|class|extends|namespace|extend|ar|let|if|else|while|do|for|each|of|return|in|instanceof|new|with|typeof|try|catch|finally|null|undefined|break|continue)\b/g}),Prism.languages.insertBefore("coffeescript","keyword",{"function":{pattern:/[a-z|A-z]+\s*[:|=]\s*(\([.|a-z\s|,|:|{|}|\"|\'|=]*\))?\s*-&gt;/gi,inside:{"function-name":/[_?a-z-|A-Z-]+(\s*[:|=])| @[_?$?a-z-|A-Z-]+(\s*)| /g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g}},"attr-name":/[_?a-z-|A-Z-]+(\s*:)| @[_?$?a-z-|A-Z-]+(\s*)| /g}),Prism.languages.scss=Prism.languages.extend("css",{comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},atrule:/@[\w-]+(?=\s+(\(|\{|;))/gi,url:/([-a-z]+-)*url(?=\()/gi,selector:/([^@;\{\}\(\)]?([^@;\{\}\(\)]|&amp;|\#\{\$[-_\w]+\})+)(?=\s*\{(\}|\s|[^\}]+(:|\{)[^\}]+))/gm}),Prism.languages.insertBefore("scss","atrule",{keyword:/@(if|else if|else|for|each|while|import|extend|debug|warn|mixin|include|function|return)|(?=@for\s+\$[-_\w]+\s)+from/i}),Prism.languages.insertBefore("scss","property",{variable:/((\$[-_\w]+)|(#\{\$[-_\w]+\}))/i}),Prism.languages.insertBefore("scss","ignore",{placeholder:/%[-_\w]+/i,statement:/\B!(default|optional)\b/gi,"boolean":/\b(true|false)\b/g,"null":/\b(null)\b/g,operator:/\s+([-+]{1,2}|={1,2}|!=|\|?\||\?|\*|\/|\%)\s+/g}),Prism.languages.bash=Prism.languages.extend("clike",{comment:{pattern:/(^|[^"{\\])(#.*?(\r?\n|$))/g,lookbehind:!0},string:{pattern:/("|')(\\?[\s\S])*?\1/g,inside:{property:/\$([a-zA-Z0-9_#\?\-\*!@]+|\{[^\}]+\})/g}},keyword:/\b(if|then|else|elif|fi|for|break|continue|while|in|case|function|select|do|done|until|echo|exit|return|set|declare)\b/g}),Prism.languages.insertBefore("bash","keyword",{property:/\$([a-zA-Z0-9_#\?\-\*!@]+|\{[^}]+\})/g}),Prism.languages.insertBefore("bash","comment",{important:/(^#!\s*\/bin\/bash)|(^#!\s*\/bin\/sh)/g}),Prism.languages.c=Prism.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/g,operator:/[-+]{1,2}|!=?|&lt;{1,2}=?|&gt;{1,2}=?|\-&gt;|={1,2}|\^|~|%|(&amp;){1,2}|\|?\||\?|\*|\//g}),Prism.languages.insertBefore("c","keyword",{property:/#\s*[a-zA-Z]+/g}),Prism.languages.cpp=Prism.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|delete\[\]|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|new\[\]|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/g,operator:/[-+]{1,2}|!=?|&lt;{1,2}=?|&gt;{1,2}=?|\-&gt;|:{1,2}|={1,2}|\^|~|%|(&amp;){1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/g}),Prism.languages.python={comment:{pattern:/(^|[^\\])#.*?(\r?\n|$)/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(as|assert|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/g,"boolean":/\b(True|False)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/[-+]{1,2}|=?&lt;|=?&gt;|!|={1,2}|(&){1,2}|(&amp;){1,2}|\|?\||\?|\*|\/|~|\^|%|\b(or|and|not)\b/g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g},Prism.languages.sql={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|((--)|(\/\/)).*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(ACTION|ADD|AFTER|ALGORITHM|ALTER|ANALYZE|APPLY|AS|ASC|AUTHORIZATION|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADE|CASCADED|CASE|CHAIN|CHAR VARYING|CHARACTER VARYING|CHECK|CHECKPOINT|CLOSE|CLUSTERED|COALESCE|COLUMN|COLUMNS|COMMENT|COMMIT|COMMITTED|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS|CONTAINSTABLE|CONTINUE|CONVERT|CREATE|CROSS|CURRENT|CURRENT_DATE|CURRENT_TIME|CURRENT_TIMESTAMP|CURRENT_USER|CURSOR|DATA|DATABASE|DATABASES|DATETIME|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DOUBLE PRECISION|DROP|DUMMY|DUMP|DUMPFILE|DUPLICATE KEY|ELSE|ENABLE|ENCLOSED BY|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPE|ESCAPED BY|EXCEPT|EXEC|EXECUTE|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR|FOR EACH ROW|FORCE|FOREIGN|FREETEXT|FREETEXTTABLE|FROM|FULL|FUNCTION|GEOMETRY|GEOMETRYCOLLECTION|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|IDENTITY|IDENTITY_INSERT|IDENTITYCOL|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTO|INVOKER|ISOLATION LEVEL|JOIN|KEY|KEYS|KILL|LANGUAGE SQL|LAST|LEFT|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONGBLOB|LONGTEXT|MATCH|MATCHED|MEDIUMBLOB|MEDIUMINT|MEDIUMTEXT|MERGE|MIDDLEINT|MODIFIES SQL DATA|MODIFY|MULTILINESTRING|MULTIPOINT|MULTIPOLYGON|NATIONAL|NATIONAL CHAR VARYING|NATIONAL CHARACTER|NATIONAL CHARACTER VARYING|NATIONAL VARCHAR|NATURAL|NCHAR|NCHAR VARCHAR|NEXT|NO|NO SQL|NOCHECK|NOCYCLE|NONCLUSTERED|NULLIF|NUMERIC|OF|OFF|OFFSETS|ON|OPEN|OPENDATASOURCE|OPENQUERY|OPENROWSET|OPTIMIZE|OPTION|OPTIONALLY|ORDER|OUT|OUTER|OUTFILE|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREV|PRIMARY|PRINT|PRIVILEGES|PROC|PROCEDURE|PUBLIC|PURGE|QUICK|RAISERROR|READ|READS SQL DATA|READTEXT|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEATABLE|REPLICATION|REQUIRE|RESTORE|RESTRICT|RETURN|RETURNS|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROWCOUNT|ROWGUIDCOL|ROWS?|RTREE|RULE|SAVE|SAVEPOINT|SCHEMA|SELECT|SERIAL|SERIALIZABLE|SESSION|SESSION_USER|SET|SETUSER|SHARE MODE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|START|STARTING BY|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLE|TABLES|TABLESPACE|TEMPORARY|TEMPTABLE|TERMINATED BY|TEXT|TEXTSIZE|THEN|TIMESTAMP|TINYBLOB|TINYINT|TINYTEXT|TO|TOP|TRAN|TRANSACTION|TRANSACTIONS|TRIGGER|TRUNCATE|TSEQUAL|TYPE|TYPES|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNPIVOT|UPDATE|UPDATETEXT|USAGE|USE|USER|USING|VALUE|VALUES|VARBINARY|VARCHAR|VARCHARACTER|VARYING|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH|WITH ROLLUP|WITHIN|WORK|WRITE|WRITETEXT)\b/gi,"boolean":/\b(TRUE|FALSE|NULL)\b/gi,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/\b(ALL|AND|ANY|BETWEEN|EXISTS|IN|LIKE|NOT|OR|IS|UNIQUE|CHARACTER SET|COLLATE|DIV|OFFSET|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b|[-+]{1}|!|=?&lt;|=?&gt;|={1}|(&amp;){1,2}|\|?\||\?|\*|\//gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[;[\]()`,.]/g},Prism.languages.groovy=Prism.languages.extend("clike",{keyword:/\b(as|def|in|abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|native|new|package|private|protected|public|return|short|static|strictfp|super|switch|synchronized|this|throw|throws|transient|try|void|volatile|while)\b/g,string:/("""|''')[\W\w]*?\1|("|'|\/)[\W\w]*?\2/g,number:/\b0b[01_]+\b|\b0x[\da-f_]+(\.[\da-f_p\-]+)?\b|\b[\d_]+(\.[\d_]+[e]?[\d]*)?[glidf]\b|[\d_]+(\.[\d_]+)?\b/gi,operator:/={0,2}~|\?\.|\*?\.@|\.&amp;|\.(?=\w)|\.{2}(&lt;)?(?=\w)|-&gt;|\?:|[-+]{1,2}|!|&lt;=&gt;|(&gt;){1,3}|(&lt;){1,2}|={1,2}|(&amp;){1,2}|\|{1,2}|\?|\*{1,2}|\/|\^|%/g,punctuation:/\.+|[{}[\];(),:$]/g,annotation:/@\w+/}),Prism.languages.insertBefore("groovy","punctuation",{"spock-block":/\b(setup|given|when|then|and|cleanup|expect|where):/g}),Prism.hooks.add("wrap",function(a){if("groovy"===a.language&&"string"===a.type){var b=a.content[0];"'"!=b&&(a.content=Prism.highlight(a.content,{expression:{pattern:/([^\\])(\$(\{.*?\}|[\w\.]*))/,lookbehind:!0,inside:Prism.languages.groovy}}),a.classes.push("/"===b?"regex":"gstring"))}}),Prism.languages.http={"request-line":{pattern:/^(POST|GET|PUT|DELETE|OPTIONS)\b\shttps?:\/\/\S+\sHTTP\/[0-9.]+/g,inside:{property:/^\b(POST|GET|PUT|DELETE|OPTIONS)\b/g,"attr-name":/:\w+/g}},"response-status":{pattern:/^HTTP\/1.[01] [0-9]+.*/g,inside:{property:/[0-9]+[A-Z\s-]+$/g}},keyword:/^[\w-]+:(?=.+)/gm};var c={"application/json":Prism.languages.javascript,"application/xml":Prism.languages.markup,"text/xml":Prism.languages.markup,"text/html":Prism.languages.markup};for(var d in c)if(c[d]){var e={};e[d]={pattern:new RegExp("(content-type:\\s*"+d+"[\\w\\W]*?)\\n\\n[\\w\\W]*","gi"),lookbehind:!0,inside:{rest:c[d]}},Prism.languages.insertBefore("http","keyword",e)}Prism.languages.ruby=Prism.languages.extend("clike",{comment:/#[^\r\n]*(\r?\n|$)/g,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/g,builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*[?!]?\b/g}),Prism.languages.insertBefore("ruby","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0},variable:/[@$&]+\b[a-zA-Z_][a-zA-Z_0-9]*[?!]?\b/g,symbol:/:\b[a-zA-Z_][a-zA-Z_0-9]*[?!]?\b/g}),Prism.languages.gherkin={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|((#)|(\/\/)).*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,atrule:/\b(And|Given|When|Then|In order to|As an|I want to|As a)\b/g,keyword:/\b(Scenario Outline|Scenario|Feature|Background|Story)\b/g},Prism.languages.csharp=Prism.languages.extend("clike",{keyword:/\b(abstract|as|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/g,string:/@?("|')(\\?.)*?\1/g,preprocessor:/^\s*#.*/gm,number:/\b-?(0x)?\d*\.?\d+\b/g}),Prism.hooks.add("after-highlight",function(a){var b=a.element.parentNode;if(b&&/pre/i.test(b.nodeName)&&-1!==b.className.indexOf("line-numbers")){var d,c=1+a.code.split("\n").length;lines=new Array(c),lines=lines.join("<span></span>"),d=document.createElement("span"),d.className="line-numbers-rows",d.innerHTML=lines,b.hasAttribute("data-start")&&(b.style.counterReset="linenumber "+(parseInt(b.getAttribute("data-start"),10)-1)),a.element.appendChild(d)}}),b.resolve()}),EasyDiscuss.module("profile",function(a){var b=this;EasyDiscuss.require().done(function(){EasyDiscuss.Controller("Profile",{defaultOptions:{userid:null,defaultTab:null,"{tabs}":".profileTab","{tabContents}":".tabContents","{loader}":".loader"}},function(b){return{init:function(){b.options.userid=b.element.data("id"),b.initializeTabs()},initializeTabs:function(){var c=b.options.defaultTab,d=a.uri(window.location).anchor();d&&(c=d.charAt(0).toUpperCase()+d.slice(1)),b.tabs(".tab"+c).click()},loadTabContents:function(a){EasyDiscuss.ajax("site.views.profile.tab",{type:a,id:b.options.userid},{beforeSend:function(){b.tabContents("#"+a).addClass("tab-pane-loading")},success:function(c,d){var e=c;null!=d&&(e+=d),b.tabContents("#"+a).removeClass("tab-pane-loading"),b.tabContents("#"+a).html(e)},fail:function(){}})},"{tabs} click":function(a){var c=a.data("id"),d=b.tabContents("#"+c);d.removeClass("dynamic-tab-pane-control").find(".tab-row").remove();var e=d.children().length;0>=e&&b.loadTabContents(a.data("id"))}}}),b.resolve()})}),EasyDiscuss.module("ranks",function(){var b=this;EasyDiscuss.require().language("COM_EASYDISCUSS_SUCCESS","COM_EASYDISCUSS_FAIL").done(function(a){EasyDiscuss.Controller("Administrator.Ranks",{defaultOptions:{userid:null,"{resetButton}":".resetButton"}},function(b){return{init:function(){},"{resetButton} click":function(){a(".resetMessage").addClass("discuss-loader"),EasyDiscuss.ajax("admin.views.ranks.ajaxResetRank",{userid:b.options.userid}).done(function(){a(".resetMessage").html(a.language("COM_EASYDISCUSS_SUCCESS"))}).fail(function(){a(".resetMessage").html(a.language("COM_EASYDISCUSS_FAIL"))}).always(function(){a(".resetMessage").removeClass("discuss-loader")})}}}),b.resolve()})}),EasyDiscuss.module("replies",function(a){var b=this;EasyDiscuss.require().view("comment.form").script("comments","votes","location").language("COM_EASYDISCUSS_REPLY_LOADING_MORE_COMMENTS","COM_EASYDISCUSS_REPLY_LOAD_ERROR").done(function(){EasyDiscuss.Controller("Replies",{defaultOptions:{termsCondition:null,sort:null,"{replyItem}":".discussReplyItem"}},function(b){return{init:function(){b.initItem(b.replyItem())},initItem:function(a,c){a.implement(EasyDiscuss.Controller.Reply.Item,{controller:{parent:b},reinit:c,termsCondition:b.options.termsCondition,enableMap:b.options.enableMap})},addItem:function(c,d){var e=a(c);"latest"==b.options.sort?e.prependTo(b.element):0==a(".replyLoadMore").length?e.appendTo(b.element):a(".replyLoadMore").controller().loadedAllReplies&&e.appendTo(b.element),b.initItem(e,d)},replaceItem:function(c,d){var e=a(d);b.replyItem("[data-id="+c+"]").replaceWith(e),b.initItem(e)}}}),EasyDiscuss.Controller("Reply.Item",{defaultOptions:{id:null,termsCondition:null,reinit:null,view:{commentForm:"comment.form"},"{addCommentButton}":".addComment","{commentFormContainer}":".commentFormContainer","{commentNotification}":".commentNotification","{commentsList}":".commentsList","{commentLoadMore}":".commentLoadMore","{editReplyButton}":".editReplyButton","{cancelReplyButton}":".cancel-reply","{composerContainer}":".discuss-editor","{composer}":".discuss-composer","{alertMessage}":".alertMessage","{postLocation}":".postLocation","{locationData}":".locationData"}},function(b){return{init:function(){if(b.options.id=b.element.data("id"),b.locationData().length>0){var c=a.parseJSON(b.locationData().val());b.postLocation().implement("EasyDiscuss.Controller.Location.Map",c)}if(EasyDiscuss.main_syntax_highlighter&&Prism.highlightAll(),b.commentsList().implement(EasyDiscuss.Controller.Comment.List),b.commentLoadMore().length>0&&b.commentLoadMore().implement(EasyDiscuss.Controller.Comment.LoadMore,{controller:{list:b.commentsList().controller()}}),b.options.reinit){var d=b.element.find(".postLocation");
if(d.length>0){var e=a.parseJSON(d.find(".locationData").val());EasyDiscuss.require().script("location").done(function(){d.implement("EasyDiscuss.Controller.Location.Map",e)})}b.find(".discuss-vote").implement(EasyDiscuss.Controller.Votes,{viewVotes:EasyDiscuss.view_votes}),b.find(".attachmentsItem").implement(EasyDiscuss.Controller.Attachments.Item,{})}},"{editReplyButton} click":function(){b.edit()},alert:function(c,d,e){void 0===d&&(d="info"),b.removeAlert(),a('<div class="alert alertMessage"></div>').addClass("alert-"+d).html(c).prependTo(b.composerContainer()),e&&setTimeout(function(){b.alertMessage().fadeOut("slow",function(){b.removeAlert()})},e)},removeAlert:function(){b.alertMessage().remove()},edit:function(){b.editReplyButton().addClass("btn-loading"),EasyDiscuss.ajax("site.views.post.editReply",{id:b.options.id}).done(function(a,c){b.composer().remove(),b.composerContainer().append(c),discuss.composer.init("."+a)}).fail(function(){b.alert("Unable to load composer.","error",3e3)}).always(function(){b.editReplyButton().removeClass("btn-loading")})},"{composer} save":function(c,d,e){var f=a(e).filter(".discussReplyItem");if(f.length>0){b.parent.replaceItem(b.options.id,f);var g=a(".discussionReplies").controller();g.initItem(f,!0)}},"{composer} cancel":function(){b.composer().remove()},"{addCommentButton} click":function(){var c=b.view.commentForm({id:b.options.id});a(c).implement(EasyDiscuss.Controller.Comment.Form,{container:b.commentFormContainer(),notification:b.commentNotification(),commentsList:b.commentsList(),loadMore:b.commentLoadMore(),termsCondition:b.options.termsCondition}),b.commentFormContainer().html(c).toggle()}}}),EasyDiscuss.Controller("Replies.LoadMore",{defaultOptions:{id:null,sort:null}},function(b){return{init:function(){b.loadedAllReplies=!1},"{self} click":function(c){c.enabled()&&(c.disabled(!0),c.addClass("btn-loading").html(a.language("COM_EASYDISCUSS_REPLY_LOADING_MORE_COMMENTS")),EasyDiscuss.ajax("site.views.post.getReplies",{id:b.options.id,start:b.list.replyItem().length,sort:b.options.sort}).done(function(d,e){d=a(d),d.appendTo(b.list.element);var f=d.filter("li").find(".discussReplyItem");f.implement(EasyDiscuss.Controller.Reply.Item,{controller:{parent:b.list},termsCondition:b.list.options.termsCondition,reinit:!0}),e?c.enabled(!0):(c.hide(),b.loadedAllReplies=!0)}).fail(function(){c.addClass("btn-danger").html(a.language("COM_EASYDISCUSS_REPLY_LOAD_ERROR"))}).always(function(){c.removeClass("btn-loading")}))}}}),b.resolve()})}),EasyDiscuss.module("votes",function(){var b=this;EasyDiscuss.require().done(function(){EasyDiscuss.Controller("Votes",{defaultOptions:{postId:null,"{voteUp}":".voteUp","{voteDown}":".voteDown","{votePoints}":".votePoints b","{voteText}":".voteText"}},function(a){return{init:function(){a.options.postId=a.element.data("postid")},vote:function(b){EasyDiscuss.ajax("site.views.votes.add",{id:a.options.postId,type:b}).done(function(b){a.votePoints().html(b)}).fail(function(a){console.log(a)})},"{votePoints} click":function(){a.options.viewVotes&&(disjax.loadingDialog(),disjax.load("Votes","showVoters",a.options.postId.toString()))},"{voteUp} click":function(){a.vote("up")},"{voteDown} click":function(){a.vote("down")}}}),b.resolve()})}),EasyDiscuss.module("stylesheet",function(){var b=this;EasyDiscuss.require().language("COM_EASYDISCUSS_SUCCESS","COM_EASYDISCUSS_FAIL").done(function(a){EasyDiscuss.Controller("Post.Stylesheet",{defaultOptions:{type:null,"{compileButton}":".compileButton","{compileType}":"#compileType","{compileResult}":".compileResult"}},function(b){return{init:function(){},"{compileButton} click":function(){b.testCompile(a("#compileType").val()),a(".compileButton").addClass("btn-loading")},testCompile:function(b){EasyDiscuss.ajax("site.views.compile.testCompile",{type:b}).done(function(b){try{console.log(b)}catch(d){}a(".compileResult").addClass("text-success"),a(".compileResult").removeClass("text-error"),a(".compileResult").html(a.language("COM_EASYDISCUSS_SUCCESS"))}).fail(function(b){try{console.log(b)}catch(d){}a(".compileResult").addClass("text-error"),a(".compileResult").removeClass("text-success"),a(".compileResult").html(a.language("COM_EASYDISCUSS_FAIL"))}).always(function(){a(".compileButton").removeClass("btn-loading")})}}}),b.resolve()})}),EasyDiscuss.module("tag",function(a){var b=this;EasyDiscuss.Controller("Tag.Form",{defaultOptions:{tags:[],tagSelections:[],tagSelectionLimit:25,"{tagList}":".discuss-tag-list.creation","{tagItems}":".discuss-tag-list.creation .tag-item","{tagItemRemoveButton}":".remove-tag","{tagSelection}":".discuss-tag-list.selection","{tagSelectionItems}":".discuss-tag-list.selection .tag-item","{tagSelectionMoreButton}":".discuss-tag-list.selection .more-tags","{totalTags}":".total-tags","{tagCreate}":".new-tag-item","{tagInput}":".tag-input","{tagCreateButton}":".tag-create",view:{tagItem:"tags.item"}}},function(b){return{init:function(){b.generateTagSelections(b.options.tagSelections),a.each(b.options.tags,function(a,c){b.tagMap[c.title]=c,b.createTag(c.title)})},tagItem:{},tagMap:{},tagSelectionMap:{},sanitizeTitle:function(b){return a.trim(b).replace(/[,\'\"\#\<\>]/gi,"")},getTagItem:function(c){return b.tagItems(function(){return a(this).data("title")==c})},createTag:function(c){if(b.checkTagLimit()){var d,c=b.sanitizeTitle(c);Object.prototype.hasOwnProperty.call(b.tagMap,c)&&(d=b.tagMap[c]),d=d||{title:c};var e=a(b.getTagItem(c)[0]||b.view("tagItem",d));if(e.data({title:d.title,title_filter:d.title.toUpperCase()}).css({opacity:0}),b.tagItems().length>0){var f=b.tagItems(":last");f[0]!=e[0]&&f.after(e)}else b.tagList().prepend(e);return e.animate({opacity:1}),b.useTagSelection(d.title),b.checkTagLimit(),e}},removeTag:function(a){var c=b.getTagItem(a);c.remove(),b.tagMap[a]&&b.createTagSelection(a),b.discardTagSelection(a),b.checkTagLimit()},checkTagLimit:function(){var a=b.tagItems().length;return b.totalTags().text(a),0!=b.options.tagLimit?a>b.options.tagLimit?!1:a==b.options.tagLimit?(b.tagCreate().hide(),!1):(b.tagCreate().show(),!0):void 0},generateTagSelections:function(c){var d=b.options.tagSelectionLimit;if(c.length<=d&&b.tagSelectionMoreButton().remove(),c.length<1)return b.element.addClass("no-selection"),void 0;b.options.tagSelections.reverse();var e=b.options.tagSelections.length;a.each(b.options.tagSelections,function(a,c){b.tagSelectionMap[c.title]=c;var f=b.createTagSelection(c.title);a==d+1&&b.tagSelectionMoreButton().show(),e-a>d&&f.addClass("extras")})},"{tagSelectionMoreButton} click":function(a){a.remove(),b.tagSelectionItems(".extras").css({opacity:0}).removeClass("extras").animate({opacity:1})},getTagSelectionItem:function(a){return Object.prototype.hasOwnProperty.call(b.tagItem,a)?b.tagItem[a]:void 0},createTagSelection:function(c){var d=b.getTagSelectionItem(c);if(d)return d.show(),d;var d=a("<li>").addClass("tag-item").data({title:c,title_filter:c.toUpperCase()}).html(c);return b.tagItem[c]=d,b.tagSelection().prepend(d),d},useTagSelection:function(a){var c=b.getTagSelectionItem(a);c&&c.addClass("used").hide()},discardTagSelection:function(a){var c=b.getTagSelectionItem(a);c&&b.getTagSelectionItem(a).removeClass("used").show()},createTagFromInput:function(){var a=b.sanitizeTitle(b.tagInput().val());""!=a&&(b.createTag(a),b.tagInput().val("")),b.filterTagSelectionItems("")},filterTagSelectionItems:function(c){if(c=b.sanitizeTitle(c).toUpperCase(),""==c)b.tagSelectionItems(":not(.used)").show(),b.element.removeClass("no-selection"),b.tagSelectionMoreButton().show();else{b.tagSelectionMoreButton().hide();var d=b.tagSelectionItems().filter(function(b,d){var d=a(this);return d.hasClass(".used")?(d.hide(),!1):d.data("title_filter").indexOf(c)<0?(d.hide(),!1):(d.show(),!0)});d.length<1&&b.element.addClass("no-selection")}},"{tagInput} keydown":function(a,c){c.stopPropagation(),b.realEnterKey=13==c.keyCode},"{tagInput} keypress":function(a,c){c.stopPropagation(),b.realEnterKey=b.realEnterKey&&13==c.keyCode},"{tagInput} keyup":function(a,c){switch(c.stopPropagation(),c.keyCode){case 27:a.val("");break;case 13:b.realEnterKey&&b.createTagFromInput()}b.filterTagSelectionItems(a.val())},"{tagCreateButton} click":function(){b.createTagFromInput()},"{tagItemRemoveButton} click":function(a){var c=a.parents(".tag-item").data("title");b.removeTag(c)},"{tagSelectionItems} click":function(a){b.createTag(a.data("title"))}}}),b.resolve()}),EasyDiscuss.module("toolbar",function(a){!function(){var b=a.event,c=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;for(e=0;e<b.length;e++)for(f=b[e],h=f.indexOf(".")<0,h||(k=f.split("."),f=k.shift(),l=new RegExp("(^|\\.)"+k.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")),g=(a[f]||[]).slice(0),i=0;i<g.length;i++)j=g[i],m=h||l.test(j.namespace),m&&(d?j.selector===d&&c(f,j.origHandler||j.handler):null===d?c(f,j.origHandler||j.handler,j.selector):j.selector||c(f,j.origHandler||j.handler))};b.find=function(b,d,e){var f=(a._data(b)||{}).events,g=[];return f?(c(f,d,function(a,b){g.push(b)},e),g):g},b.findBySelector=function(b,d){var e=a._data(b).events,f={},g=function(a,b,c){var d=f[a]||(f[a]={}),e=d[b]||(d[b]=[]);e.push(c)};return e?(c(e,d,function(a,b,c){g(c||"",a,b)},null),f):f},b.supportTouch="ontouchend"in document,a.fn.respondsTo=function(c){return this.length?b.find(this[0],a.isArray(c)?c:[c]).length>0:!1},a.fn.triggerHandled=function(b,c){return b="string"==typeof b?a.Event(b):b,this.trigger(b,c),b.handled},b.setupHelper=function(c,d,e){e||(e=d,d=null);var f=function(f){var g,h=f.selector||"";h?(g=b.find(this,c,h),g.length||a(this).delegate(h,d,e)):b.find(this,c,h).length||b.add(this,d,e,{selector:h,delegate:this})},g=function(f){var g,h=f.selector||"";h?(g=b.find(this,c,h),g.length||a(this).undelegate(h,d,e)):b.find(this,c,h).length||b.remove(this,d,e,{selector:h,delegate:this})};a.each(c,function(){b.special[this]={add:f,remove:g,setup:function(){},teardown:function(){}}})};var d="ontouchend"in document,f=d?"touchstart":"mousedown",g=d?"touchend":"mouseup",i=function(b){var c=b.originalEvent.touches?b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:b;return{time:(new Date).getTime(),coords:[c.pageX,c.pageY],origin:a(b.target)}};a.event.setupHelper(["tap"],f,function(b){function m(g){d=i(g),(Math.abs(c.coords[0]-d.coords[0])<10||Math.abs(c.coords[1]-d.coords[1])<10)&&a.each(a.event.find(e,["tap"],f),function(){this.call(h,b,{start:c,end:d})})}var d,l,c=i(b),e=b.delegateTarget||b.currentTarget,f=b.handleObj.selector,h=this;l=setTimeout(function(){a(e).unbind(g,m)},500),a(e).one(g,m)})}();var b=this;EasyDiscuss.require().done(function(a){EasyDiscuss.Controller("Toolbar",{defaultOptions:{"{items}":".toolbarItem","{dropdowns}":".dropdown-menu","{notificationLink}":".notificationLink","{notificationDropDown}":".notificationDropDown","{notificationResult}":".notificationResult","{notificationItems}":".notificationItem","{notificationLoader}":".notificationLoader","{messageLink}":".messageLink","{messageDropDown}":".messageDropDown","{messageResult}":".messageResult","{messageLoader}":".messageLoader","{messageItems}":".messageItem","{logoutForm}":"#logoutForm","{logoutButton}":".logoutButton","{loginLink}":".loginLink","{loginDropDown}":".loginDropDown","{profileLink}":".profileLink","{profileDropDown}":".profileDropDown"}},function(b){return{init:function(){a.responsive(b.element,{elementWidth:function(){return b.element.outerWidth(!0)-15},conditions:{at:function(){var c=0;return b.items().each(function(b,d){c+=a(d).outerWidth(!0)}),c}(),alsoSwitch:{".dc_toolbar-wrapper":"narrow",".dc-button":"show","#dc_toolbar":"hidden-height"}}})},"{logoutButton} click":function(){b.logoutForm().submit()},"{loginLink} click":function(){b.messageDropDown().hide(),b.notificationDropDown().hide(),b.loginDropDown().toggle()},"{profileLink} tap":function(){b.messageDropDown().hide(),b.notificationDropDown().hide(),b.profileDropDown().toggle()},"{messageLink} tap":function(){if(b.profileDropDown().hide(),b.notificationDropDown().hide(),"none"==b.messageDropDown().css("display")){var c={};c[a(".easydiscuss-token").val()]=1,EasyDiscuss.ajax("site.views.conversation.load",c,{beforeSend:function(){b.messageLoader().show(),b.messageItems().remove()},success:function(a){b.messageLoader().hide(),b.messageResult().append(a)}})}b.messageDropDown().toggle()},"{notificationLink} tap":function(){if(b.messageDropDown().hide(),b.profileDropDown().hide(),"none"==b.notificationDropDown().css("display")){var c={};c[a(".easydiscuss-token").val()]=1,EasyDiscuss.ajax("site.views.notifications.load",c,{beforeSend:function(){b.notificationLoader().show(),b.notificationItems().remove()},success:function(a){b.notificationLoader().hide(),b.notificationResult().append(a)}})}b.notificationDropDown().toggle()}}}),EasyDiscuss.Controller("mod_notifications",{defaultOptions:{"{items}":".toolbarItem","{dropdowns}":".dropdown-menu","{notificationLink}":".notificationLink","{notificationDropDown}":".notificationDropDown","{notificationResult}":".notificationResult","{notificationItems}":".notificationItem","{notificationLoader}":".notificationLoader","{messageLink}":".messageLink","{messageDropDown}":".messageDropDown","{messageResult}":".messageResult","{messageLoader}":".messageLoader","{messageItems}":".messageItem","{logoutForm}":"#logoutForm","{logoutButton}":".logoutButton","{loginLink}":".loginLink","{loginDropDown}":".loginDropDown","{profileLink}":".profileLink","{profileDropDown}":".profileDropDown"}},function(b){return{init:function(){a.responsive(b.element,{elementWidth:function(){return b.element.outerWidth(!0)-15},conditions:{at:function(){var c=0;return b.items().each(function(b,d){c+=a(d).outerWidth(!0)}),c}(),alsoSwitch:{".dc_toolbar-wrapper":"narrow",".dc-button":"show","#dc_toolbar":"hidden-height"}}})},"{logoutButton} click":function(){b.logoutForm().submit()},"{loginLink} click":function(){b.messageDropDown().hide(),b.notificationDropDown().hide(),b.loginDropDown().toggle()},"{profileLink} click":function(){b.messageDropDown().hide(),b.notificationDropDown().hide(),b.profileDropDown().toggle()},"{messageLink} click":function(){if(b.profileDropDown().hide(),b.notificationDropDown().hide(),"none"==b.messageDropDown().css("display")){var c={};c[a(".easydiscuss-token").val()]=1,EasyDiscuss.ajax("site.views.conversation.load",c,{beforeSend:function(){b.messageLoader().show(),b.messageItems().remove()},success:function(a){b.messageLoader().hide(),b.messageResult().append(a)}})}b.messageDropDown().toggle()},"{notificationLink} click":function(){if(b.messageDropDown().hide(),b.profileDropDown().hide(),"none"==b.notificationDropDown().css("display")){var c={};c[a(".easydiscuss-token").val()]=1,EasyDiscuss.ajax("site.views.notifications.load",c,{beforeSend:function(){b.notificationLoader().show(),b.notificationItems().remove()},success:function(a){b.notificationLoader().hide(),b.notificationResult().append(a)}})}b.notificationDropDown().toggle()}}}),b.resolve()})})});