EasyDiscuss.module("customfields",function(e){var t=this;EasyDiscuss.require().language("COM_EASYDISCUSS_CUSTOMFIELDS_DISPLAY_ERROR").done(function(e){EasyDiscuss.Controller("Administrator.CustomFields",{defaultOptions:{customId:null,defaultType:null,optionCount:".optionCount","{optionType}":"#type","{advanceOptions}":".customFieldAdvanceOption","{addButton}":'button[name="Add"]',"{removeButton}":'button[name="Remove"]',"{fieldLoader}":".fieldLoader","{addContainer}":".addContainer"}},function(t){return{init:function(){},"{optionType} change":function(e){t.getAdvanceOption(e.val())},"{addButton} click":function(e){t.addFieldOption(e.data("fieldtype"))},"{removeButton} click":function(e){t.removeFieldOption(e,e.attr("id"),e.data("removetype"))},getAdvanceOption:function(n){EasyDiscuss.ajax("admin.views.customfields.getAdvanceOption",{activeType:n,customId:t.options.customId},{beforeSend:function(){e(".fieldLoader").show()}}).done(function(n,r,i){t.advanceOptions().html(r),e(".addContainer").html(n),e(".optionCount").attr("totalcount",i),e(".fieldLoader").hide()}).fail(function(n){t.advanceOptions().append(e.language("COM_EASYDISCUSS_CUSTOMFIELDS_DISPLAY_ERROR"))}).always(function(){e(".fieldLoader").hide()})},addFieldOption:function(n){var r=e(".optionCount").attr("totalcount");EasyDiscuss.ajax("admin.views.customfields.addFieldOption",{activeType:n,customId:t.options.customId,fieldCount:r},{beforeSend:function(){e(".fieldLoader").show()}}).done(function(n,r){t.advanceOptions().append(n),e(".optionCount").attr("totalcount",r),e(".fieldLoader").hide()}).fail(function(n){t.advanceOptions().append(e.language("COM_EASYDISCUSS_CUSTOMFIELDS_DISPLAY_ERROR"))}).always(function(){e(".fieldLoader").hide()})},removeFieldOption:function(t,n,r){e("#"+r+"_"+n).remove(),e(".remove"+r+"_"+n).remove(),t.remove()}}}),t.resolve()})});