EasyDiscuss.module("favourites",function(e){var t=this;EasyDiscuss.require().language("COM_EASYDISCUSS_FAVOURITE_BUTTON_UNFAVOURITE","COM_EASYDISCUSS_FAVOURITE_BUTTON_FAVOURITE").done(function(e){EasyDiscuss.Controller("Post.Favourites",{defaultOptions:{postId:null,"{favButton}":".btnFav","{removeButton}":".btnRemove","{favLoader}":".favLoader","{favCount}":".favCount"}},function(t){return{init:function(){t.options.postId=t.element.data("postid")},"{favButton} click":function(n){EasyDiscuss.ajax("site.views.favourites.favourite",{postid:t.options.postId},{beforeSend:function(){e(".favLoader").show(),e(".favCount").empty()}}).done(function(t,r){t?(n.addClass("isfav"),e(n).html(e.language("COM_EASYDISCUSS_FAVOURITE_BUTTON_UNFAVOURITE")),e(".favCount").html(r)):(n.removeClass("isfav btn-primary"),e(n).html(e.language("COM_EASYDISCUSS_FAVOURITE_BUTTON_FAVOURITE")),e(".favCount").html(r))}).fail(function(e){}).always(function(){e(".favLoader").hide()})},"{removeButton} click":function(n){EasyDiscuss.ajax("site.views.favourites.remove",{postid:t.options.postId}).done(function(){n.removeClass("isfav"),e(".discussItem"+t.options.postId).remove()}).fail(function(e){})}}}),t.resolve()})});