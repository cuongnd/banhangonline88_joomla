<?phpdefined('_JEXEC') or die;JHtml::_('jquery.framework');JHtml::_('jquery.ui');JHtml::_('jquery.zozo_tab');JHtml::_('jQuery.lazyload');JHtml::_('jQuery.appear');JHtml::_('jQuery.flip');$doc->addLessStyleSheet('/media/system/js/slick-master/slick/slick-theme.less');$doc->addLessStyleSheet('/modules/mod_tab_products/assets/less/mod_tab_products.less');$doc->addScript('/modules/mod_tab_products/assets/js/jquery.vtvslider.js');JHtml::_('jQuery.utility');$doc->addScript('/modules/mod_tab_products/assets/js/mod_tab_products.js');require_once JPATH_ROOT . DS . 'administrator/components/com_hikashop/helpers/helper.php';$moduleclass_sfx = $params->get('moduleclass_sfx', '');$params = $module->params;$render_current_module = function ($module,$modtab_productshelper, $deconstruction = false) {    $session = JFactory::getSession();    $tab_active = $session->get(Modtab_productsHelper::MOD_TAB_PRODUCTS_TAB_ACTIVE . $module->id, 0);    if ($deconstruction) {        $params = $module->params;        $list_category_product = $modtab_productshelper->get_list_category_product($params, $deconstruction);    } else {        $image = hikashop_get('helper.image');        $params = $module->params;        $list_category_product = $modtab_productshelper->get_list_category_product($params);        $currencyHelper = hikashop_get('class.currency');        $mainCurr = $currencyHelper->mainCurrency();        $style = $params->get('product_style', 'table');        $lazyload = (boolean)$params->get('lazyload', false);    }    $current_module_image = $params->get('module_image', '');    ob_start();    ?>    <?php if ($deconstruction) { ?>        <!-- Tab Navigation Menu -->        <div class="wrapper-content">            <?php if ($module->showtitle): ?><h3 class="module-title"> <?php if ($current_module_image != ''): ?><img                class="icon"                src="<?php echo JUri::root() . $current_module_image ?>"><?php endif; ?><?php echo $module->title ?>                </h3> <?php endif; ?>            <div class="row">                <div class="col-lg-12">                    <div class="timeline-item">                        <div class="animated-background">                            <div id="tab_product_<?php echo $module->id ?>" class="tab-product ">                                <ul>                                    <?php foreach ($list_category_product as $category) { ?>                                        <?php                                        $icon_file_path = $category->detail->icon_file_path;                                        ?>                                        <li><a><span class="animated-background">&nbsp;</span></a></li>                                    <?php } ?>                                </ul>                                <!-- Content container -->                                <div class="">                                    <?php foreach ($list_category_product as $category) { ?>                                        <div>                                            <?php if ($style == 'table') { ?>                                                <?php                                                $column = $params->get('total_table_column', 4);                                                $list_chunk_product = array_chunk($list_product, $column);                                                ?>                                                <?php foreach ($list_chunk_product AS $list_product) { ?>                                                    <div class="row">                                                        <?php foreach ($list_product AS $product) { ?>                                                            <?php                                                            $list_image = $product->list_image;                                                            $list_image = explode(';', $list_image);                                                            $first_image = reset($list_image);                                                            $link = hikashop_contentLink('product&task=show&cid=' . $product->product_id);                                                            ?>                                                            <div class="col-lg-<?php echo 12 / $column ?>">                                                                <div class="item">                                                                    <?php echo $image->display($first_image, false, "", 'class="icon  img-responsive"', '', 200, 300, '', !$lazyload); ?>                                                                    <div class="title"><a                                                                            title="<?php echo $product->product_name ?>"                                                                            href="<?php echo $link ?>"><?php echo $product->product_name ?></a>                                                                    </div>                                                                    <div                                                                        class="price"><?php echo $currencyHelper->format($product->price_value, $mainCurr); ?></div>                                                                </div>                                                            </div>                                                        <?php } ?>                                                    </div>                                                <?php } ?>                                            <?php } elseif ($style == 'slider') { ?>                                                <?php                                                $list_product = range(0, 20);                                                $total_item_on_slide_screen = $params->get('total_item_on_slide_screen', 4);                                                $list_chunk_product = array_chunk($list_product, $total_item_on_slide_screen);                                                $total_column_sub_category = 8;                                                ?>                                                <div class="wrapper-content ">                                                    <div class="wrapper-content-left pull-left"                                                         style="width: <?php echo count($list_sub_category_detail) > $total_column_sub_category ? '90%' : '100%' ?> ">                                                        <div class="row">                                                            <div class="col-lg-12">                                                                <div class="list-sub-category">                                                                    <ul>                                                                        <?php for ($i = 0; $i < count($list_sub_category_detail); $i++) { ?>                                                                            <?php                                                                            if ($i > $total_column_sub_category - 1) {                                                                                break;                                                                            }                                                                            $sub_category = $list_sub_category_detail[$i];                                                                            $icon_file_path = $sub_category->icon_file_path;                                                                            ?>                                                                            <li><a class="sub-category"                                                                                   data-category_id="<?php echo $sub_category->category_id ?>"                                                                                   href="javascript:void(0)"><?php echo $image->display($icon_file_path, false, "", 'class="icon  img-responsive"', '', 40, 40, '', !$lazyload); ?>                                                                                    <div                                                                                        class="category-name"><?php echo JString::sub_string($sub_category->category_name, 20) ?></div>                                                                                </a></li>                                                                        <?php } ?>                                                                    </ul>                                                                </div>                                                            </div>                                                        </div>                                                        <div class="row">                                                            <div class="col-lg-12">                                                                <div class="banner">                                                                    <div class="animated-background banner"></div>                                                                </div>                                                                <div class="product_slide ">                                                                    <div class="control pre"><i                                                                            class="icon_vg40 icon_vg40_control_left"></i>                                                                    </div>                                                                    <div class="control next"><i                                                                            class="icon_vg40 icon_vg40_control_right"></i>                                                                    </div>                                                                    <div class="row list-product">                                                                        <?php foreach ($list_product AS $product) { ?>                                                                            <?php                                                                            $list_image = $product->list_image;                                                                            $list_image = explode(';', $list_image);                                                                            $first_image = reset($list_image);                                                                            //$link = hikashop_contentLink('product&task=show&cid=' . $product->product_id);                                                                            $link = '';                                                                            ?>                                                                            <div                                                                                class="slide item item-<?php echo $product->product_id ?> col-lg-4">                                                                                <?php echo $image->display($first_image, false, "", 'class="image  img-responsive"', '', 200, 300, '', !$lazyload); ?>                                                                                <div class="product-name"><a                                                                                        title="<?php echo $product->product_name ?>"                                                                                        href="<?php echo $link ?>"><?php echo JString::sub_string($product->product_name, 30) ?> </a>                                                                                </div>                                                                                <div                                                                                    class="price"><?php echo $currencyHelper->format($product->price_value, $mainCurr); ?></div>                                                                            </div>                                                                        <?php } ?>                                                                    </div>                                                                </div>                                                            </div>                                                        </div>                                                        <div class="row">                                                            <div class="col-lg-12">                                                                <?php foreach ($list_small_product as $small_product) { ?>                                                                    <?php                                                                    $list_image = $small_product->list_image;                                                                    $list_image = explode(';', $list_image);                                                                    $first_image = reset($list_image);                                                                    $link = hikashop_contentLink('product&task=show&cid=' . $small_product->product_id);                                                                    ?>                                                                    <div class="small-product pull-left">                                                                        <?php echo $image->display($first_image, false, "", 'class="image  img-responsive"', '', 200, 300, '', !$lazyload); ?>                                                                        <div class="product-name"><a                                                                                title="<?php echo $small_product->product_name ?>"                                                                                href="<?php echo $link ?>"><?php echo JString::sub_string($small_product->product_name, 25) ?> </a>                                                                        </div>                                                                        <div                                                                            class="price"><?php echo $currencyHelper->format($small_product->price_value, $mainCurr); ?></div>                                                                    </div>                                                                <?php } ?>                                                            </div>                                                        </div>                                                    </div>                                                    <?php if (count($list_sub_category_detail) > $total_column_sub_category) { ?>                                                        <div class="wrapper-content-right pull-left" style="width: 10%">                                                            <div class="list-sub-category vertical">                                                                <ul class="vertical">                                                                    <?php for ($i = $total_column_sub_category; $i < count($list_sub_category_detail); $i++) { ?>                                                                        <?php                                                                        $sub_category = $list_sub_category_detail[$i];                                                                        $icon_file_path = $sub_category->icon_file_path;                                                                        ?>                                                                        <li><a class="sub-category"                                                                               data-category_id="<?php echo $sub_category->category_id ?>"                                                                               href="javascript:void(0)"><?php echo $image->display($icon_file_path, false, "", 'class="icon  img-responsive"', '', 40, 40, '', !$lazyload); ?>                                                                                <div                                                                                    class="category-name"><?php echo JString::sub_string($sub_category->category_name, 20) ?></div>                                                                            </a></li>                                                                    <?php } ?>                                                                </ul>                                                            </div>                                                        </div>                                                    <?php } ?>                                                </div>                                            <?php } ?>                                        </div>                                    <?php } ?>                                </div>                            </div>                        </div>                    </div>                </div>            </div>        </div>    <?php } else { ?>        <?php        $class_column_table = $params->get('class_column_table', 'col-lg-4 col-md-3');        ?>        <!-- Tab Navigation Menu -->        <?php if ($module->showtitle): ?><h3 class="module-title"> <?php if ($current_module_image != ''): ?><img            class="icon"            src="<?php echo JUri::root() . $current_module_image ?>"><?php endif; ?><?php echo $module->title ?>            </h3> <?php endif; ?>        <div id="tab_product_<?php echo $module->id ?>" class="tab-product">            <ul>                <?php foreach ($list_category_product as $category) { ?>                    <?php                    $icon_file_path = $category->detail->icon_file_path;                    ?>                    <li data-category_id="<?php echo $category->detail->category_id ?>">                        <a><?php echo $image->display($icon_file_path, false, "", ' class="icon img-responsive" ', '', 25, 25, '', !$lazyload); ?><?php echo $category->detail->category_name ?></a>                    </li>                <?php } ?>            </ul>            <!-- Content container -->            <div class="z-container" >                <?php foreach ($list_category_product as $key => $category) { ?>                    <div ></div>                <?php } ?>            </div>        </div>    <?php } ?>    <?php    $html = ob_get_clean();    return $html;};$lazyload = (boolean)$params->get('lazyload', false);$style = $params->get('product_style', '');$effects = array('tada', 'pulse', 'flipInX', 'flipInY', 'fadeIn', 'fadeInUp', 'fadeInRight', 'fadeInUpBig',    'fadeInRightBig', 'slideInRight', 'bounceIn', 'bounceInUp', 'bounceInRight', 'rotateIn',    'rotateInUpLeft', 'rotateInUpRight', 'lightSpeedIn');?>    <div class="mod_tab_products <?php echo $moduleclass_sfx ?>" id="mod_tab_products_<?php echo $module->id ?>">        <?php        if ($lazyload) {            echo $render_current_module($module,$modtab_productshelper, true);        } else {            echo $render_current_module($module,$modtab_productshelper, false);        }        ?>    </div><?php$js_content = '';$session = JFactory::getSession();$tab_active = $session->get(Modtab_productsHelper::MOD_TAB_PRODUCTS_TAB_ACTIVE . $module->id, 0);$doc = JFactory::getDocument();ob_start();?>    <script type="text/javascript">        jQuery(document).ready(function ($) {            $("#mod_tab_products_<?php echo $module->id ?>").mod_tab_products({                module_id:<?php echo $module->id   ?>,                style: "<?php echo $style ?>",                lazyload: <?php echo json_encode($lazyload) ?>,                deconstruction: <?php echo json_encode($lazyload) ?>,                params:<?php echo json_encode($params) ?>,                tab_active:<?php echo (int)$tab_active ?>            });        });    </script><?php$js_content = ob_get_clean();$js_content = JUtility::remove_string_javascript($js_content);$doc->addScriptDeclaration($js_content);?>